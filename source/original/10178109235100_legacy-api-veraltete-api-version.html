<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Legacy API (Veraltete API-Version)</title>
    <!--
    Zendesk Original HTML Export
    Artikel-ID: 10178109235100
    Titel: Legacy API (Veraltete API-Version)
    URL: https://help.xentral.com/hc/de/articles/10178109235100-Legacy-API-Veraltete-API-Version
    Erstellt: 2023-08-28T13:58:07Z
    Aktualisiert: 2025-08-16T06:57:41Z
    Draft: False
    User Segment ID: None
    Section ID: 11291544329756
    Export-Zeitpunkt: 2025-11-16 19:10:03
    -->
</head>
<body>
    <div class="zendesk-article-content">
        <div lang="de" dir="ltr" class="section original-topic zd-article" xml:lang="de">
<div dir="ltr" class="caution" style="margin-left: 0.5in; margin-right: 0.5in;">
<h3 class="title">Achtung</h3>
<p><span class="bold"><strong>Wichtige Mitteilung: Nutzung der neuesten API empfohlen</strong></span> <span class="emphasis"><em>(letzte Aktualisierung dieser Information: 01/2025)</em></span></p>
<p>Bitte beachte, dass die beiden älteren API-Versionen (REST-API und die zuvor eingeführte API) abgekündigt sind und sich im Wartungsmodus befinden.Wir empfehlen Ihnen dringend, die <span class="bold"><strong>neueste API-Generation</strong></span> zu verwenden, da diese aktiv weiterentwickelt wird, neue Funktionen bietet und Sicherheitsstandards erfüllt.</p>
<p><span class="bold"><strong>Vorteile der neuesten API:</strong></span></p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc;">
<li class="listitem">
<p>Erweiterte Funktionalitäten</p>
</li>
<li class="listitem">
<p>Verbesserte Leistung und Stabilität</p>
</li>
<li class="listitem">
<p>Zukunftssichere Entwicklung</p>
</li>
</ul>
</div>
<p>Weitere Informationen zur neuen API und zur Migration findest du in der <a class="link" href="https://developer.xentral.com/reference/intro" target="_blank" rel="noopener">API-Dokumentation</a>, allgemeine Informationen im Helpcenter-Artikel <a class="xref linktype-component" href="https://help.xentral.com/hc/de/articles/6618896113820#UUID-03a6d5d2-0c6b-65c8-6753-4bc5ad5bb509" title="API Dokumentation und Ressourcen (Neue Xentral API)">API Dokumentation und Ressourcen (Neue <span class="phrase">Xentral</span> API)</a>. Für Fragen oder Unterstützung bei der Migration steht unser Support-Team gerne zur Verfügung.</p>
</div>
<p>Dieser Artikel behandelt die Legacy-API von <span class="phrase">Xentral</span>. Wir empfehlen jedoch die Nutzung der neuesten Generation der <span class="phrase">Xentral</span> API, da diese kontinuierlich weiterentwickelt wird und modernste Funktionalitäten bietet.</p>
<p>In Xentral stehen derzeit zwei Legacy-APIs zur Verfügung:</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc;">
<li class="listitem">
<p><span class="bold"><strong>REST-API (Legacy)</strong></span>: Die REST-API-Dokumentation für die abgekündigte Version ist weiterhin verfügbar und enthält alle relevanten Informationen zur Nutzung dieser API, einschließlich der Erstellung eines API-Accounts, der Gestaltung von Anfragen sowie der Liste der verfügbaren Endpunkte. Die Dokumentation kann unter www/api/docs.html oder online abgerufen werden: <a class="link" href="https://update.xentral.biz/apidoc/docs211.html" target="_blank" rel="noopener">REST-API-Dokumentation (Legacy)</a>. Bitte beachte, dass diese API-Version sich im Wartungsmodus befindet und keine neuen Funktionen oder Updates erhält.</p>
</li>
<li class="listitem">
<p><span class="bold"><strong>Standard-API (Legacy)</strong></span>: Die folgende Dokumentation beschreibt eine ältere, vor der REST-API eingeführte API-Version, die für die Anbindung externer Systeme genutzt werden kann. Sie unterstützt grundlegende Funktionen wie das Anlegen und Bearbeiten von Adressen, Aufträgen und Benutzern, Single Sign-On sowie Event-Handler für Rückmeldungen an Fremdsysteme. Diese API wird nicht weiterentwickelt und ist ausschließlich für bestehende Integrationen vorgesehen.</p>
</li>
</ul>
</div>
<div dir="ltr" class="section accordion sub-topic">
<div class="panel panel-default">
<div class="panel-heading">
<div class="titlepage">
<h2 class="title">
<a data-zd-article="UUID-dcf5bf7e-1b56-6f1c-d7fb-6aef7e9f9158" id="UUID-dcf5bf7e-1b56-6f1c-d7fb-6aef7e9f9158_id_360017436919_id_h_01FRJBM04JV55GKN42R84XQVHH"></a>REST API (Legacy)</h2>
</div>
</div>
<div class="panel-body collapse" id="UUID-dcf5bf7e-1b56-6f1c-d7fb-6aef7e9f9158_id_360017436919_id_h_01FRJBM04JV55GKN42R84XQVHH_body">
<div dir="ltr" class="important" style="margin-left: 0.5in; margin-right: 0.5in;">
<h3 class="title">Wichtig</h3>
<p>Wir empfehlen nicht mehr die Anbindung der Standard-API über die Hash-Authentifizierung vorzunehmen. Stattdessen ist unsere Empfehlung die REST-API, mit der auch die Funktionsaufrufe der Standard-API (dieser API) vorgenommen werden können.</p>
</div>
<p>Ab Version 18.3 gibt es in der xentral ERP-Software zusätzlich eine REST-API, die künftig weiter ausgebaut wird und später die alten API-Aufrufe ablösen soll. Spezifische Infos zur xentral-API findest du hier.</p>
<p>Die Dokumentation zur REST-API befinden sich in der Installation unter www/api/docs.html. Dort wird erklärt, wie ein API-Account angelegt werden kann, wie Anfragen an API-Ressourcen aussehen müssen, welche API-Endpunkte existieren, usw.</p>
<p>Die API-Dokumentation wird mit xentral ausgeliefert und kann in jeder xentral-Instanz unter instanzname/www/api/docs.html im Browser aufgerufen werden. Oft wird das /www/ jedoch nicht benötigt.</p>
<p>Alternativ ist die API-Dokumentation, nach Versionen gegliedert, auch online zu finden: <a class="link" href="https://update.xentral.biz/apidoc/docs224.html" target="_blank" rel="noopener">https://update.xentral.biz/apidoc/docs224.html</a></p>
<p>Prinzipiell kann die Version im Pfadname angegeben werden, Die Version 22.4 findet sich beispielsweise im Pfad docs224.html.</p>
<div dir="ltr" class="section internal sub-topic">
<div class="titlepage">
<h3 class="title">
<a data-zd-article="UUID-dcf5bf7e-1b56-6f1c-d7fb-6aef7e9f9158" id="UUID-dcf5bf7e-1b56-6f1c-d7fb-6aef7e9f9158_id_360017436919_id_h_01FRJBM9BAFC57TTXP7Z64RZFC"></a>Weitere Informationen zu Rest-APIs</h3>
</div>
<p>Bei der Bereitstellung von Tracking-Nummern über die API ist keine weitere Übertragung vorgesehen, um diese Informationen an die Shops zu übermitteln.</p>
<p>Diese Aufgabe kann durch den Cronjob (shop_rueckmeldung) erledigt werden. Dies funktioniert jedoch nur für die folgenden logistischen Modi:</p>
<div class="mediaobject"><img src="https://help.xentral.com/hc/article_attachments/10178120500124" style="" alt="API-Documentation.png"></div>
<div dir="ltr" class="note" style="margin-left: 0.5in; margin-right: 0.5in;">
<h3 class="title">Anmerkung</h3>
<p>Mit der neuen Versionen (ab 22.1.x) ist die Authentifizierung per Hash nicht mehr notwendig/möglich. Wir setzen auf DIGEST in Zusammenhang mit unseren REST-API.</p>
</div>
<div class="glossary-definitions" style="display:none!important;"></div>
</div>
</div>
<div class="glossary-definitions" style="display:none!important;"></div>
</div>
</div>
<div dir="ltr" class="section accordion sub-topic">
<div class="panel panel-default">
<div class="panel-heading">
<div class="titlepage">
<h2 class="title">
<a data-zd-article="UUID-dcf5bf7e-1b56-6f1c-d7fb-6aef7e9f9158" id="UUID-dcf5bf7e-1b56-6f1c-d7fb-6aef7e9f9158_id_360017436919_id_toc-9"></a>Standard-API (Legacy)</h2>
</div>
</div>
<div class="panel-body collapse" id="UUID-dcf5bf7e-1b56-6f1c-d7fb-6aef7e9f9158_id_360017436919_id_toc-9_body">
<p>Die folgende API Dokumentation bezieht sich NICHT auf die REST-API (siehe oben). Für die Anbindung externer Systeme bietet xentral eine API an, die im Folgenden beschrieben wird.</p>
<div dir="ltr" class="caution" style="margin-left: 0.5in; margin-right: 0.5in;">
<h3 class="title">Achtung</h3>
<p>Ab Version 22.1.x wird die Hash-Authentifizierung nicht mehr unterstützt, daher musst du über die REST-API auf DIGEST Auth umstellen.</p>
</div>
<div dir="ltr" class="section internal sub-topic">
<div class="titlepage">
<h3 class="title">
<a data-zd-article="UUID-dcf5bf7e-1b56-6f1c-d7fb-6aef7e9f9158" id="UUID-dcf5bf7e-1b56-6f1c-d7fb-6aef7e9f9158_id_360017436919_id_toc-10"></a>Funktionsumfang</h3>
</div>
<p>Funktionen der API:</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc;">
<li class="listitem">
<p>Anlegen und Bearbeitung von Adressen</p>
</li>
<li class="listitem">
<p>Anlegen und Bearbeitung von Aufträgen</p>
</li>
<li class="listitem">
<p>Anlegen und Bearbeitung von Benutzern</p>
</li>
<li class="listitem">
<p>Single Sign On / Externes starten und beenden der Session aus einem zentralen Login</p>
</li>
<li class="listitem">
<p>Rückmeldung bei Änderungen in xentral in das Fremdsystem (Event-Handler)</p>
</li>
</ul>
</div>
<div class="glossary-definitions" style="display:none!important;"></div>
</div>
<div dir="ltr" class="section internal sub-topic">
<div class="titlepage">
<h3 class="title">
<a data-zd-article="UUID-dcf5bf7e-1b56-6f1c-d7fb-6aef7e9f9158" id="UUID-dcf5bf7e-1b56-6f1c-d7fb-6aef7e9f9158_id_360017436919_id_toc-11"></a>Abkürzungsverzeichnis</h3>
</div>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc;">
<li class="listitem">
<p>Fremdsystem (z.B. das eigene Webbackend aus einem eigenen Portal)</p>
</li>
<li class="listitem">
<p>xentral (Zentrale Installation von xentral)</p>
</li>
<li class="listitem">
<p>Hash (Authentifizierungs-Token für API)</p>
</li>
<li class="listitem">
<p>Methode (Aufruf der Methode / Ist in URL der Parameter action='Name der Methode bzw. Request')</p>
</li>
</ul>
</div>
<div class="glossary-definitions" style="display:none!important;"></div>
</div>
<div dir="ltr" class="section internal sub-topic">
<div class="titlepage">
<h3 class="title">
<a data-zd-article="UUID-dcf5bf7e-1b56-6f1c-d7fb-6aef7e9f9158" id="UUID-dcf5bf7e-1b56-6f1c-d7fb-6aef7e9f9158_id_360017436919_id_toc-12"></a>Zugriff</h3>
</div>
<p>Um mit der API kommunizieren zu können, wird ein Hash benötigt. Um einen Hash zu erstellen, ist unter Administration → Einstellungen → Grundeinstellungen → API's zu gehen. Der Haken "API aktiviert" muss gesetzt sein. Unter "Initkey" muss eine beliebig lange und aus beliebigen Buchstaben und Zahlen zusammengesetzte Zeichenkette stehen, die keine Satz-, Sonderzeichen oder Umlaute beinhaltet. Unter "Remote Domain" ebenfalls eine beliebige Kennung z.B: die Domain, von der aus die API genutzt wird (www.meinedomain.de). Wichtig ist, dass diese auch auf der anderen Seite im Client Quelltext angegeben ist. Am Ende darf kein / stehen. Außerdem muss der "UTF8 Clean" Haken gesetzt bleiben. Zum Abschluss ist auf die "Speichern"-Schaltfläche zu klicken.</p>
<p>Nach dem Speichern wird bei "Aktueller Key" der Hash erstellt.</p>
<p>Prinzipiell gibt es zwei Möglichkeiten für die Kommunikation</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc;">
<li class="listitem">
<p>Standard Request (Standard POST Request vom Fremdsystem) um z.B. Aufruf einer Methode um einen neuen Auftrag, Adresse oder Benutzer über die API anzulegen bzw. zu bearbeiten</p>
</li>
<li class="listitem">
<p>Event Handler (Standard POST Request von xentral): xentral ruft eine hinterlegte URL auf, wenn ein Auftrag, Adresse, Benutzer o.ä. erstellt oder geändert wird</p>
</li>
</ul>
</div>
<p>Der POST Request wird an die URL</p>
<p>index.php?module=api&amp;action='Request'&amp;hash=XXXXXXXXXXXXXXXX gesendet.</p>
<p>Als POST Variablen müssen immer dabei sein:</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc;">
<li class="listitem">
<p>xml (optional wenn Datenstrukturen notwendig sind)</p>
</li>
</ul>
</div>
<p>In der Variable xml muss das Format wie folgt aussehen:</p>
<pre class="programlisting">      <code class="code">&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;request&gt;
   &lt;status&gt;
      &lt;function&gt;ArtikelCreate&lt;/function&gt;
   &lt;/status&gt;
   &lt;xml&gt;
      &lt;name_de&gt;Saft Bene&lt;/name_de&gt;
      &lt;nummer&gt;1616161&lt;/nummer&gt;
      &lt;einkaufspreise&gt;
         &lt;staffelpreis&gt;
            &lt;ab_menge&gt;1&lt;/ab_menge&gt;
            &lt;preis&gt;728.22&lt;/preis&gt;
            &lt;lieferantennummer&gt;70000&lt;/lieferantennummer&gt;
         &lt;/staffelpreis&gt;
      &lt;/einkaufspreise&gt;
      &lt;verkaufspreise&gt;
         &lt;staffelpreis&gt;
            &lt;ab_menge&gt;1&lt;/ab_menge&gt;
            &lt;preis&gt;718,22&lt;/preis&gt;
         &lt;/staffelpreis&gt;
         &lt;staffelpreis&gt;
            &lt;ab_menge&gt;1&lt;/ab_menge&gt;
            &lt;preis&gt;618,22&lt;/preis&gt;
            &lt;kundennummer&gt;10006&lt;/kundennummer&gt;
            &lt;projekt&gt;VM001&lt;/projekt&gt;
         &lt;/staffelpreis&gt;
      &lt;/verkaufspreise&gt;
   &lt;/xml&gt;
&lt;/request&gt;
&lt;/nowiki&gt;
</code>
    </pre>
<p>Sendet die Methode Request eine Antwort, erfolgt diese als XML Struktur:</p>
<pre class="programlisting">      <code class="code">&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;response&gt;
    &lt;status&gt;
        &lt;action&gt;Aufgerufene Methode&lt;/action&gt;
        &lt;message&gt;Statusnachricht&lt;/message&gt;
        &lt;messageCode&gt;Statuscode (Bei Erfolg: 1, siehe unten)&lt;/messageCode&gt;
    &lt;/status&gt;
    &lt;md5sum&gt;&lt;/md5sum&gt;
    &lt;xml&gt;&lt;/xml&gt;
&lt;/response&gt;
</code>
    </pre>
<div class="glossary-definitions" style="display:none!important;"></div>
</div>
<div dir="ltr" class="section internal sub-topic">
<div class="titlepage">
<h3 class="title">
<a data-zd-article="UUID-dcf5bf7e-1b56-6f1c-d7fb-6aef7e9f9158" id="UUID-dcf5bf7e-1b56-6f1c-d7fb-6aef7e9f9158_id_360017436919_id_toc-13"></a>Statuscodes</h3>
</div>
<p>Folgende Statuscodes sind möglich:</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc;">
<li class="listitem">
<p>1: Erfolg, alles OK (OK)</p>
</li>
<li class="listitem">
<p>2: Hash falsch (Wrong Hash)</p>
</li>
<li class="listitem">
<p>3: Zu wenige GET Parameter (Wrong number of GET parameters)</p>
</li>
<li class="listitem">
<p>4: Falsche XML Daten (Wrong XML data structure for method)</p>
</li>
<li class="listitem">
<p>5: Falscher Schlüssel (id) (Invalid key (id))</p>
</li>
<li class="listitem">
<p>6: Falsche MD5-Summe (Wrong md5sum)</p>
</li>
<li class="listitem">
<p>7: Username existiert bereits (Username exists already)</p>
</li>
<li class="listitem">
<p>8: Daten nicht gefunden (Data not found)</p>
</li>
<li class="listitem">
<p>Sonst: (Unkown message code)</p>
</li>
</ul>
</div>
<div class="glossary-definitions" style="display:none!important;"></div>
</div>
<div dir="ltr" class="section internal sub-topic">
<div class="titlepage">
<h3 class="title">
<a data-zd-article="UUID-dcf5bf7e-1b56-6f1c-d7fb-6aef7e9f9158" id="UUID-dcf5bf7e-1b56-6f1c-d7fb-6aef7e9f9158_id_360017436919_id_toc-14"></a>API Hash für Authentifizierung</h3>
</div>
<p>Für den Zugriff auf die API wird ein Token benötigt. Es wird empfohlen, per https auf die API zuzugreifen.</p>
<pre class="programlisting">      <code class="code">function generateHash()
{
    
    $initKey = 'EXsl4ywgDR5mR3sTGwws9Ikl2ocSKZlvhxoFTv8Au3MaV5UqrEIJORVF5PmFNy';
    $appName = 'NameDerApp';
    $date = gmdate('dmY');
    $hash = "";

    for($i = 0; $i &lt;= 200; $i++) 
        $hash = sha1($hash . $initKey . $appName . $date);
  
    return $hash;
}
</code>
    </pre>
<div class="glossary-definitions" style="display:none!important;"></div>
</div>
<div dir="ltr" class="section internal sub-topic">
<div class="titlepage">
<h3 class="title">
<a data-zd-article="UUID-dcf5bf7e-1b56-6f1c-d7fb-6aef7e9f9158" id="UUID-dcf5bf7e-1b56-6f1c-d7fb-6aef7e9f9158_id_360017436919_id_toc-15"></a>Standard Request an xentral senden</h3>
</div>
<p>Ist das API Modul vorhanden, kann wie folgt darauf zugegriffen werden:</p>
<p>index.php?module=api&amp;action='Request'&amp;hash='Hash'</p>
<p>Per URL wird die Methode bzw. der Request definiert. Optionale Daten werden als POST an die API übertragen.</p>
<p>Zur einfachen Kommunikation können diese Funktionen verwendet werden:</p>
<pre class="programlisting">      <code class="code">function SendRequest($methodname,$xml,$hash)
{
  $url = 'http://server.com/index.php?module=api&amp;action='.$methodname.'&amp;hash='.$hash;
  $data = array('xml' =&gt; $xml, 'md5sum' =&gt; md5($xml));

  // use key 'http' even if you send the request to https://...
  $options = array(
    'http' =&gt; array(
        'header'  =&gt; "Content-type: application/x-www-form-urlencoded\r\n",
        'method'  =&gt; 'POST',
        'content' =&gt; http_build_query($data),
    ),
  );
  $context  = stream_context_create($options);
  $result = file_get_contents($url, false, $context);
  return $result;
}
</code>
    </pre>
<p>Als Antwort für den Request folgt eine XML Nachricht:</p>
<pre class="programlisting">      <code class="code">&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;response&gt;
    &lt;status&gt;
        &lt;action&gt;Aufgerufene Methode&lt;/action&gt;
        &lt;message&gt;Statusnachricht&lt;/message&gt;
        &lt;messageCode&gt;Statuscode&lt;/messageCode&gt;
    &lt;/status&gt;
    &lt;md5sum&gt;&lt;/md5sum&gt;
    &lt;xml&gt;&lt;/xml&gt;
&lt;/response&gt;
</code>
    </pre>
<div class="glossary-definitions" style="display:none!important;"></div>
</div>
<div dir="ltr" class="section internal sub-topic">
<div class="titlepage">
<h3 class="title">
<a data-zd-article="UUID-dcf5bf7e-1b56-6f1c-d7fb-6aef7e9f9158" id="UUID-dcf5bf7e-1b56-6f1c-d7fb-6aef7e9f9158_id_360017436919_id_toc-16"></a>Event Handler Aufruf entgegennehmen</h3>
</div>
<p>Zum Empfang und Auswerten von Events von xentral an das Fremdsystem werden folgende Variablen per POST übertragen.</p>
<p>per URL: ?action=YYYYY&amp;hash=XXXXXXXXX</p>
<pre class="programlisting">      <code class="code">&lt;?php

$action = $_GET['action'];
$hash = $_GET['hash'];
$xml = $_POST['xml'];
$md5sum = $_POST['md5sum'];

?&gt;
</code>
    </pre>
<div class="glossary-definitions" style="display:none!important;"></div>
</div>
<div dir="ltr" class="section internal sub-topic">
<div class="titlepage">
<h3 class="title">
<a data-zd-article="UUID-dcf5bf7e-1b56-6f1c-d7fb-6aef7e9f9158" id="UUID-dcf5bf7e-1b56-6f1c-d7fb-6aef7e9f9158_id_360017436919_id_toc-17"></a>Liste mit Standard Requests</h3>
</div>
<p>Im Folgenden werden die Standard Requests tabellarisch aufgezeigt:</p>
<div class="informaltable table-responsive">
<table border="1" style="border-collapse: collapse; width: 100%; height: 3276px;">
<tbody>
<tr>
<td>
<p>Request (Parameter action)</p>
</td>
<td>
<p>Beschreibung</p>
</td>
<td>
<p>GET Parameter</p>
</td>
<td>
<p>XML Daten</p>
</td>
<td>
<p>XML Rückgabe im Erfolg</p>
</td>
<td>
<p>Beschreibung Rückgabe im Erfolg</p>
</td>
</tr>
<tr>
<td>
<p>AdresseCreate</p>
</td>
<td>
<p>Anlegen einer neuen Adresse</p>
</td>
<td>
<p>-</p>
</td>
<td>
<p>XML Adresse per POST in Feld xml (kundennummer=<code class="code">new</code> wenn eine vergeben werden soll)</p>
</td>
<td>
<p>&lt;id&gt;34&lt;/id&gt;&lt;kundennummer&gt;&lt;/kundennummer&gt;</p>
</td>
<td>
<p>Neue ID der Adresse bzw. Kundennummer</p>
</td>
</tr>
<tr>
<td>
<p>AdresseEdit</p>
</td>
<td>
<p>Änderung einer bestehenden Adresse</p>
</td>
<td>
<p><code class="code">id</code> oder <code class="code">kundennummer</code> und optional <code class="code">projekt</code></p>
</td>
<td>
<p>XML Adresse per POST in Feld xml</p>
</td>
<td>
<p>-</p>
</td>
<td>
<p>-</p>
</td>
</tr>
<tr>
<td>
<p>AdresseGet</p>
</td>
<td>
<p>Abfragen einer bestehenden Adresse</p>
</td>
<td>
<p><code class="code">id</code> oder <code class="code">kundennummer</code> und optional <code class="code">projekt</code>.</p>
</td>
<td>
<p>-</p>
</td>
<td>
<p>XML Adresse</p>
</td>
<td>
<p>Datenstruktur der angefragten Adresse</p>
</td>
</tr>
<tr>
<td>
<p>AuftragCreate</p>
</td>
<td>
<p>Anlegen eines neuen Auftrags</p>
</td>
<td>
<p>-</p>
</td>
<td>
<p>XML Auftrag per POST in Feld xml (belegnr=<code class="code">new</code> wenn eine vergeben werden soll) (<span class="bold"><strong>Hinweis:</strong></span> Feld kundennummer ist ein Pflichtfeld bzw. kann mit dem Wert <code class="code">new</code> ein neuer Datensatz angelegt werden) Daten wie Zahlungsweisen, Versandarten usw. werden aus den Zusatzdaten des Kundenstamm gezogen, sofern diese nicht explizit übergeben werden</p>
</td>
<td>
<p>&lt;id&gt;34&lt;/id&gt;&lt;belegnr&gt;&lt;/belegnr&gt;</p>
</td>
<td>
<p>Neue ID des Auftrags bzw. Belegnummer</p>
</td>
</tr>
<tr>
<td>
<p>AuftragEdit</p>
</td>
<td>
<p>Änderung eines bestehenden Auftrags</p>
</td>
<td>
<p><code class="code">id</code> oder <code class="code">belegnr</code> und optional <code class="code">projekt</code></p>
</td>
<td>
<p>-</p>
</td>
<td>
<p>-</p>
</td>
<td>
<p>-</p>
</td>
</tr>
<tr>
<td>
<p>AuftragGet</p>
</td>
<td>
<p>Abfragen eines bestehenden Auftrags</p>
</td>
<td>
<p><code class="code">id</code> oder <code class="code">belegnr</code> und optional <code class="code">projekt</code></p>
</td>
<td>
<p>-</p>
</td>
<td>
<p>XML Auftrag</p>
</td>
<td>
<p>Datensatz des Auftrags</p>
</td>
</tr>
<tr>
<td>
<p>AuftragAbschliessen</p>
</td>
<td>
<p>Abschluss eines Auftrags</p>
</td>
<td>
<p>-</p>
</td>
<td>
<p>XML per POST, enthält ID des Auftrags</p>
</td>
<td>
<p>XML Antwort Code</p>
</td>
<td>
<p>1-OK, 5-falsche ID oder Auftrag bereits abgeschlossen</p>
</td>
</tr>
<tr>
<td>
<p>WeiterfuehrenAuftragZuRechnung</p>
</td>
<td>
<p>Weiterführung eines Auftrag zur Rechnung</p>
</td>
<td>
<p>-</p>
</td>
<td>
<p>XML per POST, enthält ID des Auftrags</p>
</td>
<td>
<p>XML ID</p>
</td>
<td>
<p>Gibt die ID der erzeugten Rechnung zurück</p>
</td>
</tr>
<tr>
<td>
<p>WeiterfuehrenRechnungZuGutschrift</p>
</td>
<td>
<p>Weiterführen einer Rechnung zur Gutschrift</p>
</td>
<td>
<p>-</p>
</td>
<td>
<p>XML per POST, enthält ID der Rechnung</p>
</td>
<td>
<p>XML ID</p>
</td>
<td>
<p>Gibt die ID der erzeugten Gutschrift zurück</p>
</td>
</tr>
<tr>
<td>
<p>ArtikelCreate</p>
</td>
<td>
<p>Anlegen eines neuen Artikels</p>
</td>
<td>
<p>-</p>
</td>
<td>
<p>XML Artikel</p>
</td>
<td>
<p>-</p>
</td>
<td>
<p>Neue ID des Artikels bzw. Artikelnummer</p>
</td>
</tr>
<tr>
<td>
<p>ArtikelEdit</p>
</td>
<td>
<p>Änderung eines bestehenden Artikels</p>
</td>
<td>
<p><code class="code">id</code> oder <code class="code">nummer</code> und optional <code class="code">projekt</code></p>
</td>
<td>
<p>XML Artikel</p>
</td>
<td>
<p>-</p>
</td>
<td>
<p>-</p>
</td>
</tr>
<tr>
<td>
<p>ArtikelGet</p>
</td>
<td>
<p>Abfragen eines bestehenden Artikels</p>
</td>
<td>
<p><code class="code">id</code> oder <code class="code">kundennummer</code> und optional <code class="code">projekt</code></p>
</td>
<td>
<p>-</p>
</td>
<td>
<p>XML Artikel</p>
</td>
<td>
<p>Datenstruktur des Artikels</p>
</td>
</tr>
<tr>
<td>
<p>BenutzerCreate</p>
</td>
<td>
<p>Anlegen eines neuen Benutzers</p>
</td>
<td>
<p>-</p>
</td>
<td>
<p>-</p>
</td>
<td>
<p>-</p>
</td>
<td>
<p>Neue ID des Benutzers</p>
</td>
</tr>
<tr>
<td>
<p>BenutzerEdit</p>
</td>
<td>
<p>Änderung eines bestehenden Benutzers</p>
</td>
<td>
<p><code class="code">id</code> des Benutzers</p>
</td>
<td>
<p>-</p>
</td>
<td>
<p>-</p>
</td>
<td>
<p>-</p>
</td>
</tr>
<tr>
<td>
<p>BenutzerList</p>
</td>
<td>
<p>Abfragen der Liste von Benutzern</p>
</td>
<td>
<p>-</p>
</td>
<td>
<p>-</p>
</td>
<td>
<p>XML Benutzerliste</p>
</td>
<td>
<p>Vereinfachte Liste von Benutzern</p>
</td>
</tr>
<tr>
<td>
<p>BenutzerGet</p>
</td>
<td>
<p>Abfragen eines bestehenden Benutzers</p>
</td>
<td>
<p><code class="code">id</code> des Benutzers</p>
</td>
<td>
<p>-</p>
</td>
<td>
<p>-</p>
</td>
<td>
<p>Datenstruktur des Benutzers</p>
</td>
</tr>
<tr>
<td>
<p>BenutzerGetRFID</p>
</td>
<td>
<p>Abfragen eines bestehenden Benutzers anhand der RFID</p>
</td>
<td>
<p>-</p>
</td>
<td>
<p>XML <code class="code">rfid</code> des Benutzers</p>
</td>
<td>
<p>XML Benutzer</p>
</td>
<td>
<p>Datenstruktur des Benutzers</p>
</td>
</tr>
<tr>
<td>
<p>AdresseKontaktCreate</p>
</td>
<td>
<p>Anlegen einer weiteren Kontaktmöglichkeit</p>
</td>
<td>
<p>-</p>
</td>
<td>
<p>XML Adresse Kontakt</p>
</td>
<td>
<p>-</p>
</td>
<td>
<p>Neue ID der Kontaktinformation</p>
</td>
</tr>
<tr>
<td>
<p>AdresseKontaktEdit</p>
</td>
<td>
<p>Änderung einer Kontaktmöglichkeit</p>
</td>
<td>
<p><code class="code">id</code> oder <code class="code">kundennummer</code> und optional <code class="code">projekt</code></p>
</td>
<td>
<p>XML Adresse Kontakt</p>
</td>
<td>
<p>-</p>
</td>
<td>
<p>-</p>
</td>
</tr>
<tr>
<td>
<p>AdresseKontaktGet</p>
</td>
<td>
<p>Abfragen einer Kontaktmöglichkeit</p>
</td>
<td>
<p><code class="code">id</code></p>
</td>
<td>
<p>-</p>
</td>
<td>
<p>XML Adresse Kontakt</p>
</td>
<td>
<p>-</p>
</td>
</tr>
<tr>
<td>
<p>GruppeCreate</p>
</td>
<td>
<p>Anlegen einer weiteren Gruppe</p>
</td>
<td>
<p>-</p>
</td>
<td>
<p>-</p>
</td>
<td>
<p>-</p>
</td>
<td>
<p>Neue ID der Gruppe</p>
</td>
</tr>
<tr>
<td>
<p>GruppeEdit</p>
</td>
<td>
<p>Änderung einer bestehenden Gruppe</p>
</td>
<td>
<p><code class="code">id</code> der Gruppe</p>
</td>
<td>
<p>-</p>
</td>
<td>
<p>-</p>
</td>
<td>
<p>-</p>
</td>
</tr>
<tr>
<td>
<p>GruppeGet</p>
</td>
<td>
<p>Abfragen einer bestehenden Gruppe</p>
</td>
<td>
<p><code class="code">id</code> der Gruppe</p>
</td>
<td>
<p>-</p>
</td>
<td>
<p>-</p>
</td>
<td>
<p>Datenstruktur der Gruppe</p>
</td>
</tr>
<tr>
<td>
<p>BelegeList</p>
</td>
<td>
<p>Abfragen bestehender Belege</p>
</td>
<td>
<p>-</p>
</td>
<td>
<p>-</p>
</td>
<td>
<p>XML Belege</p>
</td>
<td>
<p>Datenstruktur von Belegen</p>
</td>
</tr>
<tr>
<td>
<p>PreiseEdit</p>
</td>
<td>
<p>Änderung vieler Preise</p>
</td>
<td>
<p>-</p>
</td>
<td>
<p>-</p>
</td>
<td>
<p>XML Preise</p>
</td>
<td>
<p>-</p>
</td>
</tr>
<tr>
<td>
<p>DateiList</p>
</td>
<td>
<p>Abfragen vorhandener Dateien</p>
</td>
<td>
<p>-</p>
</td>
<td>
<p>-</p>
</td>
<td>
<p>-</p>
</td>
<td>
<p>Datenstruktur von Dateien</p>
</td>
</tr>
<tr>
<td>
<p>ExportVorlageGet</p>
</td>
<td>
<p>Abfragen verschiedener Daten</p>
</td>
<td>
<p><code class="code">id</code> und optional <code class="code">von</code>, <code class="code">bis</code>, <code class="code">projekt</code></p>
</td>
<td>
<p>-</p>
</td>
<td>
<p>XML Daten</p>
</td>
<td>
<p>Datenstruktur der gewählten Exportvorlage</p>
</td>
</tr>
<tr>
<td>
<p>BerichteGet</p>
</td>
<td>
<p>Abfragen von Berichtsdaten</p>
</td>
<td>
<p><code class="code">id</code></p>
</td>
<td>
<p>-</p>
</td>
<td>
<p>XML Bericht</p>
</td>
<td>
<p>Datenstruktur von Berichten</p>
</td>
</tr>
<tr>
<td>
<p>ArtikelList</p>
</td>
<td>
<p>Abfragen von Artikeldaten</p>
</td>
<td>
<p>-</p>
</td>
<td>
<p>XML Daten, mit deren Inhalt gefiltert werden soll</p>
</td>
<td>
<p>XML Artikel</p>
</td>
<td>
<p>Datenstruktur der Artikel</p>
</td>
</tr>
<tr>
<td>
<p>AccountCreate</p>
</td>
<td>
<p>Anlegen eines Accounts innerhalb einer Adresse</p>
</td>
<td>
<p>-</p>
</td>
<td>
<p>XML Daten per POST die für den Account verwendet werden sollen</p>
</td>
<td>
<p>Account ID</p>
</td>
<td>
<p>Gibt bei Erfolg die ID des Accounts innerhalb der Adresse zurück</p>
</td>
</tr>
<tr>
<td>
<p>AccountEdit</p>
</td>
<td>
<p>Bearbeiten eines Accounts innerhalb einer Adresse</p>
</td>
<td>
<p><code class="code">id</code> des Accounts</p>
</td>
<td>
<p>XML Daten per POST die für den Account verwendet werden sollen</p>
</td>
<td>
<p>-</p>
</td>
<td>
<p>-</p>
</td>
</tr>
<tr>
<td>
<p>RechnungAlsBezahltMarkieren</p>
</td>
<td>
<p>Markiert eine Rechnung als bezahlt</p>
</td>
<td>
<p><code class="code">id</code> der Rechnung</p>
</td>
<td>
<p>(Optional) XML/JSON Daten, die die ID der Rechnung enthalten</p>
</td>
<td>
<p>Rechnung ID</p>
</td>
<td>
<p>Gibt die ID der Rechnung zurück, die geändert wurde</p>
</td>
</tr>
<tr>
<td>
<p>AngebotFreigabe</p>
</td>
<td>
<p>Freigabe eines Angebots</p>
</td>
<td>
<p>-</p>
</td>
<td>
<p>XML Daten, die die ID des Anbebotsentwurfs enthalten</p>
</td>
<td>
<p>XML id und belegnr</p>
</td>
<td>
<p>Gibt die ID und die erzeugte Belegnummer zurück.</p>
</td>
</tr>
<tr>
<td>
<p>AuftragFreigabe</p>
</td>
<td>
<p>Freigabe eines Auftrags</p>
</td>
<td>
<p>-</p>
</td>
<td>
<p>XML Daten, die die ID des Auftragsentwurfs enthalten</p>
</td>
<td>
<p>XML id und belegnr</p>
</td>
<td>
<p>Gibt die ID und die erzeugte Belegnummer zurück.</p>
</td>
</tr>
<tr>
<td>
<p>RechnungFreigabe</p>
</td>
<td>
<p>Freigabe einer Rechnung</p>
</td>
<td>
<p>-</p>
</td>
<td>
<p>XML Daten, die die ID des Rechnungsentwurfs enthalten</p>
</td>
<td>
<p>XML id und belegnr</p>
</td>
<td>
<p>Gibt die ID und die erzeugte Belegnummer zurück.</p>
</td>
</tr>
<tr>
<td>
<p>LieferscheinFreigabe</p>
</td>
<td>
<p>Freigabe eines Lieferscheins</p>
</td>
<td>
<p>-</p>
</td>
<td>
<p>XML Daten, die die ID des Lieferscheinentwurfs enthalten</p>
</td>
<td>
<p>XML id und belegnr</p>
</td>
<td>
<p>Gibt die ID und die erzeugte Belegnummer zurück.</p>
</td>
</tr>
<tr>
<td>
<p>BestellungFreigabe</p>
</td>
<td>
<p>Freigabe einer Bestellung</p>
</td>
<td>
<p>-</p>
</td>
<td>
<p>XML Daten, die die ID des Bestellungsentwurfs enthalten</p>
</td>
<td>
<p>XML id und belegnr</p>
</td>
<td>
<p>Gibt die ID und die erzeugte Belegnummer zurück.</p>
</td>
</tr>
<tr>
<td>
<p>GutschriftFreigabe</p>
</td>
<td>
<p>Freigabe einer Gutschrift</p>
</td>
<td>
<p>-</p>
</td>
<td>
<p>XML Daten, die die ID des Gutschriftentwurfs enthalten</p>
</td>
<td>
<p>XML id und belegnr</p>
</td>
<td>
<p>Gibt die ID und die erzeugte Belegnummer zurück.</p>
</td>
</tr>
<tr>
<td>
<p>AngebotVersenden</p>
</td>
<td>
<p>Versendet ein Angebot</p>
</td>
<td>
<p>-</p>
</td>
<td>
<p>XML Daten: ID = id des Angebots, versandart = 'email' oder 'brief', optional: drucker = id des Druckers der verwendet werden soll</p>
</td>
<td>
<p>XML id</p>
</td>
<td>
<p>Gibt die ID des versendeten Angebots zurück</p>
</td>
</tr>
<tr>
<td>
<p>AuftragVersenden</p>
</td>
<td>
<p>Versendet eine Auftragsbestätigung</p>
</td>
<td>
<p>-</p>
</td>
<td>
<p>XML Daten: ID = id des Auftrags, versandart = 'email' oder 'brief', optional: drucker = id des Druckers der verwendet werden soll</p>
</td>
<td>
<p>XML id</p>
</td>
<td>
<p>Gibt die ID des versendeten Auftrags zurück</p>
</td>
</tr>
<tr>
<td>
<p>RechnungVersenden</p>
</td>
<td>
<p>Versendet eine Rechnung</p>
</td>
<td>
<p>-</p>
</td>
<td>
<p>XML Daten: ID = id der Rechnung, versandart = 'email' oder 'brief', optional: drucker = id des Druckers der verwendet werden soll</p>
</td>
<td>
<p>XML id</p>
</td>
<td>
<p>Gibt die ID der versendeten Rechnung zurück</p>
</td>
</tr>
<tr>
<td>
<p>LieferscheinVersenden</p>
</td>
<td>
<p>Versendet einen Lieferschein</p>
</td>
<td>
<p>-</p>
</td>
<td>
<p>XML Daten: ID = id des Lieferscheins, versandart = 'email' oder 'brief', optional: drucker = id des Druckers der verwendet werden soll</p>
</td>
<td>
<p>XML id</p>
</td>
<td>
<p>Gibt die ID des versendeten Lieferscheins zurück</p>
</td>
</tr>
<tr>
<td>
<p>GutschriftVersenden</p>
</td>
<td>
<p>Versendet eine Gutschrift</p>
</td>
<td>
<p>-</p>
</td>
<td>
<p>XML Daten: ID = id der Gutschrift, versandart = 'email' oder 'brief', optional: drucker = id des Druckers der verwendet werden soll</p>
</td>
<td>
<p>XML id</p>
</td>
<td>
<p>Gibt die ID der versendeten Gutschrift zurück</p>
</td>
</tr>
<tr>
<td>
<p>AngebotArchivieren</p>
</td>
<td>
<p>Archiviert ein Angebot</p>
</td>
<td>
<p>-</p>
</td>
<td>
<p>XML Daten: ID = id des Angebots</p>
</td>
<td>
<p>XML id</p>
</td>
<td>
<p>Gibt die ID des archivierten Angebots zurück</p>
</td>
</tr>
<tr>
<td>
<p>AuftragArchivieren</p>
</td>
<td>
<p>Archiviert einen Auftrag</p>
</td>
<td>
<p>-</p>
</td>
<td>
<p>XML Daten: ID = id des Auftrags</p>
</td>
<td>
<p>XML id</p>
</td>
<td>
<p>Gibt die ID des archivierten Auftrags zurück</p>
</td>
</tr>
<tr>
<td>
<p>RechnungArchivieren</p>
</td>
<td>
<p>Archiviert eine Rechnung</p>
</td>
<td>
<p>-</p>
</td>
<td>
<p>XML Daten: ID = id der Rechnung</p>
</td>
<td>
<p>XML id</p>
</td>
<td>
<p>Gibt die ID der archivierten Rechnung zurück</p>
</td>
</tr>
<tr>
<td>
<p>LieferscheinArchivieren</p>
</td>
<td>
<p>Archiviert einen Lieferschein</p>
</td>
<td>
<p>-</p>
</td>
<td>
<p>XML Daten: ID = id des Lieferscheins</p>
</td>
<td>
<p>XML id</p>
</td>
<td>
<p>Gibt die ID des archivierten Lieferscheins zurück</p>
</td>
</tr>
<tr>
<td>
<p>GutschriftArchivieren</p>
</td>
<td>
<p>Archiviert eine Gutschrift</p>
</td>
<td>
<p>-</p>
</td>
<td>
<p>XML Daten: ID = id der Gutschrift</p>
</td>
<td>
<p>XML id</p>
</td>
<td>
<p>Gibt die ID der archivierten Gutschrift zurück</p>
</td>
</tr>
<tr>
<td>
<p>ServerTimeGet</p>
</td>
<td>
<p>Holt die aktuelle Serverzeit ab</p>
</td>
<td>
<p>-</p>
</td>
<td>
<p>-</p>
</td>
<td>
<p>-</p>
</td>
<td>
<p>Serverzeit als Timestamp</p>
</td>
</tr>
<tr>
<td>
<p>StechuhrStatusGet</p>
</td>
<td>
<p>Abfrage Stechuhrstatus eines Mitarbeiters</p>
</td>
<td>
<p>-</p>
</td>
<td>
<p><code class="code">id</code> ID der Stechuhr, <code class="code">adresse</code> ID des Mitarbeiters</p>
</td>
<td>
<p>XML Stechuhrstatus</p>
</td>
<td>
<p>Aktueller Status und Dauer</p>
</td>
</tr>
<tr>
<td>
<p>StechuhrStatusSet</p>
</td>
<td>
<p>Ändert den Stechuhrstaus eines Mitarbeiters</p>
</td>
<td>
<p>-</p>
</td>
<td>
<p><code class="code">cmd</code> neuer Status (mögliche Werte: 'kommen', 'gehen', 'pausestart', 'pausestop'), <code class="code">adresse</code> ID des Mitarbeiters oder <code class="code">user</code> ID des Benutzers</p>
</td>
<td>
<p>-</p>
</td>
<td>
<p>-</p>
</td>
</tr>
<tr>
<td>
<p>StechuhrSummary</p>
</td>
<td>
<p>Abfrage einer Zusammenfassung der Zeiterfassung eines Mitarbeiters</p>
</td>
<td>
<p>-</p>
</td>
<td>
<p><code class="code">adresse</code> ID des Mitarbeiters oder <code class="code">user</code> ID des Benutzers</p>
</td>
<td>
<p>XML Stempelzeiten</p>
</td>
<td>
<p>Zusammenfassung der Stempelzeiten des Mitarbeiters</p>
</td>
</tr>
</tbody>
</table>
</div>
<div class="glossary-definitions" style="display:none!important;"></div>
</div>
<div dir="ltr" class="section internal sub-topic">
<div class="titlepage">
<h3 class="title">
<a data-zd-article="UUID-dcf5bf7e-1b56-6f1c-d7fb-6aef7e9f9158" id="UUID-dcf5bf7e-1b56-6f1c-d7fb-6aef7e9f9158_id_360017436919_id_toc-18"></a>Liste mit Event Handler</h3>
</div>
<p>Bei Änderungen in xentral wird ein Event (Aufruf einer einstellbaren URL) geworfen. Der Event erhält direkt die Informationen für die Änderungen. Z.B. die Daten eines Auftrags, einer Adresse oder eines Benutzers.</p>
<div class="informaltable table-responsive">
<table border="1" style="border-collapse: collapse; width: 100%; height: 362px;">
<tbody>
<tr>
<td>
<p>Request (Parameter action)</p>
</td>
<td>
<p>Beschreibung</p>
</td>
<td>
<p>GET Parameter</p>
</td>
<td>
<p>XML-Daten</p>
</td>
</tr>
<tr>
<td>
<p>EventAdresseCreate</p>
</td>
<td>
<p>Eine neue Adresse wurde angelegt</p>
</td>
<td>
<p>-</p>
</td>
<td>
<p>-</p>
</td>
</tr>
<tr>
<td>
<p>EventAdresseEdit</p>
</td>
<td>
<p>Es gab eine Änderung an einer bestehenden Adresse</p>
</td>
<td>
<p>-</p>
</td>
<td>
<p>-</p>
</td>
</tr>
<tr>
<td>
<p>EventAuftragCreate</p>
</td>
<td>
<p>Ein neuer Auftrag wurde angelegt</p>
</td>
<td>
<p>-</p>
</td>
<td>
<p>-</p>
</td>
</tr>
<tr>
<td>
<p>EventAuftragEdit</p>
</td>
<td>
<p>Es gab eine Änderung eines bestehenden Auftrags</p>
</td>
<td>
<p>-</p>
</td>
<td>
<p>-</p>
</td>
</tr>
<tr>
<td>
<p>EventArtikelCreate</p>
</td>
<td>
<p>Ein neuer Artikel wurde angelegt</p>
</td>
<td>
<p>-</p>
</td>
<td>
<p>-</p>
</td>
</tr>
<tr>
<td>
<p>EventArtikelEdit</p>
</td>
<td>
<p>Es gab eine Änderung an einem bestehenden Artikel</p>
</td>
<td>
<p>-</p>
</td>
<td>
<p>-</p>
</td>
</tr>
<tr>
<td>
<p>EventBenutzerCreate</p>
</td>
<td>
<p>Ein neuer Benutzer wurde angelegt</p>
</td>
<td>
<p>-</p>
</td>
<td>
<p>-</p>
</td>
</tr>
<tr>
<td>
<p>EventBenutzerEdit</p>
</td>
<td>
<p>Es gab eine Änderung an einem bestehenden Benutzer</p>
</td>
<td>
<p>-</p>
</td>
<td>
<p>-</p>
</td>
</tr>
<tr>
<td>
<p>EventSessionClose</p>
</td>
<td>
<p>Wenn Benutzer abmelden geklickt hat (siehe Session Management)</p>
</td>
<td>
<p>-</p>
</td>
<td>
<p>-</p>
</td>
</tr>
</tbody>
</table>
</div>
<div class="informaltable table-responsive">
<table border="1" style="border-collapse: collapse; width: 100%; height: 63px;">
<tbody>
<tr>
<td>
<p>Request (Parameter Action)</p>
</td>
<td>
<p>Beschreibung</p>
</td>
<td>
<p>GET Parameter</p>
</td>
<td>
<p>XML-Daten</p>
</td>
</tr>
<tr>
<td>
<p>SessionStart</p>
</td>
<td>
<p>Session eines Benutzers starten</p>
</td>
<td>
<p>-</p>
</td>
<td>
<p>-</p>
</td>
</tr>
<tr>
<td>
<p>SessionClose</p>
</td>
<td>
<p>Session eines Benutzers beenden</p>
</td>
<td>
<p>-</p>
</td>
<td>
<p>-</p>
</td>
</tr>
</tbody>
</table>
</div>
<div class="informaltable table-responsive">
<table border="1" style="border-collapse: collapse; width: 100%;">
<tbody>
<tr>
<td>
<p>Request (Parameter Action)</p>
</td>
<td>
<p>Beschreibung</p>
</td>
<td>
<p>GET Parameter</p>
</td>
<td>
<p>XML-Daten</p>
</td>
</tr>
<tr>
<td>
<p>EventSessionClose</p>
</td>
<td>
<p>Wenn Benutzer abmelden geklickt hat</p>
</td>
<td>
<p>-</p>
</td>
<td>
<p>-</p>
</td>
</tr>
</tbody>
</table>
</div>
<div class="glossary-definitions" style="display:none!important;"></div>
</div>
<div dir="ltr" class="section internal sub-topic">
<div class="titlepage">
<h3 class="title">
<a data-zd-article="UUID-dcf5bf7e-1b56-6f1c-d7fb-6aef7e9f9158" id="UUID-dcf5bf7e-1b56-6f1c-d7fb-6aef7e9f9158_id_360017436919_id_toc-19"></a>Beschreibung der API Funktionen</h3>
</div>
<div dir="ltr" class="section internal sub-topic">
<div class="titlepage">
<h4 class="title">
<a data-zd-article="UUID-dcf5bf7e-1b56-6f1c-d7fb-6aef7e9f9158" id="UUID-dcf5bf7e-1b56-6f1c-d7fb-6aef7e9f9158_id_360017436919_id_toc-20"></a>Verwalten von Adressen: AdresseCreate, AdresseEdit, AdresseGet</h4>
</div>
<p>Im Prinzip kann jede Spalte der Datenbank aus der Tabelle "adresse" bearbeitet oder abgefragt werden. Hierfür ist die Spaltenbezeichnung der Tabelle anzugeben, wie z.B. . Selbiges gilt beim Anlegen einer Adresse.</p>
<p>Um eine neue Adresse anzulegen, kann die Funktion AdresseCreate verwendet werden. Grundlegende Parameter, die beim Anlegen einer Adresse nicht fehlen sollten, um eine sinnvolle Adresse zu erhalten, sind:</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc;">
<li class="listitem">
<p>&lt;name&gt; Name der Adresse (Falls Adresse eine Firma ist, hier den Namen des Ansprechpartners eintragen)</p>
</li>
<li class="listitem">
<p>&lt;strasse&gt; Die Straße kann auch in Kombination mit der Hausnummer im Tag verwendet werden</p>
</li>
<li class="listitem">
<p>&lt;hausnummer&gt;  Die Hausnummer kann auch in Kombination mit der Straße im Tag &lt;strasse_hausnummer&gt;  verwendet werden</p>
</li>
<li class="listitem">
<p>&lt;plz&gt;  Postleitzahl der Adresse</p>
</li>
<li class="listitem">
<p>&lt;ort&gt; Ort der Adresse</p>
</li>
<li class="listitem">
<p>&lt;email&gt; E-Mail Adresse der Adresse</p>
</li>
<li class="listitem">
<p>&lt;anrede&gt; Anrede, bei einer Firma ist die Anrede "firma"</p>
</li>
<li class="listitem">
<p>&lt;firma&gt; Firmenname. Wenn befüllt ist, wird automatisch auf "firma" gesetzt</p>
</li>
<li class="listitem">
<p>&lt;vorname&gt; Wenn &lt;firma&gt;, &lt;vorname&gt;  und &lt;name&gt; und befüllt sind, wird der Ansprechpartner zusammengesetzt aus &lt;vorname&gt;  und &lt;name&gt;. Ist &lt;vorname&gt; leer, wird nur &lt;name&gt; als Ansprechpartner verwendet. Ist &lt;firma&gt; nicht befüllt, wird &lt;name&gt; zusammengesetzt aus &lt;vorname&gt; und &lt;name&gt;</p>
</li>
<li class="listitem">
<p>&lt;projekt&gt; Abkürzung des Projektes. Ist &lt;projekt&gt; leer, wird das Standardprojekt gewählt</p>
</li>
<li class="listitem">
<p>&lt;kundennummer&gt; Kundennummer der Adresse. Falls eine neue Kundennummer vergeben werden soll, muss NEW eingetragen werden.</p>
</li>
<li class="listitem">
<p>&lt;lieferantennummer&gt; Lieferantennummer der Adresse. Falls eine neue Lieferantennummer vergeben werden soll, muss NEW eingetragen werden.</p>
</li>
</ul>
</div>
<p>Bei einer abweichenden Lieferadresse können folgende Parameter angegeben werden:</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc;">
<li class="listitem">
<p>&lt;liefername&gt; Name der Adresse, zu der geliefert wird. Falls es sich um eine Firma handelt, hier den Namen der Firma</p>
</li>
<li class="listitem">
<p>&lt;liefervorname&gt; Vorname der Adresse, zu der geliefert wird</p>
</li>
<li class="listitem">
<p>&lt;lieferstrasse&gt; Straße, zu der geliefert wird</p>
</li>
<li class="listitem">
<p>&lt;lieferhausnummer&gt; Hausnummer, zu der geliefert wird</p>
</li>
<li class="listitem">
<p>&lt;lieferplz&gt; Postleitzahl der Adresse, zu der geliefert wird</p>
</li>
<li class="listitem">
<p>&lt;lieferort&gt; Ort der Adresse, zu der geliefert wird</p>
</li>
<li class="listitem">
<p>&lt;lieferfirma&gt; Firmenname der zu beliefernden Adresse. Ist dieses Feld befüllt, wird der Adresszusatz zusammengesetzt aus &lt;liefervorname&gt; und &lt;liefername&gt;</p>
</li>
<li class="listitem">
<p>&lt;lieferabteilung&gt; Abteilung der Adresse, zu der geliefert wird</p>
</li>
<li class="listitem">
<p>&lt;lieferland&gt; Land der Adresse, zu der geliefert wird</p>
</li>
</ul>
</div>
<p>Des Weiteren kann man beim Anlegen und Bearbeiten einer Adresse, dieser eine Gruppe zuweisen. Hierfür kann das Tag &lt;verband&gt; mit der id der Gruppe verwendet werden (z.B. &lt;verband&gt;34&lt;/verband&gt;).</p>
<p>Soll eine Adresse bearbeitet (AdresseEdit) oder nur Daten der Adresse abgefragt werden (AdresseGet), muss die ID oder die Kundennummer angegeben werden. Optional kann das Projekt über die URL übergeben werden.</p>
<div dir="ltr" class="section internal sub-topic">
<div class="titlepage">
<h5 class="title">
<a data-zd-article="UUID-dcf5bf7e-1b56-6f1c-d7fb-6aef7e9f9158" id="idm7858"></a>Beispiel Anfrage AdresseCreate mit Funktionen</h5>
</div>
<pre class="programlisting">          <code class="code">&lt;?php
$hash = generateHash();
 
$xml = "&lt;name&gt;Emilia Gruber&lt;/name&gt;
        &lt;strasse&gt;Musterstrasse&lt;/strasse&gt;
        &lt;hausnummer&gt;21&lt;/hausnummer&gt;
        &lt;plz&gt;11111&lt;/plz&gt;
        &lt;ort&gt;Musterort&lt;/ort&gt;
        &lt;email&gt;emiliagruber@musterort.de&lt;/email&gt;
        &lt;kundennummer&gt;NEW&lt;/kundennummer&gt;";
 
$output_xml = SendRequest("AdresseCreate",$xml,$hash); 
 
function generateHash()
{
 
    $initKey = 'neijfj38734hujfie';
    $remoteDomain = 'http://192.168.0.28';
    $date = gmdate('dmY');
    $hash = "";
 
    for($i = 0; $i &lt;= 200; $i++) 
        $hash = sha1($hash . $initKey . $remoteDomain . $date);
 
    return $hash;
}
 
function SendRequest($methodname,$xml,$hash)
{
 
    $url = 'http://192.168.0.28/wawision/16.3/www/index.php?module=api&amp;action='.$methodname.'&amp;hash='.$hash;
 
    $xml = '&lt;?xml version="1.0" encoding="UTF-8"?&gt;
            &lt;request&gt;
                &lt;status&gt;
                    &lt;function&gt;'.$methodname.'&lt;/function&gt;
                &lt;/status&gt;
                &lt;xml&gt;'.$xml.'&lt;/xml&gt;
            &lt;/request&gt;';
 
    $data = array('xml' =&gt; $xml, 'md5sum' =&gt; md5($xml));
 
    // use key 'http' even if you send the request to https://...
    $options = array(
                   'http' =&gt; array(
                   'header'  =&gt; "Content-type: application/x-www-form-urlencoded\r\n",
                   'method'  =&gt; 'POST',
                   'content' =&gt; http_build_query($data),
                   ),
               );
 
    $context  = stream_context_create($options);
    $result = file_get_contents($url, false, $context);
    return $result;
}
 
$obj = simplexml_load_string($output_xml);
echo "&lt;pre&gt;";
print_r($obj);
echo "&lt;/pre&gt;";
 
?&gt;
</code>
        </pre>
<div class="glossary-definitions" style="display:none!important;"></div>
</div>
<div dir="ltr" class="section internal sub-topic">
<div class="titlepage">
<h5 class="title">
<a data-zd-article="UUID-dcf5bf7e-1b56-6f1c-d7fb-6aef7e9f9158" id="UUID-dcf5bf7e-1b56-6f1c-d7fb-6aef7e9f9158_id_360017436919_id_toc-21"></a>Beispiel Antwort AdresseCreate</h5>
</div>
<pre class="programlisting">          <code class="code">  &lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;response&gt;
   &lt;status&gt;
      &lt;action&gt;AdresseCreate&lt;/action&gt;
      &lt;message&gt;OK&lt;/message&gt;
      &lt;messageCode&gt;1&lt;/messageCode&gt;
   &lt;/status&gt;
   &lt;xml&gt;
      &lt;id&gt;13&lt;/id&gt;
      &lt;kundennummer&gt;23243&lt;/kundennummer&gt;
   &lt;/xml&gt;
&lt;/response&gt;
</code>
        </pre>
<div class="glossary-definitions" style="display:none!important;"></div>
</div>
<div dir="ltr" class="section internal sub-topic">
<div class="titlepage">
<h5 class="title">
<a data-zd-article="UUID-dcf5bf7e-1b56-6f1c-d7fb-6aef7e9f9158" id="idm7866"></a>Beispiel Anfrage AdresseEdit mit Funktionen</h5>
</div>
<pre class="programlisting">          <code class="code">&lt;?php
$hash = generateHash();
 
$xml = "&lt;name&gt;Emilia Gruber&lt;/name&gt;
        &lt;strasse&gt;Musterweg&lt;/strasse&gt;
        &lt;hausnummer&gt;67&lt;/hausnummer&gt;
        &lt;plz&gt;22222&lt;/plz&gt;
        &lt;ort&gt;Musterhausen&lt;/ort&gt;
        &lt;email&gt;emiliagruber@musterhausen.de&lt;/email&gt;";

$id = "13";
 
$output_xml = SendRequest("AdresseEdit",$xml,$hash,$id); 
 
function generateHash()
{
 
    $initKey = 'neijfj38734hujfie';
    $remoteDomain = 'http://192.168.0.28';
    $date = gmdate('dmY');
    $hash = "";
 
    for($i = 0; $i &lt;= 200; $i++) 
        $hash = sha1($hash . $initKey . $remoteDomain . $date);
 
    return $hash;
}
 
function SendRequest($methodname,$xml,$hash,$id)
{
 
    $url = 'http://192.168.0.28/wawision/16.3/www/index.php?module=api&amp;action='.$methodname.'&amp;hash='.$hash.'&amp;id='.$id;
 
    $xml = '&lt;?xml version="1.0" encoding="UTF-8"?&gt;
            &lt;request&gt;
                &lt;status&gt;
                    &lt;function&gt;'.$methodname.'&lt;/function&gt;
                &lt;/status&gt;
                &lt;xml&gt;'.$xml.'&lt;/xml&gt;
            &lt;/request&gt;';
 
    $data = array('xml' =&gt; $xml, 'md5sum' =&gt; md5($xml));
 
    // use key 'http' even if you send the request to https://...
    $options = array(
                   'http' =&gt; array(
                   'header'  =&gt; "Content-type: application/x-www-form-urlencoded\r\n",
                   'method'  =&gt; 'POST',
                   'content' =&gt; http_build_query($data),
                   ),
               );
 
    $context  = stream_context_create($options);
    $result = file_get_contents($url, false, $context);
    return $result;
}
 
$obj = simplexml_load_string($output_xml);
echo "&lt;pre&gt;";
print_r($obj);
echo "&lt;/pre&gt;";
 
?&gt;
</code>
        </pre>
<div class="glossary-definitions" style="display:none!important;"></div>
</div>
<div dir="ltr" class="section internal sub-topic">
<div class="titlepage">
<h5 class="title">
<a data-zd-article="UUID-dcf5bf7e-1b56-6f1c-d7fb-6aef7e9f9158" id="UUID-dcf5bf7e-1b56-6f1c-d7fb-6aef7e9f9158_id_360017436919_id_toc-23"></a>Beispiel Antwort AdresseEdit</h5>
</div>
<pre class="programlisting">          <code class="code">  &lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;response&gt;
   &lt;status&gt;
      &lt;action&gt;AdresseEdit&lt;/action&gt;
      &lt;message&gt;OK&lt;/message&gt;
      &lt;messageCode&gt;1&lt;/messageCode&gt;
   &lt;/status&gt;   
&lt;/response&gt;
</code>
        </pre>
<div class="glossary-definitions" style="display:none!important;"></div>
</div>
<div dir="ltr" class="section internal sub-topic">
<div class="titlepage">
<h5 class="title">
<a data-zd-article="UUID-dcf5bf7e-1b56-6f1c-d7fb-6aef7e9f9158" id="UUID-dcf5bf7e-1b56-6f1c-d7fb-6aef7e9f9158_id_360017436919_id_toc-24"></a>Beispiel Anfrage AdresseGet mit Funktionen</h5>
</div>
<pre class="programlisting">          <code class="code">  &lt;?php
$hash = generateHash();

$xml = "";

$id = "12";

$output_xml = SendRequest("AdresseGet",$xml,$hash,$id); 

function generateHash()
{
    
    $initKey = 'neijfj38734hujfie';
    $remoteDomain = 'http://192.168.0.28';
    $date = gmdate('dmY');
    $hash = "";

    for($i = 0; $i &lt;= 200; $i++) 
        $hash = sha1($hash . $initKey . $remoteDomain . $date);
  
    return $hash;
}

function SendRequest($methodname,$xml,$hash,$id)
{

    $url = 'http://192.168.0.28/wawision/16.3/www/index.php?module=api&amp;action='.$methodname.'&amp;hash='.$hash.'&amp;id='.$id;

    $xml = '&lt;?xml version="1.0" encoding="UTF-8"?&gt;
            &lt;request&gt;
                &lt;status&gt;
                    &lt;function&gt;'.$methodname.'&lt;/function&gt;
                &lt;/status&gt;
                &lt;xml&gt;'.$xml.'&lt;/xml&gt;
            &lt;/request&gt;';

    $data = array('xml' =&gt; $xml, 'md5sum' =&gt; md5($xml));

    // use key 'http' even if you send the request to https://...
    $options = array(
                   'http' =&gt; array(
                   'header'  =&gt; "Content-type: application/x-www-form-urlencoded\r\n",
                   'method'  =&gt; 'POST',
                   'content' =&gt; http_build_query($data),
                   ),
               );
  
    $context  = stream_context_create($options);
    $result = file_get_contents($url, false, $context);
    return $result;
}

$obj = simplexml_load_string($output_xml);
echo "&lt;pre&gt;";
print_r($obj);
echo "&lt;/pre&gt;";

?&gt;
</code>
        </pre>
<div class="glossary-definitions" style="display:none!important;"></div>
</div>
<div dir="ltr" class="section internal sub-topic">
<div class="titlepage">
<h5 class="title">
<a data-zd-article="UUID-dcf5bf7e-1b56-6f1c-d7fb-6aef7e9f9158" id="UUID-dcf5bf7e-1b56-6f1c-d7fb-6aef7e9f9158_id_360017436919_id_toc-25"></a>Beispielrückgabe einer Adressabfrage</h5>
</div>
<pre class="programlisting">          <code class="code">&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;response&gt;
   &lt;status&gt;
      &lt;action&gt;AdresseGet&lt;/action&gt;
      &lt;message&gt;OK&lt;/message&gt;
      &lt;messageCode&gt;1&lt;/messageCode&gt;
   &lt;/status&gt;
   &lt;xml&gt;
      &lt;id&gt;37&lt;/id&gt;
      &lt;typ&gt;herr,frau,firma&lt;/typ&gt;
      &lt;marketingsperre /&gt;
      &lt;trackingsperre&gt;1=keine Mail senden, 0=Mail senden&lt;/trackingsperre&gt;
      &lt;rechnungsadresse&gt;0=keine gesonderte, 1 = gesonderte Rechnungsadresse&lt;/rechnungsadresse&gt;
      &lt;sprache&gt;deutsch,englisch&lt;/sprache&gt;
      &lt;name&gt;Max Muster 2&lt;/name&gt;
      &lt;abteilung /&gt;
      &lt;unterabteilung /&gt;
      &lt;ansprechpartner /&gt;
      &lt;land /&gt;
      &lt;strasse&gt;Muster strasse 888&lt;/strasse&gt;
      &lt;ort /&gt;
      &lt;plz /&gt;
      &lt;telefon /&gt;
      &lt;telefax /&gt;
      &lt;mobil /&gt;
      &lt;email /&gt;
      &lt;ustid /&gt;
      &lt;ust_befreit&gt;0&lt;/ust_befreit&gt;
      &lt;passwort_gesendet&gt;0&lt;/passwort_gesendet&gt;
      &lt;sonstiges /&gt;
      &lt;adresszusatz /&gt;
      &lt;kundenfreigabe&gt;0&lt;/kundenfreigabe&gt;
      &lt;steuer /&gt;
      &lt;logdatei&gt;2014-06-01 16:01:08&lt;/logdatei&gt;
      &lt;kundennummer /&gt;
      &lt;lieferantennummer&gt;70002&lt;/lieferantennummer&gt;
      &lt;mitarbeiternummer /&gt;
      &lt;konto /&gt;
      &lt;blz /&gt;
      &lt;bank /&gt;
      &lt;inhaber /&gt;
      &lt;swift /&gt;
      &lt;iban /&gt;
      &lt;waehrung /&gt;
      &lt;paypal /&gt;
      &lt;paypalinhaber /&gt;
      &lt;paypalwaehrung /&gt;
      &lt;projekt&gt;1&lt;/projekt&gt;
      &lt;partner&gt;0&lt;/partner&gt;
      &lt;zahlungsweise /&gt;
      &lt;zahlungszieltage /&gt;
      &lt;zahlungszieltageskonto /&gt;
      &lt;zahlungszielskonto /&gt;
      &lt;versandart /&gt;
      &lt;kundennummerlieferant /&gt;
      &lt;zahlungsweiselieferant /&gt;
      &lt;zahlungszieltagelieferant /&gt;
      &lt;zahlungszieltageskontolieferant /&gt;
      &lt;zahlungszielskontolieferant /&gt;
      &lt;versandartlieferant /&gt;
      &lt;geloescht&gt;0&lt;/geloescht&gt;
      &lt;firma&gt;1&lt;/firma&gt;
      &lt;webid /&gt;
      &lt;internetseite /&gt;
      &lt;vorname /&gt;
      &lt;kalender_aufgaben /&gt;
      &lt;titel /&gt;
      &lt;anschreiben /&gt;
      &lt;logfile /&gt;
      &lt;mlmaktiv /&gt;
      &lt;mlmvertragsbeginn /&gt;
      &lt;geburtstag /&gt;
      &lt;liefersperre /&gt;
      &lt;mlmpositionierung /&gt;
      &lt;steuernummer /&gt;
      &lt;steuerbefreit /&gt;
      &lt;mlmmitmwst /&gt;
      &lt;mlmabrechnung /&gt;
      &lt;sponsor /&gt;
      &lt;geworbenvon /&gt;
      &lt;liefersperregrund /&gt;
      &lt;verrechnungskontoreisekosten&gt;0&lt;/verrechnungskontoreisekosten&gt;
      &lt;rolledatum /&gt;
      &lt;mlmwaehrungauszahlung /&gt;
      &lt;mlmfestsetzen&gt;0&lt;/mlmfestsetzen&gt;
      &lt;mlmmindestpunkte&gt;0&lt;/mlmmindestpunkte&gt;
      &lt;mlmwartekonto&gt;0.00&lt;/mlmwartekonto&gt;
      &lt;abweichende_rechnungsadresse&gt;0&lt;/abweichende_rechnungsadresse&gt;
      &lt;rechnung_vorname /&gt;
      &lt;rechnung_name /&gt;
      &lt;rechnung_titel /&gt;
      &lt;rechnung_typ /&gt;
      &lt;rechnung_strasse /&gt;
      &lt;rechnung_ort /&gt;
      &lt;rechnung_land /&gt;
      &lt;rechnung_abteilung /&gt;
      &lt;rechnung_unterabteilung /&gt;
      &lt;rechnung_adresszusatz /&gt;
      &lt;rechnung_telefon /&gt;
      &lt;rechnung_telefax /&gt;
      &lt;rechnung_anschreiben /&gt;
      &lt;rechnung_email /&gt;
      &lt;rechnung_plz /&gt;
      &lt;rechnung_ansprechpartner /&gt;
      &lt;kennung /&gt;
      &lt;zahlungskonditionen_festschreiben /&gt;
      &lt;rabatte_festschreiben /&gt;
      &lt;rabattinformation /&gt;
      &lt;portofreiab /&gt;
      &lt;portofrei_aktiv /&gt;
      &lt;provision /&gt;
      &lt;porto_preis /&gt;
      &lt;porto_artikelid /&gt;
      &lt;freifeld1 /&gt;
      &lt;freifeld2 /&gt;
      &lt;freifeld3 /&gt;
      &lt;rechnung_periode /&gt;
      &lt;rechnung_anzahlpapier /&gt;
      &lt;rechnung_permail /&gt;
      &lt;rechnung_email /&gt;
  
   &lt;/xml&gt;
&lt;/response&gt;
</code>
        </pre>
<div class="glossary-definitions" style="display:none!important;"></div>
</div>
<div class="glossary-definitions" style="display:none!important;"></div>
</div>
<div class="glossary-definitions" style="display:none!important;"></div>
</div>
<div dir="ltr" class="section internal sub-topic">
<div class="titlepage">
<h3 class="title">
<a data-zd-article="UUID-dcf5bf7e-1b56-6f1c-d7fb-6aef7e9f9158" id="idm7882"></a>Verwalten von Aufträgen: AuftragCreate, AuftragEdit, AuftragGet</h3>
</div>
<p>Hier können Aufträge komplett verwaltet werden, d.h. neue anlegen (AuftragCreate), bestehende bearbeiten (AuftragEdit) oder bestehende abholen (AuftragGet) um diese in einem anderen System übertragen.</p>
<p>Bei AuftragCreate können folgende Parameter angegeben werden:</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc;">
<li class="listitem">
<p>&lt;kundennummer&gt; Hier kann NEW für einen neuen Kunden oder die bisherige Kundennummer eines Kunden verwendet werden.</p>
</li>
</ul>
</div>
<p>Daten wie Zahlungsart, Versandart müssen nicht übergeben werden. Diese werden grundsätzlich aus den Kundenstammdaten geholt, außer diese werden an die API übergeben.</p>
<p>Bei AuftragEdit und AuftragGet muss die id oder orderid (Belegnr) und optional das Projekt als URL übergeben werden. Möchtest du mit AuftragEdit einen Auftrag ändern, in dem schon Positionen enthalten sind, musst du weiterhin alle Positionen des Auftrags komplett mit angeben.</p>
<div dir="ltr" class="section internal sub-topic">
<div class="titlepage">
<h4 class="title">
<a data-zd-article="UUID-dcf5bf7e-1b56-6f1c-d7fb-6aef7e9f9158" id="UUID-dcf5bf7e-1b56-6f1c-d7fb-6aef7e9f9158_id_360017436919_id_toc-27"></a>Beispiel Anfrage AuftragCreate mit Funktionen</h4>
</div>
<pre class="programlisting">        <code class="code">  &lt;?php
$hash = generateHash();

$xml = "&lt;kundennummer&gt;23243&lt;/kundennummer&gt;
&lt;artikelliste&gt;
  &lt;position&gt;
    &lt;nummer&gt;700001&lt;/nummer&gt;
    &lt;preis&gt;9.99&lt;/preis&gt;
    &lt;menge&gt;2&lt;/menge&gt;
    &lt;waehrung&gt;EUR&lt;/waehrung&gt;
   &lt;/position&gt;
  &lt;position&gt;
    &lt;nummer&gt;700002&lt;/nummer&gt;
    &lt;preis&gt;3.99&lt;/preis&gt;
    &lt;menge&gt;1&lt;/menge&gt;
    &lt;waehrung&gt;EUR&lt;/waehrung&gt;
  &lt;/position&gt;
&lt;/artikelliste&gt;";

$output_xml = SendRequest("AuftragCreate",$xml,$hash); 
 
function generateHash()
{
 
    $initKey = 'neijfj38734hujfie';
    $remoteDomain = 'http://192.168.0.28';
    $date = gmdate('dmY');
    $hash = "";
 
    for($i = 0; $i &lt;= 200; $i++) 
        $hash = sha1($hash . $initKey . $remoteDomain . $date);
 
    return $hash;
}
 
function SendRequest($methodname,$xml,$hash)
{
 
    $url = 'http://192.168.0.28/wawision/16.3/www/index.php?module=api&amp;action='.$methodname.'&amp;hash='.$hash;
 
    $xml = '&lt;?xml version="1.0" encoding="UTF-8"?&gt;
            &lt;request&gt;
                &lt;status&gt;
                    &lt;function&gt;'.$methodname.'&lt;/function&gt;
                &lt;/status&gt;
                &lt;xml&gt;'.$xml.'&lt;/xml&gt;
            &lt;/request&gt;';
 
    $data = array('xml' =&gt; $xml, 'md5sum' =&gt; md5($xml));
 
    // use key 'http' even if you send the request to https://...
    $options = array(
                   'http' =&gt; array(
                   'header'  =&gt; "Content-type: application/x-www-form-urlencoded\r\n",
                   'method'  =&gt; 'POST',
                   'content' =&gt; http_build_query($data),
                   ),
               );
 
    $context  = stream_context_create($options);
    $result = file_get_contents($url, false, $context);
    return $result;
}
 
$obj = simplexml_load_string($output_xml);
echo "&lt;pre&gt;";
print_r($obj);
echo "&lt;/pre&gt;";
 
?&gt;
</code>
      </pre>
<div class="glossary-definitions" style="display:none!important;"></div>
</div>
<div dir="ltr" class="section internal sub-topic">
<div class="titlepage">
<h4 class="title">
<a data-zd-article="UUID-dcf5bf7e-1b56-6f1c-d7fb-6aef7e9f9158" id="idm7895"></a>Beispiel Antwort AuftragCreate</h4>
</div>
<pre class="programlisting">        <code class="code"> &lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;response&gt;
   &lt;status&gt;
      &lt;action&gt;AuftragCreate&lt;/action&gt;
      &lt;message&gt;OK&lt;/message&gt;
      &lt;messageCode&gt;1&lt;/messageCode&gt;
   &lt;/status&gt;
   &lt;xml&gt;
      &lt;id&gt;16&lt;/id&gt;
      &lt;customernumber&gt;200003&lt;/customernumber&gt;
   &lt;/xml&gt;
&lt;/response&gt;
</code>
      </pre>
<div class="glossary-definitions" style="display:none!important;"></div>
</div>
<div dir="ltr" class="section internal sub-topic">
<div class="titlepage">
<h4 class="title">
<a data-zd-article="UUID-dcf5bf7e-1b56-6f1c-d7fb-6aef7e9f9158" id="UUID-dcf5bf7e-1b56-6f1c-d7fb-6aef7e9f9158_id_360017436919_id_toc-29"></a>Beispiel Anfrage AuftragGet mit Funktionen</h4>
</div>
<pre class="programlisting">        <code class="code"> &lt;?php

$hash = generateHash();

$xml = "";

$id = "14";

$output_xml = SendRequest("AuftragGet",$xml,$hash,$id); 

function generateHash()
{
    
    $initKey = 'neijfj38734hujfie';
    $remoteDomain = 'http://192.168.0.28';
    $date = gmdate('dmY');
    $hash = "";

    for($i = 0; $i &lt;= 200; $i++) 
        $hash = sha1($hash . $initKey . $remoteDomain . $date);
  
    return $hash;
}

function SendRequest($methodname,$xml,$hash,$id)
{

  $url = 'http://192.168.0.28/wawision/16.3/www/index.php?module=api&amp;action='.$methodname.'&amp;hash='.$hash.'&amp;id='.$id;

$xml = '&lt;?xml version="1.0" encoding="UTF-8"?&gt;
        &lt;request&gt;
           &lt;status&gt;
              &lt;function&gt;'.$methodname.'&lt;/function&gt;
           &lt;/status&gt;
           &lt;xml&gt;'.$xml.'&lt;/xml&gt;
        &lt;/request&gt;';

  $data = array('xml' =&gt; $xml, 'md5sum' =&gt; md5($xml));

  // use key 'http' even if you send the request to https://...
  $options = array(
    'http' =&gt; array(
        'header' =&gt; "Content-type: application/x-www-form-urlencoded\r\n",
        'method' =&gt; 'POST',
        'content' =&gt; http_build_query($data),
    ),
  );
  $context = stream_context_create($options);
  $result = file_get_contents($url, false, $context);
  return $result;
}

$obj = simplexml_load_string($output_xml);
echo "&lt;pre&gt;";
print_r($obj);
echo "&lt;/pre&gt;";

?&gt;
</code>
      </pre>
<div class="glossary-definitions" style="display:none!important;"></div>
</div>
<div dir="ltr" class="section internal sub-topic">
<div class="titlepage">
<h4 class="title">
<a data-zd-article="UUID-dcf5bf7e-1b56-6f1c-d7fb-6aef7e9f9158" id="UUID-dcf5bf7e-1b56-6f1c-d7fb-6aef7e9f9158_id_360017436919_id_toc-30"></a>Beispiel Antwort AuftragGet</h4>
</div>
<pre class="programlisting">        <code class="code">  &lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;response&gt;
    &lt;status&gt;
        &lt;action&gt;AuftragGet&lt;/action&gt;
        &lt;message&gt;OK&lt;/message&gt;
        &lt;messageCode&gt;1&lt;/messageCode&gt;
    &lt;/status&gt;
    &lt;xml&gt;
        &lt;id&gt;14&lt;/id&gt;
        &lt;datum&gt;2017-03-16&lt;/datum&gt;
        &lt;art/&gt;
        &lt;projekt&gt;0&lt;/projekt&gt;
        &lt;belegnr&gt;200002&lt;/belegnr&gt;
        &lt;internet/&gt;
        &lt;bearbeiter&gt;Mitarbeiter&lt;/bearbeiter&gt;
        &lt;angebot/&gt;
        &lt;freitext/&gt;
        &lt;internebemerkung/&gt;
        &lt;status&gt;freigegeben&lt;/status&gt;
        &lt;adresse&gt;11&lt;/adresse&gt;
        &lt;name&gt;Mustersupermarkt&lt;/name&gt;
        &lt;abteilung/&gt;
        &lt;unterabteilung/&gt;
        &lt;strasse&gt;Supermarktstraße 1&lt;/strasse&gt;
        &lt;adresszusatz/&gt;
        &lt;ansprechpartner&gt;Herr Supermarktleiter&lt;/ansprechpartner&gt;
        &lt;plz&gt;12345&lt;/plz&gt;
        &lt;ort&gt;Supermarktstadt&lt;/ort&gt;
        &lt;land&gt;DE&lt;/land&gt;
        &lt;ustid/&gt;
        &lt;ust_befreit&gt;0&lt;/ust_befreit&gt;
        &lt;ust_inner&gt;0&lt;/ust_inner&gt;
        &lt;email/&gt;
        &lt;telefon/&gt;
        &lt;telefax/&gt;
        &lt;betreff/&gt;
        &lt;kundennummer&gt;23241&lt;/kundennummer&gt;
        &lt;versandart&gt;versandunternehmen&lt;/versandart&gt;
        &lt;vertrieb&gt;Testfirma GmbH&lt;/vertrieb&gt;
        &lt;zahlungsweise&gt;rechnung&lt;/zahlungsweise&gt;
        &lt;zahlungszieltage&gt;14&lt;/zahlungszieltage&gt;
        &lt;zahlungszieltageskonto&gt;10&lt;/zahlungszieltageskonto&gt;
        &lt;zahlungszielskonto&gt;2.00&lt;/zahlungszielskonto&gt;
        &lt;bank_inhaber/&gt;
        &lt;bank_institut/&gt;
        &lt;bank_blz/&gt;
        &lt;bank_konto/&gt;
        &lt;kreditkarte_typ/&gt;
        &lt;kreditkarte_inhaber/&gt;
        &lt;kreditkarte_nummer/&gt;
        &lt;kreditkarte_pruefnummer/&gt;
        &lt;kreditkarte_monat/&gt;
        &lt;kreditkarte_jahr/&gt;
        &lt;firma&gt;1&lt;/firma&gt;
        &lt;versendet&gt;0&lt;/versendet&gt;
        &lt;versendet_am&gt;0000-00-00 00:00:00&lt;/versendet_am&gt;
        &lt;versendet_per/&gt;
        &lt;versendet_durch/&gt;
        &lt;autoversand&gt;1&lt;/autoversand&gt;
        &lt;keinporto&gt;0&lt;/keinporto&gt;
        &lt;keinestornomail&gt;0&lt;/keinestornomail&gt;
        &lt;abweichendelieferadresse&gt;0&lt;/abweichendelieferadresse&gt;
        &lt;liefername/&gt;
        &lt;lieferabteilung/&gt;
        &lt;lieferunterabteilung/&gt;
        &lt;lieferland/&gt;
        &lt;lieferstrasse/&gt;
        &lt;lieferort/&gt;
        &lt;lieferplz/&gt;
        &lt;lieferadresszusatz/&gt;
        &lt;lieferansprechpartner/&gt;
        &lt;packstation_inhaber/&gt;
        &lt;packstation_station/&gt;
        &lt;packstation_ident/&gt;
        &lt;packstation_plz/&gt;
        &lt;packstation_ort/&gt;
        &lt;autofreigabe&gt;0&lt;/autofreigabe&gt;
        &lt;freigabe&gt;0&lt;/freigabe&gt;
        &lt;nachbesserung&gt;0&lt;/nachbesserung&gt;
        &lt;gesamtsumme&gt;171.36&lt;/gesamtsumme&gt;
        &lt;inbearbeitung&gt;0&lt;/inbearbeitung&gt;
        &lt;abgeschlossen&gt;0&lt;/abgeschlossen&gt;
        &lt;nachlieferung&gt;0&lt;/nachlieferung&gt;
        &lt;lager_ok&gt;1&lt;/lager_ok&gt;
        &lt;porto_ok&gt;1&lt;/porto_ok&gt;
        &lt;ust_ok&gt;1&lt;/ust_ok&gt;
        &lt;check_ok&gt;1&lt;/check_ok&gt;
        &lt;vorkasse_ok&gt;1&lt;/vorkasse_ok&gt;
        &lt;nachnahme_ok&gt;1&lt;/nachnahme_ok&gt;
        &lt;reserviert_ok&gt;0&lt;/reserviert_ok&gt;
        &lt;partnerid&gt;0&lt;/partnerid&gt;
        &lt;folgebestaetigung&gt;0000-00-00&lt;/folgebestaetigung&gt;
        &lt;zahlungsmail&gt;0000-00-00&lt;/zahlungsmail&gt;
        &lt;stornogrund/&gt;
        &lt;stornosonstiges/&gt;
        &lt;stornorueckzahlung/&gt;
        &lt;stornobetrag&gt;0.00&lt;/stornobetrag&gt;
        &lt;stornobankinhaber/&gt;
        &lt;stornobankkonto/&gt;
        &lt;stornobankblz/&gt;
        &lt;stornobankbank/&gt;
        &lt;stornogutschrift&gt;0&lt;/stornogutschrift&gt;
        &lt;stornogutschriftbeleg/&gt;
        &lt;stornowareerhalten&gt;0&lt;/stornowareerhalten&gt;
        &lt;stornomanuellebearbeitung/&gt;
        &lt;stornokommentar/&gt;
        &lt;stornobezahlt/&gt;
        &lt;stornobezahltam&gt;0000-00-00&lt;/stornobezahltam&gt;
        &lt;stornobezahltvon/&gt;
        &lt;stornoabgeschlossen/&gt;0&lt;/stornoabgeschlossen&gt;
        &lt;stornorueckzahlungper/&gt;
        &lt;stornowareerhaltenretour&gt;0&lt;/stornowareerhaltenretour&gt;
        &lt;partnerausgezahlt&gt;0&lt;/partnerausgezahlt&gt;
        &lt;partnerausgezahltam&gt;0000-00-00&lt;/partnerausgezahltam&gt;
        &lt;kennen/&gt;
        &lt;logdatei&gt;2017-03-17 10:30:05&lt;/logdatei&gt;
        &lt;keinetrackingmail/&gt;
        &lt;zahlungsmailcounter/&gt;
        &lt;rma&gt;0&lt;/rma&gt;
        &lt;transaktionsnummer/&gt;
        &lt;vorabbezahltmarkieren&gt;0&lt;/vorabbezahltmarkieren&gt;
        &lt;deckungsbeitragcalc&gt;1&lt;/deckungsbeitragcalc&gt;
        &lt;deckungsbeitrag&gt;100.00&lt;/deckungsbeitrag&gt;
        &lt;erloes_netto&gt;144.00&lt;/erloes_netto&gt;
        &lt;umsatz_netto&gt;144.00&lt;/umsatz_netto&gt;
        &lt;lieferdatum/&gt;
        &lt;tatsaechlicheslieferdatum/&gt;
        &lt;liefertermin_ok&gt;1&lt;/liefertermin_ok&gt;
        &lt;teillieferung_moeglich&gt;0&lt;/teillieferung_moeglich&gt;
        &lt;kreditlimit_ok&gt;1&lt;/kreditlimit_ok&gt;
        &lt;kreditlimit_freigabe&gt;0&lt;/kreditlimit_freigabe&gt;
        &lt;liefersperre_ok&gt;1&lt;/liefersperre_ok&gt;
        &lt;teillieferungvon&gt;0&lt;/teillieferungvon&gt;
        &lt;teillieferungnummer&gt;0&lt;/teillieferungnummer&gt;
        &lt;vertriebid&gt;0&lt;/vertriebid&gt;
        &lt;aktion/&gt;
        &lt;provision&gt;0.00&lt;/provision&gt;
        &lt;provision_summe/&gt;
        &lt;anfrageid&gt;0&lt;/anfrageid&gt;
        &lt;gruppe&gt;0&lt;/gruppe&gt;
        &lt;shopextid/&gt;
        &lt;shopextstatus/&gt;
        &lt;ihrebestellnummer/&gt;
        &lt;anschreiben/&gt;
        &lt;usereditid&gt;1&lt;/usereditid&gt;
        &lt;useredittimestamp&gt;2017-03-17 10:30:05&lt;/useredittimestamp&gt;
        &lt;realrabatt&gt;0.00&lt;/realrabatt&gt;
        &lt;rabatt&gt;0.00&lt;/rabatt&gt;
        &lt;einzugsdatum/&gt;
        &lt;rabatt1&gt;0.00&lt;/rabatt1&gt;
        &lt;rabatt2&gt;0.00&lt;/rabatt2&gt;
        &lt;rabatt3&gt;0.00&lt;/rabatt3&gt;
        &lt;rabatt4&gt;0.00&lt;/rabatt4&gt;
        &lt;rabatt5&gt;0.00&lt;/rabatt5&gt;
        &lt;shop&gt;0&lt;/shop&gt;
        &lt;steuersatz_normal&gt;19.00&lt;/steuersatz_normal&gt;
        &lt;steuersatz_zwischen&gt;7.00&lt;/steuersatz_zwischen&gt;
        &lt;steuersatz_ermaessigt&gt;7.00&lt;/steuersatz_ermaessigt&gt;
        &lt;steuersatz_starkermaessigt&gt;7.00&lt;/steuersatz_starkermaessigt&gt;
        &lt;steuersatz_dienstleistung&gt;7.00&lt;/steuersatz_dienstleistung&gt;
        &lt;waehrung&gt;EUR&lt;/waehrung&gt;
        &lt;keinsteuersatz/&gt;
        &lt;angebotid/&gt;
        &lt;schreibschutz&gt;0&lt;/schreibschutz&gt;
        &lt;pdfarchiviert&gt;0&lt;/pdfarchiviert&gt;
        &lt;pdfarchiviertversion&gt;0&lt;/pdfarchiviertversion&gt;
        &lt;typ&gt;firma&lt;/typ&gt;
        &lt;ohne_briefpapier&gt;0&lt;/ohne_briefpapier&gt;
        &lt;auftragseingangper/&gt;
        &lt;lieferid&gt;0&lt;/lieferid&gt;
        &lt;ansprechpartnerid&gt;0&lt;/ansprechpartnerid&gt;
        &lt;systemfreitext/&gt;
        &lt;projektfiliale&gt;0&lt;/projektfiliale&gt;
        &lt;lieferungtrotzsperre&gt;0&lt;/lieferungtrotzsperre&gt;
        &lt;zuarchivieren&gt;0&lt;/zuarchivieren&gt;
        &lt;internebezeichnung/&gt;
        &lt;angelegtam/&gt;
        &lt;saldo&gt;-171.36&lt;/saldo&gt;
        &lt;saldogeprueft&gt;2017-03-17 10:29:59&lt;/saldogeprueft&gt;
        &lt;lieferantenauftrag&gt;0&lt;/lieferantenauftrag&gt;
        &lt;lieferant&gt;0&lt;/lieferant&gt;
        &lt;lieferdatumkw&gt;0&lt;/lieferdatumkw&gt;
        &lt;abweichendebezeichnung&gt;0&lt;/abweichendebezeichnung&gt;
        &lt;rabatteportofestschreiben&gt;0&lt;/rabatteportofestschreiben&gt;
        &lt;sprache&gt;deutsch&lt;/sprache&gt;
        &lt;bodyzusatz/&gt;
        &lt;bundesland/&gt;
        &lt;artikelliste&gt;
            &lt;position&gt;
                &lt;id&gt;51&lt;/id&gt;
                &lt;auftrag&gt;14&lt;/auftrag&gt;
                &lt;artikel&gt;385815&lt;/artikel&gt;
                &lt;projekt&gt;0&lt;/projekt&gt;
                &lt;bezeichnung&gt;Kirschjoghurt klein&lt;/bezeichnung&gt;
                &lt;beschreibung&gt;Ein leckerer kleiner Kirschjogurt.&lt;/beschreibung&gt;
                &lt;internerkommentar/&gt;
                &lt;nummer&gt;115491&lt;/nummer&gt;
                &lt;menge&gt;50&lt;/menge&gt;
                &lt;preis&gt;0.30000000&lt;/preis&gt;
                &lt;waehrung&gt;EUR&lt;/waehrung&gt;
                &lt;lieferdatum&gt;0000-00-00&lt;/lieferdatum&gt;
                &lt;vpe&gt;1&lt;/vpe&gt;
                &lt;sort&gt;1&lt;/sort&gt;
                &lt;status&gt;angelegt&lt;/status&gt;
                &lt;umsatzsteuer/&gt;
                &lt;bemerkung/&gt;
                &lt;geliefert&gt;0&lt;/geliefert&gt;
                &lt;geliefert_menge&gt;0&lt;/geliefert_menge&gt;
                &lt;explodiert&gt;0&lt;/explodiert&gt;
                &lt;explodiert_parent&gt;0&lt;/explodiert_parent&gt;
                &lt;logdatei&gt;2017-03-17 10:29:59&lt;/logdatei&gt;
                &lt;punkte&gt;0.00&lt;/punkte&gt;
                &lt;bonuspunkte&gt;0.00&lt;/bonuspunkte&gt;
                &lt;mlmdirektpraemie&gt;0.00&lt;/mlmdirektpraemie&gt;
                &lt;keinrabatterlaubt&gt;0&lt;/keinrabatterlaubt&gt;
                &lt;grundrabatt&gt;0.00&lt;/grundrabatt&gt;
                &lt;rabattsync&gt;1&lt;/rabattsync&gt;
                &lt;rabatt1&gt;0.00&lt;/rabatt1&gt;
                &lt;rabatt2&gt;0.00&lt;/rabatt2&gt;
                &lt;rabatt3&gt;0.00&lt;/rabatt3&gt;
                &lt;rabatt4&gt;0.00&lt;/rabatt4&gt;
                &lt;rabatt5&gt;0.00&lt;/rabatt5&gt;
                &lt;einheit/&gt;
                &lt;webid/&gt;
                &lt;rabatt&gt;0.00&lt;/rabatt&gt;
                &lt;nachbestelltexternereinkauf/&gt;
                &lt;zolltarifnummer/&gt;
                &lt;herkunftsland&gt;DE&lt;/herkunftsland&gt;
                &lt;artikelnummerkunde/&gt;
                &lt;freifeld1/&gt;
                &lt;freifeld2/&gt;
                &lt;freifeld3/&gt;
                &lt;freifeld4/&gt;
                &lt;freifeld5/&gt;
                &lt;freifeld6/&gt;
                &lt;freifeld7/&gt;
                &lt;freifeld8/&gt;
                &lt;freifeld9/&gt;
                &lt;freifeld10/&gt;
                &lt;lieferdatumkw&gt;0&lt;/lieferdatumkw&gt;
                &lt;teilprojekt&gt;0&lt;/teilprojekt&gt;
            &lt;/position&gt;
        &lt;/artikelliste&gt;
    &lt;/xml&gt;
&lt;/response&gt;
</code>
      </pre>
<div class="glossary-definitions" style="display:none!important;"></div>
</div>
<div class="glossary-definitions" style="display:none!important;"></div>
</div>
<div dir="ltr" class="section internal sub-topic">
<div class="titlepage">
<h3 class="title">
<a data-zd-article="UUID-dcf5bf7e-1b56-6f1c-d7fb-6aef7e9f9158" id="idm7907"></a>Verwalten von Artikeln: ArtikelCreate, ArtikelEdit, ArtikelGet</h3>
</div>
<p>Es können mit der API neue Artikel angelegt (ArtikelCreate), Artikel bearbeitet (ArtikelEdit) und Artikelinformationen abgerufen (ArtikelGet) werden. Bei ArtikelGet und ArtikelEdit ist zu beachten, dass die ID des Artikels in der URL über GET mittels &amp;id= mitgegeben werden muss. Beim Anlegen und Bearbeiten der Artikel können alle Tags verwendet werden, die als Spalte in der Tabelle "artikel" vorliegen. Um jedoch sinnvolle Artikel zu erhalten, sollten beim Erstellen einige Tags mindestens gesetzt werden:</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc;">
<li class="listitem">
<p>&lt;name_de&gt; Name des Artikels</p>
</li>
<li class="listitem">
<p>&lt;anabregs_text&gt; Beschreibungstext des Artikels</p>
</li>
<li class="listitem">
<p>&lt;projekt&gt; Abkürzung des Projektes. Falls nicht gesetzt, wird das Standardprojekt gewählt</p>
</li>
<li class="listitem">
<p>&lt;nummer&gt; Artikelnummer des Artikels. Soll eine neue Artikelnummer vergeben werden, muss NEW eingetragen werden</p>
</li>
<li class="listitem">
<p>&lt;aktiv&gt; 1 oder 0, für einen aktiven bzw. inaktiven Artikel</p>
</li>
<li class="listitem">
<p>&lt;variante_von_nummer&gt; Nummer des Artikels, von dem der neue Artikel eine Variante ist</p>
</li>
</ul>
</div>
<div dir="ltr" class="section internal sub-topic">
<div class="titlepage">
<h4 class="title">
<a data-zd-article="UUID-dcf5bf7e-1b56-6f1c-d7fb-6aef7e9f9158" id="idm7923"></a>Beispiel Anfrage ArtikelCreate mit Funktionen</h4>
</div>
<pre class="programlisting">        <code class="code">  &lt;?php

$hash = generateHash();

$xml = "&lt;name_de&gt;Kirschjoghurt&lt;/name_de&gt;
        &lt;anabregs_text&gt;Ein leckerer Kirschjoghurt&lt;/anabregs_text&gt;
        &lt;nummer&gt;NEW&lt;/nummer&gt;
        &lt;aktiv&gt;1&lt;/aktiv&gt;";


$output_xml = SendRequest("ArtikelCreate",$xml,$hash); 

function generateHash()
{
    
    $initKey = 'neijfj38734hujfie';
    $remoteDomain = 'http://192.168.0.28';
    $date = gmdate('dmY');
    $hash = "";

    for($i = 0; $i &lt;= 200; $i++) 
        $hash = sha1($hash . $initKey . $remoteDomain . $date);
  
    return $hash;
}

function SendRequest($methodname,$xml,$hash)
{

  $url = 'http://192.168.0.28/wawision/16.3/www/index.php?module=api&amp;action='.$methodname.'&amp;hash='.$hash;

  $xml = '&lt;?xml version="1.0" encoding="UTF-8"?&gt;
          &lt;request&gt;
            &lt;status&gt;
              &lt;function&gt;'.$methodname.'&lt;/function&gt;
            &lt;/status&gt;
            &lt;xml&gt;'.$xml.'&lt;/xml&gt;
          &lt;/request&gt;';

  $data = array('xml' =&gt; $xml, 'md5sum' =&gt; md5($xml));

  // use key 'http' even if you send the request to https://...
  $options = array(
    'http' =&gt; array(
        'header'  =&gt; "Content-type: application/x-www-form-urlencoded\r\n",
        'method'  =&gt; 'POST',
        'content' =&gt; http_build_query($data),
    ),
  );
  $context  = stream_context_create($options);
  $result = file_get_contents($url, false, $context);
  return $result;
}

$obj = simplexml_load_string($output_xml);
echo "&lt;pre&gt;";
print_r($obj);
echo "&lt;/pre&gt;";

?&gt;
</code>
      </pre>
<div class="glossary-definitions" style="display:none!important;"></div>
</div>
<div dir="ltr" class="section internal sub-topic">
<div class="titlepage">
<h4 class="title">
<a data-zd-article="UUID-dcf5bf7e-1b56-6f1c-d7fb-6aef7e9f9158" id="idm7927"></a>Beispiel Antwort ArtikelCreate</h4>
</div>
<pre class="programlisting">        <code class="code">  &lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;response&gt;
   &lt;status&gt;
      &lt;action&gt;ArtikelCreate&lt;/action&gt;
      &lt;message&gt;OK&lt;/message&gt;
      &lt;messageCode&gt;1&lt;/messageCode&gt;
   &lt;/status&gt;
   &lt;xml&gt;
      &lt;id&gt;149&lt;/id&gt;
      &lt;nummer&gt;115491&lt;/nummer&gt;
   &lt;/xml&gt;
  &lt;/response&gt;
</code>
      </pre>
<div class="glossary-definitions" style="display:none!important;"></div>
</div>
<div dir="ltr" class="section internal sub-topic">
<div class="titlepage">
<h4 class="title">
<a data-zd-article="UUID-dcf5bf7e-1b56-6f1c-d7fb-6aef7e9f9158" id="idm7931"></a>Beispiel Anfrage ArtikelEdit mit Funktionen</h4>
</div>
<pre class="programlisting">        <code class="code">&lt;?php

$hash = generateHash();

$xml = "&lt;nummer&gt;115491&lt;/nummer&gt;
        &lt;name_de&gt;Kirschjoghurt klein&lt;/name_de&gt;
        &lt;anabregs_text&gt;Ein leckerer kleiner Kirschjogurt.&lt;/anabregs_text&gt;
        ";

$id = "149";


$output_xml = SendRequest("ArtikelEdit",$xml,$hash,$id); 

function generateHash()
{
    
    $initKey = 'neijfj38734hujfie';
    $remoteDomain = 'http://192.168.0.28';
    $date = gmdate('dmY');
    $hash = "";

    for($i = 0; $i &lt;= 200; $i++) 
        $hash = sha1($hash . $initKey . $remoteDomain . $date);
  
    return $hash;
}

function SendRequest($methodname,$xml,$hash,$id)
{

  $url = 'http://192.168.0.28/wawision/16.3/www/index.php?module=api&amp;action='.$methodname.'&amp;hash='.$hash.'&amp;id='.$id;

$xml = '&lt;?xml version="1.0" encoding="UTF-8"?&gt;
        &lt;request&gt;
           &lt;status&gt;
              &lt;function&gt;'.$methodname.'&lt;/function&gt;
           &lt;/status&gt;
           &lt;xml&gt;'.$xml.'&lt;/xml&gt;
        &lt;/request&gt;';

  $data = array('xml' =&gt; $xml, 'md5sum' =&gt; md5($xml));

  // use key 'http' even if you send the request to https://...
  $options = array(
    'http' =&gt; array(
        'header'  =&gt; "Content-type: application/x-www-form-urlencoded\r\n",
        'method'  =&gt; 'POST',
        'content' =&gt; http_build_query($data),
    ),
  );
  $context  = stream_context_create($options);
  $result = file_get_contents($url, false, $context);
  return $result;
}

$obj = simplexml_load_string($output_xml);
echo "&lt;pre&gt;";
print_r($obj);
echo "&lt;/pre&gt;";

?&gt;
</code>
      </pre>
<div class="glossary-definitions" style="display:none!important;"></div>
</div>
<div dir="ltr" class="section internal sub-topic">
<div class="titlepage">
<h4 class="title">
<a data-zd-article="UUID-dcf5bf7e-1b56-6f1c-d7fb-6aef7e9f9158" id="idm7935"></a>Beispiel Antwort ArtikelEdit</h4>
</div>
<pre class="programlisting">        <code class="code">&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;response&gt;
   &lt;status&gt;
      &lt;action&gt;ArtikelEdit&lt;/action&gt;
      &lt;message&gt;OK&lt;/message&gt;
      &lt;messageCode&gt;1&lt;/messageCode&gt;
   &lt;/status&gt;
&lt;/response&gt;</code>
      </pre>
<div class="glossary-definitions" style="display:none!important;"></div>
</div>
<div dir="ltr" class="section internal sub-topic">
<div class="titlepage">
<h4 class="title">
<a data-zd-article="UUID-dcf5bf7e-1b56-6f1c-d7fb-6aef7e9f9158" id="idm7939"></a>Beispiel Lagerbestandsveränderung mit ArtikelEdit</h4>
</div>
<pre class="programlisting">        <code class="code">&lt;xml&gt;
    &lt;nummer&gt;1000001&lt;/nummer&gt;
    &lt;lager_platz&gt;HL001B&lt;/lager_platz&gt;
    &lt;lager_menge&gt;5020&lt;/lager_menge&gt;
&lt;/xml&gt;</code>
      </pre>
<div class="glossary-definitions" style="display:none!important;"></div>
</div>
<div dir="ltr" class="section internal sub-topic">
<div class="titlepage">
<h4 class="title">
<a data-zd-article="UUID-dcf5bf7e-1b56-6f1c-d7fb-6aef7e9f9158" id="idm7943"></a>Beispiel Anfrage ArtikelGet mit Funktionen</h4>
</div>
<pre class="programlisting">        <code class="code">&lt;?php

$hash = generateHash();

$xml = "";
$id = 149;

$output_xml = SendRequest("ArtikelGet",$xml,$hash,$id); 

function generateHash()
{
    
    $initKey = 'neijfj38734hujfie';
    $remoteDomain = 'http://192.168.0.28';
    $date = gmdate('dmY');
    $hash = "";

    for($i = 0; $i &lt;= 200; $i++) 
        $hash = sha1($hash . $initKey . $remoteDomain . $date);
  
    return $hash;
}

function SendRequest($methodname,$xml,$hash,$id)
{

  $url = 'http://192.168.0.28/wawision/16.3/www/index.php?module=api&amp;action='.$methodname.'&amp;hash='.$hash.'&amp;id='.$id;

  $xml = '&lt;?xml version="1.0" encoding="UTF-8"?&gt;
            &lt;request&gt;
              &lt;status&gt;
                &lt;function&gt;'.$methodname.'&lt;/function&gt;
              &lt;/status&gt;
              &lt;xml&gt;'.$xml.'&lt;/xml&gt;
            &lt;/request&gt;';

  $data = array('xml' =&gt; $xml, 'md5sum' =&gt; md5($xml));

  // use key 'http' even if you send the request to https://...
  $options = array(
    'http' =&gt; array(
    'header'  =&gt; "Content-type: application/x-www-form-urlencoded\r\n",
    'method'  =&gt; 'POST',
    'content' =&gt; http_build_query($data),
    ),
  );
  $context  = stream_context_create($options);
  $result = file_get_contents($url, false, $context);
  return $result;
}

$obj = simplexml_load_string($output_xml);
echo "&lt;pre&gt;";
print_r($obj);

?&gt;
</code>
      </pre>
<div class="glossary-definitions" style="display:none!important;"></div>
</div>
<div dir="ltr" class="section internal sub-topic">
<div class="titlepage">
<h4 class="title">
<a data-zd-article="UUID-dcf5bf7e-1b56-6f1c-d7fb-6aef7e9f9158" id="UUID-dcf5bf7e-1b56-6f1c-d7fb-6aef7e9f9158_id_360017436919_id_h_01F0E1VS13GDK8A4AKKX974WQM"></a>Beispiel Antwort ArtikelGet</h4>
</div>
<pre class="programlisting">        <code class="code">&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;response&gt;
   &lt;status&gt;
      &lt;action&gt;ArtikelGet&lt;/action&gt;
      &lt;message&gt;OK&lt;/message&gt;
      &lt;messageCode&gt;1&lt;/messageCode&gt;
   &lt;/status&gt;
   &lt;xml&gt;
      &lt;id&gt;385815&lt;/id&gt;
      &lt;typ/&gt;
      &lt;nummer&gt;115491&lt;/nummer&gt;
      &lt;checksum/&gt;
      &lt;projekt&gt;0&lt;/projekt&gt;
      &lt;inaktiv&gt;0&lt;/inaktiv&gt;
      &lt;ausverkauft&gt;0&lt;/ausverkauft&gt;
      &lt;warengruppe/&gt;
      &lt;name_de&gt;Kirschjoghurt klein&lt;/name_de&gt;
      &lt;name_en/&gt;
      &lt;kurztext_de/&gt;
      &lt;kurztext_en/&gt;
      &lt;beschreibung_de/&gt;
      &lt;beschreibung_en/&gt;
      &lt;uebersicht_de/&gt;
      &lt;uebersicht_en/&gt;
      &lt;links_de/&gt;
      &lt;links_en/&gt;
      &lt;startseite_de/&gt;
      &lt;startseite_en/&gt;
      &lt;standardbild/&gt;
      &lt;herstellerlink/&gt;
      &lt;hersteller/&gt;
      &lt;teilbar/&gt;
      &lt;nteile/&gt;
      &lt;seriennummern/&gt;
      &lt;lager_platz/&gt;
      &lt;lieferzeit/&gt;
      &lt;lieferzeitmanuell/&gt;
      &lt;sonstiges/&gt;
      &lt;gewicht/&gt;
      &lt;endmontage/&gt;
      &lt;funktionstest/&gt;
      &lt;artikelcheckliste/&gt;
      &lt;stueckliste/&gt;
      &lt;juststueckliste/&gt;
      &lt;barcode/&gt;
      &lt;hinzugefuegt/&gt;
      &lt;pcbdecal/&gt;
      &lt;lagerartikel&gt;0&lt;/lagerartikel&gt;
      &lt;porto&gt;0&lt;/porto&gt;
      &lt;chargenverwaltung&gt;0&lt;/chargenverwaltung&gt;
      &lt;provisionsartikel&gt;0&lt;/provisionsartikel&gt;
      &lt;gesperrt&gt;0&lt;/gesperrt&gt;
      &lt;sperrgrund/&gt;
      &lt;geloescht&gt;0&lt;/geloescht&gt;
      &lt;gueltigbis&gt;0000-00-00&lt;/gueltigbis&gt;
      &lt;umsatzsteuer/&gt;
      &lt;klasse/&gt;
      &lt;adresse&gt;0&lt;/artikel&gt;
      &lt;shopartikel&gt;0&lt;/shopartikel&gt;
      &lt;unishopartikel&gt;0&lt;/unishopartikel&gt;
      &lt;journalshopartikel&gt;0&lt;/journalshopartikel&gt;
      &lt;shop&gt;0&lt;/shop&gt;
      &lt;katalog&gt;0&lt;/katalog&gt;
      &lt;katalogtext_de/&gt;
      &lt;katalogtext_en/&gt;
      &lt;katalogbezeichnung_de/&gt;
      &lt;katalogbezeichnung_en/&gt;
      &lt;neu&gt;0&lt;/neu&gt;
      &lt;topseller&gt;0&lt;/topseller&gt;
      &lt;startseite&gt;0&lt;/startseite&gt;
      &lt;wichtig&gt;0&lt;/wichtig&gt;
      &lt;mindestlager&gt;0&lt;/mindestlager&gt;
      &lt;mindestbestellung&gt;0&lt;/mindestbestellung&gt;
      &lt;partnerprogramm_sperre&gt;0&lt;/partnerprogramm_sperre&gt;
      &lt;internerkommentar/&gt;
      &lt;intern_gesperrt&gt;0&lt;/intern_gesperrt&gt;
      &lt;intern_gesperrtuser&gt;0&lt;/intern_gesperrtuser&gt;
      &lt;intern_gesperrtgrund/&gt;
      &lt;inbearbeitung&gt;0&lt;/inbearbeitung&gt;
      &lt;inbearbeitunguser&gt;0&lt;/inbearbeitunguser&gt;
      &lt;cache_lagerplatzinhaltmenge&gt;-999&lt;/cache_lagerplatzinhaltmenge&gt;
      &lt;internkommentar/&gt;
      &lt;firma&gt;1&lt;/firma&gt;
      &lt;logdatei&gt;2017-03-24 06:53:10&lt;/logdatei&gt;
      &lt;anabregs_text&gt;Ein leckerer kleiner Kirschjogurt.&lt;/anabregs_text&gt;
      &lt;autobestellung&gt;0&lt;/autobestellung&gt;
      &lt;produktion/&gt;
      &lt;herstellernummer/&gt;
      &lt;restmenge/&gt;
      &lt;mlmdirektpraemie/&gt;
      &lt;keineeinzelartikelanzeigen&gt;0&lt;/keineeinzelartikelanzeigen&gt;
      &lt;mindesthaltbarkeitsdatum&gt;0&lt;/mindesthaltbarkeitsdatum&gt;
      &lt;letzteseriennummer/&gt;
      &lt;individualartikel&gt;0&lt;/individualartikel&gt;
      &lt;keinrabatterlaubt/&gt;
      &lt;rabatt&gt;0&lt;/rabatt&gt;
      &lt;rabatt_prozent/&gt;
      &lt;geraet&gt;0&lt;/geraet&gt;
      &lt;serviceartikel&gt;0&lt;/serviceartikel&gt;
      &lt;autoabgleicherlaubt&gt;0&lt;/autoabgleicherlaubt&gt;
      &lt;pseudopreis/&gt;
      &lt;freigabenotwendig&gt;0&lt;/freigabenotwendig&gt;
      &lt;freigaberegel/&gt;
      &lt;nachbestellt/&gt;
      &lt;ean/&gt;
      &lt;mlmpunkte&gt;0.00&lt;/mlmpunkte&gt;
      &lt;mlmbonuspunkte&gt;0.00&lt;/mlmbonuspunkte&gt;
      &lt;mlmkeinepunkteeigenkauf/&gt;
      &lt;shop2/&gt;
      &lt;shop3/&gt;
      &lt;usereditid&gt;1&lt;/usereditid&gt;
      &lt;useredittimestamp&gt;2017-03-24 06:53:10&lt;/useredittimestamp&gt;
      &lt;freifeld1/&gt;
      &lt;freifeld2/&gt;
      &lt;freifeld3/&gt;
      &lt;freifeld4/&gt;
      &lt;freifeld5/&gt;
      &lt;freifeld6/&gt;
      &lt;einheit/&gt;
      &lt;webid/&gt;
      &lt;lieferzeitmanuell_en/&gt;
      &lt;variante/&gt;
      &lt;variante_von/&gt;
      &lt;produktioninfo/&gt;
      &lt;sonderaktion/&gt;
      &lt;sonderaktion_en/&gt;
      &lt;autolagerlampe&gt;0&lt;/autolagerlampe&gt;
      &lt;leerfeld/&gt;
      &lt;zolltarifnummer/&gt;
      &lt;herkunftsland&gt;DE&lt;/herkunftsland&gt;
      &lt;laenge&gt;0.00&lt;/laenge&gt;
      &lt;breite&gt;0.00&lt;/breite&gt;
      &lt;hoehe&gt;0.00&lt;/hoehe&gt;
      &lt;gebuehr&gt;0&lt;/gebuehr&gt;
      &lt;pseudolager/&gt;
      &lt;matrixprodukt&gt;0&lt;/matrixprodukt&gt;
      &lt;anabregs_text_en&gt;
      &lt;externeproduktion&gt;0&lt;/externeproduktion&gt;
      &lt;bildvorschau/&gt;
      &lt;inventursperre&gt;0&lt;/inventursperre&gt;
      &lt;variante_kopie&gt;0&lt;/variante_kopie&gt;
      &lt;unikat&gt;0&lt;/unikat&gt;
      &lt;downloadartikel&gt;0&lt;/downloadartikel&gt;
      &lt;generierenummerbeioption&gt;0&lt;/generierenummerbeioption&gt;
      &lt;allelieferanten&gt;0&lt;/allelieferanten&gt;
      &lt;tagespreise&gt;0&lt;/tagespreise&gt;
      &lt;rohstoffe&gt;0&lt;/rohstoffe&gt;
      &lt;steuer_erloese_inland_normal/&gt;
      &lt;steuer_aufwendung_inland_normal/&gt;
      &lt;steuer_erloese_inland_ermaessigt/&gt;
      &lt;steuer_aufwendung_inland_ermaessigt/&gt;
      &lt;steuer_erloese_inland_steuerfrei/&gt;
      &lt;steuer_aufwendung_inland_steuerfrei/&gt;
      &lt;steuer_erloese_inland_innergemeinschaftlich/&gt;
      &lt;steuer_aufwendung_inland_innergemeinschaftlich/&gt;
      &lt;steuer_erloese_inland_eunormal/&gt;
      &lt;steuer_erloese_inland_nichtsteuerbar/&gt;
      &lt;steuer_erloese_inland_euermaessigt/&gt;
      &lt;steuer_aufwendung_inland_nichtsteuerbar/&gt;
      &lt;steuer_aufwendung_inland_eunormal/&gt;
      &lt;steuer_aufwendung_inland_euermaessigt/&gt;
      &lt;steuer_erloese_inland_export/&gt;
      &lt;steuer_aufwendung_inland_import/&gt;
      &lt;steuer_art_produkt&gt;1&lt;/steuer_art_produkt&gt;
      &lt;steuer_art_produkt_download&gt;1&lt;/steuer_art_produkt_download&gt;
      &lt;metadescription_de/&gt;
      &lt;metadescription_en/&gt;
      &lt;metakeywords_de/&gt;
      &lt;metakeywords_en/&gt;
      &lt;vkmeldungunterdruecken&gt;0&lt;/vkmeldungunterdruecken&gt;
      &lt;freifeld7/&gt;
      &lt;freifeld8/&gt;
      &lt;freifeld9/&gt;
      &lt;freifeld10/&gt;
      &lt;ursprungsregion/&gt;
      &lt;altersfreigabe/&gt;
      &lt;provisionssperre/&gt;
      &lt;inventurekaktiv&gt;0&lt;/inventureaktiv&gt;
      &lt;inventurek/&gt;
      &lt;verkaufspreise&gt;
         &lt;staffelpreis&gt;
            &lt;ab_menge&gt;1&lt;/ab_menge&gt;
            &lt;preis&gt;0.30000000&lt;/preis&gt;
            &lt;vpe/&gt;
            &lt;waehrung&gt;EUR&lt;/waehrung&gt;
         &lt;/staffelpreis&gt;
      &lt;/verkaufspreise&gt;
   &lt;/xml&gt;
&lt;/response&gt;
</code>
      </pre>
<div class="glossary-definitions" style="display:none!important;"></div>
</div>
<div class="glossary-definitions" style="display:none!important;"></div>
</div>
<div dir="ltr" class="section internal sub-topic">
<div class="titlepage">
<h3 class="title">
<a data-zd-article="UUID-dcf5bf7e-1b56-6f1c-d7fb-6aef7e9f9158" id="idm7951"></a>Verwalten von Benutzer: BenutzerCreate, BenutzerEdit, BenutzerGet</h3>
</div>
<p>Mit BenutzerCreate kann ein neuer Benutzer angelegt werden. Soll ein Benutzer bearbeitet werden, geschieht dies mit BenutzerEdit. BenutzerGet liefert Informationen eines Benutzers zurück. Bei BenutzerEdit und BenutzerGet muss die ID des Benutzers als GET Parameter übergeben werden.</p>
<p>Beim Anlegen bzw. Bearbeiten eines Benutzers sind einige Dinge zu beachten:</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc;">
<li class="listitem">
<p>&lt;active&gt; Muss auf 1 gesetzt sein, da sich sonst der Benutzer nicht anmelden kann</p>
</li>
<li class="listitem">
<p>&lt;startseite&gt; Die URL der Startseite (z.B. index.php?module=welcome&amp;action=pinwand) muss base54 kodiert sein</p>
</li>
<li class="listitem">
<p>&lt;passwordmd5&gt; Das Passwort des Benutzers muss hier md5 kodiert angegeben werden, nicht &lt;password&gt;. &lt;password&gt; stammt aus älteren Versionen, wird nicht mehr verwendet und dient nur noch historischen Zwecken</p>
</li>
</ul>
</div>
<p>Tags, um einen Benutzer anzulegen oder zu bearbeiten:</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc;">
<li class="listitem">
<p>&lt;adresse&gt; Beinhaltet die ID der Adresse</p>
</li>
<li class="listitem">
<p>&lt;username&gt; Darf nicht bereits existieren</p>
</li>
<li class="listitem">
<p>&lt;type&gt; Art des Benutzers, z.B. admin oder standard</p>
</li>
<li class="listitem">
<p>&lt;aktiv&gt; Auf 1 setzen</p>
</li>
<li class="listitem">
<p>&lt;startseite&gt; Muss base54 kodiert sein</p>
</li>
<li class="listitem">
<p>&lt;passwordmd5&gt; Muss md5 kodiert sein</p>
</li>
</ul>
</div>
<div dir="ltr" class="section internal sub-topic">
<div class="titlepage">
<h4 class="title">
<a data-zd-article="UUID-dcf5bf7e-1b56-6f1c-d7fb-6aef7e9f9158" id="idm7976"></a>Beispiel Anfrage BenutzerCreate mit Funktionen</h4>
</div>
<pre class="programlisting">        <code class="code">&lt;?php
$hash = generateHash();

$xml = "&lt;adresse&gt;12&lt;/adresse&gt;
        &lt;username&gt;Musterbenutzer&lt;/username&gt;
        &lt;type&gt;admin&lt;/type&gt;
        &lt;activ&gt;1&lt;/activ&gt;
        &lt;passwordmd5&gt;e22a63fb76874c99488435f26b117e37&lt;/passwordmd5&gt;
        &lt;externlogin&gt;1&lt;/externlogin&gt;";


$output_xml = SendRequest("BenutzerCreate",$xml,$hash); 
 
function generateHash()
{
 
    $initKey = 'neijfj38734hujfie';
    $remoteDomain = 'http://192.168.0.28';
    $date = gmdate('dmY');
    $hash = "";
 
    for($i = 0; $i &lt;= 200; $i++) 
        $hash = sha1($hash . $initKey . $remoteDomain . $date);
 
    return $hash;
}
 
function SendRequest($methodname,$xml,$hash)
{
 
    $url = 'http://192.168.0.28/wawision/16.3/www/index.php?module=api&amp;action='.$methodname.'&amp;hash='.$hash;
 
    $xml = '&lt;?xml version="1.0" encoding="UTF-8"?&gt;
            &lt;request&gt;
                &lt;status&gt;
                    &lt;function&gt;'.$methodname.'&lt;/function&gt;
                &lt;/status&gt;
                &lt;xml&gt;'.$xml.'&lt;/xml&gt;
            &lt;/request&gt;';
 
    $data = array('xml' =&gt; $xml, 'md5sum' =&gt; md5($xml));
 
    // use key 'http' even if you send the request to https://...
    $options = array(
                   'http' =&gt; array(
                   'header'  =&gt; "Content-type: application/x-www-form-urlencoded\r\n",
                   'method'  =&gt; 'POST',
                   'content' =&gt; http_build_query($data),
                   ),
               );
 
    $context  = stream_context_create($options);
    $result = file_get_contents($url, false, $context);
    return $result;
}
 
$obj = simplexml_load_string($output_xml);
echo "&lt;pre&gt;";
print_r($obj);
echo "&lt;/pre&gt;";
 
?&gt;
Beispiel Antwort BenutzerCreate
&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;response&gt;
   &lt;status&gt;
      &lt;action&gt;BenutzerCreate&lt;/action&gt;
      &lt;message&gt;OK&lt;/message&gt;
      &lt;messageCode&gt;1&lt;/messageCode&gt;
   &lt;/status&gt;
   &lt;xml&gt;
       &lt;id&gt;10&lt;/id&gt;
   &lt;/xml&gt;
&lt;/response&gt;
</code>
      </pre>
<div class="glossary-definitions" style="display:none!important;"></div>
</div>
<div dir="ltr" class="section internal sub-topic">
<div class="titlepage">
<h4 class="title">
<a data-zd-article="UUID-dcf5bf7e-1b56-6f1c-d7fb-6aef7e9f9158" id="UUID-dcf5bf7e-1b56-6f1c-d7fb-6aef7e9f9158_id_360017436919_id_h_01F1CJ5Z2C8NSC0RWTWWTVEFK7"></a>Beispiel Antwort BenutzerCreate</h4>
</div>
<pre class="programlisting">        <code class="code">&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;response&gt;
   &lt;status&gt;
      &lt;action&gt;BenutzerCreate&lt;/action&gt;
      &lt;message&gt;OK&lt;/message&gt;
      &lt;messageCode&gt;1&lt;/messageCode&gt;
   &lt;/status&gt;
   &lt;xml&gt;
       &lt;id&gt;10&lt;/id&gt;
   &lt;/xml&gt;
&lt;/response&gt;</code>
      </pre>
<p>Beispiel Anfrage BenutzerEdit mit Funktionen</p>
<pre class="programlisting">        <code class="code">&lt;?php
$hash = generateHash();

$xml = "&lt;type&gt;standard&lt;/type&gt;
        &lt;activ&gt;1&lt;/activ&gt;
        &lt;passwordmd5&gt;dafe3d37f46376f08f8e92b15e308239&lt;/passwordmd5&gt;
        &lt;externlogin&gt;0&lt;/externlogin&gt;";

$id = 10;


$output_xml = SendRequest("BenutzerEdit",$xml,$hash,$id); 
 
function generateHash()
{
 
    $initKey = 'neijfj38734hujfie';
    $remoteDomain = 'http://192.168.0.28';
    $date = gmdate('dmY');
    $hash = "";
 
    for($i = 0; $i &lt;= 200; $i++) 
        $hash = sha1($hash . $initKey . $remoteDomain . $date);
 
    return $hash;
}
 
function SendRequest($methodname,$xml,$hash,$id)
{
 
    $url = 'http://192.168.0.28/wawision/16.3/www/index.php?module=api&amp;action='.$methodname.'&amp;hash='.$hash.'&amp;id='.$id;
 
    $xml = '&lt;?xml version="1.0" encoding="UTF-8"?&gt;
            &lt;request&gt;
                &lt;status&gt;
                    &lt;function&gt;'.$methodname.'&lt;/function&gt;
                &lt;/status&gt;
                &lt;xml&gt;'.$xml.'&lt;/xml&gt;
            &lt;/request&gt;';
 
    $data = array('xml' =&gt; $xml, 'md5sum' =&gt; md5($xml));
 
    // use key 'http' even if you send the request to https://...
    $options = array(
                   'http' =&gt; array(
                   'header'  =&gt; "Content-type: application/x-www-form-urlencoded\r\n",
                   'method'  =&gt; 'POST',
                   'content' =&gt; http_build_query($data),
                   ),
               );
 
    $context  = stream_context_create($options);
    $result = file_get_contents($url, false, $context);
    return $result;
}
 
$obj = simplexml_load_string($output_xml);
echo "&lt;pre&gt;";
print_r($obj);
echo "&lt;/pre&gt;";
 
?&gt;
</code>
      </pre>
<div class="glossary-definitions" style="display:none!important;"></div>
</div>
<div dir="ltr" class="section internal sub-topic">
<div class="titlepage">
<h4 class="title">
<a data-zd-article="UUID-dcf5bf7e-1b56-6f1c-d7fb-6aef7e9f9158" id="idm7987"></a>Beispiel Antwort BenutzerEdit</h4>
</div>
<pre class="programlisting">        <code class="code">&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;response&gt;
   &lt;status&gt;
      &lt;action&gt;BenutzerEdit&lt;/action&gt;
      &lt;message&gt;OK&lt;/message&gt;
      &lt;messageCode&gt;1&lt;/messageCode&gt;
   &lt;/status&gt;   
&lt;/response&gt;
</code>
      </pre>
<div class="glossary-definitions" style="display:none!important;"></div>
</div>
<div dir="ltr" class="section internal sub-topic">
<div class="titlepage">
<h4 class="title">
<a data-zd-article="UUID-dcf5bf7e-1b56-6f1c-d7fb-6aef7e9f9158" id="UUID-dcf5bf7e-1b56-6f1c-d7fb-6aef7e9f9158_id_360017436919_id_h_01F0E24PGDNZEYKGMKY91QFR98"></a>Beispiel Anfrage BenutzerGet mit Funktionen</h4>
</div>
<pre class="programlisting">        <code class="code">&lt;?php

$hash = generateHash();

$xml = "";

$id = "1";

$output_xml = SendRequest("BenutzerGet",$xml,$hash,$id); 

function generateHash()
{
    $initKey = 'neijfj38734hujfie';
    $remoteDomain = 'http://192.168.0.28';
    $date = gmdate('dmY');
    $hash = "";

    for($i = 0; $i &lt;= 200; $i++) 
        $hash = sha1($hash . $initKey . $remoteDomain . $date);
  
    return $hash;
}

function SendRequest($methodname,$xml,$hash,$id)
{

  $url = 'http://192.168.0.28/wawision/16.3/www/index.php?module=api&amp;action='.$methodname.'&amp;hash='.$hash.'&amp;id='.$id;

  $xml = '&lt;?xml version="1.0" encoding="UTF-8"?&gt;
          &lt;request&gt;
              &lt;status&gt;
                  &lt;function&gt;'.$methodname.'&lt;/function&gt;
              &lt;/status&gt;
              &lt;xml&gt;'.$xml.'&lt;/xml&gt;
          &lt;/request&gt;';

  $data = array('xml' =&gt; $xml, 'md5sum' =&gt; md5($xml));

  // use key 'http' even if you send the request to https://...
  $options = array(
                 'http' =&gt; array(
                 'header'  =&gt; "Content-type: application/x-www-form-urlencoded\r\n",
                 'method'  =&gt; 'POST',
                 'content' =&gt; http_build_query($data),
                 ),
             );
  $context  = stream_context_create($options);
  $result = file_get_contents($url, false, $context);
  return $result;
}

$obj = simplexml_load_string($output_xml);
echo "&lt;pre&gt;";
print_r($obj);
echo "&lt;/pre&gt;";

?&gt;
</code>
      </pre>
<div class="glossary-definitions" style="display:none!important;"></div>
</div>
<div dir="ltr" class="section internal sub-topic">
<div class="titlepage">
<h4 class="title">
<a data-zd-article="UUID-dcf5bf7e-1b56-6f1c-d7fb-6aef7e9f9158" id="UUID-dcf5bf7e-1b56-6f1c-d7fb-6aef7e9f9158_id_360017436919_id_h_01F0E24BMX1EMAWBQMCKN2SB3R"></a>Beispiel Antwort BenutzerGet</h4>
</div>
<pre class="programlisting">        <code class="code">&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;response&gt;
   &lt;status&gt;
      &lt;action&gt;BenutzerGet&lt;/action&gt;
      &lt;message&gt;OK&lt;/message&gt;
      &lt;messageCode&gt;1&lt;/messageCode&gt;
   &lt;/status&gt;
   &lt;xml&gt;
      &lt;id&gt;1&lt;/id&gt;
      &lt;username&gt;admin&lt;/username&gt;
      &lt;password&gt;MAiwwHrOSf9kg&lt;/password&gt;
      &lt;repassword&gt;0&lt;/repassword&gt;
      &lt;description /&gt;
      &lt;settings&gt;a:2:{s:18:"lohnabrechnung_von";s:0:"";s:18:"lohnabrechnung_bis";s:0:"";}&lt;/settings&gt;
      &lt;parentuser /&gt;
      &lt;activ&gt;1&lt;/activ&gt;
      &lt;type&gt;admin&lt;/type&gt;
      &lt;adresse&gt;1&lt;/adresse&gt;
      &lt;fehllogins&gt;0&lt;/fehllogins&gt;
      &lt;standarddrucker&gt;0&lt;/standarddrucker&gt;
      &lt;firma&gt;1&lt;/firma&gt;
      &lt;logdatei&gt;2014-05-26 11:12:28&lt;/logdatei&gt;
      &lt;startseite&gt;aW5kZXgucGhwP21vZHVsZT13ZWxjb21lJmFjdGlvbj1waW53YW5k&lt;/startseite&gt;
      &lt;hwtoken&gt;0&lt;/hwtoken&gt;
      &lt;hwkey /&gt;
      &lt;hwcounter&gt;0&lt;/hwcounter&gt;
      &lt;motppin /&gt;
      &lt;motpsecret /&gt;
      &lt;externlogin&gt;1&lt;/externlogin&gt;
      &lt;hwdatablock /&gt;
      &lt;passwordmd5 /&gt;
      &lt;internebezeichnung /&gt;
      &lt;gpsstechuhr&gt;0&lt;/gpsstechuhr&gt;
      &lt;kalender_passwort /&gt;
      &lt;kalender_aktiv /&gt;
   &lt;/xml&gt;
&lt;/response&gt;
</code>
      </pre>
<div class="glossary-definitions" style="display:none!important;"></div>
</div>
<div dir="ltr" class="section internal sub-topic">
<div class="titlepage">
<h4 class="title">
<a data-zd-article="UUID-dcf5bf7e-1b56-6f1c-d7fb-6aef7e9f9158" id="UUID-dcf5bf7e-1b56-6f1c-d7fb-6aef7e9f9158_id_360017436919_id_h_01F0E232M913H0M1ZZ7QDGH9VQ"></a>Beispiel Anfrage BenutzerGetRFID</h4>
</div>
<pre class="programlisting">        <code class="code">&lt;?php

$xml = '&lt;rfid&gt;1234&lt;/rfid&gt;';

$output_xml = SendRequest('BenutzerGetRFID', $xml);

echo "&lt;pre&gt;";
var_dump($output_xml);
echo "&lt;/pre&gt;";

function SendRequest($methodname,$xml)
{
    $url = 'http://localhost/xentral/20.1/www/api/'.$methodname;

    $ch = curl_init($url);
    curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
    curl_setopt($ch, CURLOPT_HTTPAUTH, CURLAUTH_DIGEST);
    curl_setopt($ch, CURLOPT_USERPWD, "apitest:password1234");
    curl_setopt($ch, CURLOPT_POST, true);
    curl_setopt($ch, CURLOPT_POSTFIELDS, '&lt;xml&gt;'.$xml.'&lt;/xml&gt;');
    curl_setopt($ch, CURLOPT_HTTPHEADER, ['content-type: application/xml']);
    $response = curl_exec($ch);
    curl_close($ch);

    return $response;
}

?&gt;
</code>
      </pre>
<div class="glossary-definitions" style="display:none!important;"></div>
</div>
<div dir="ltr" class="section internal sub-topic">
<div class="titlepage">
<h4 class="title">
<a data-zd-article="UUID-dcf5bf7e-1b56-6f1c-d7fb-6aef7e9f9158" id="UUID-dcf5bf7e-1b56-6f1c-d7fb-6aef7e9f9158_id_360017436919_id_h_01F0E22Q7609N2WQ3SKRB1CKG5"></a>Beispiel Antwort BenutzerGetRFID</h4>
</div>
<pre class="programlisting">        <code class="code">&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;response&gt;
   &lt;status&gt;
      &lt;action&gt;BenutzerGetRFID&lt;/action&gt;
   &lt;message&gt;OK&lt;/message&gt;
   &lt;messageCode&gt;1&lt;/messageCode&gt;
   &lt;/status&gt;
   &lt;xml&gt;
      &lt;id&gt;3&lt;/id&gt;
      &lt;username&gt;demomitarbeiter&lt;/username&gt;
      &lt;password&gt;pllIX0pw7JU9c&lt;/password&gt;
      &lt;repassword&gt;0&lt;/repassword&gt;
      &lt;description&gt;&lt;/description&gt;
      &lt;settings&gt;a:6: 
{s:16:&amp;quot;pos_list_projekt&amp;quot;;s:1:&amp;quot;0&amp;quot;;s:18:&amp;quot;pos_list_kassierer&amp;quot;;s:1:&amp;quot;0&amp;quot;;s:22:&amp;quot;pos_list_kassierername&amp;quot;;s:1:&amp;quot;0&amp;quot;;s:18:&amp;quot;pos_list_lkadresse&amp;quot;;s:1:&amp;quot;0&amp;quot;;s:18:&amp;quot;lohnabrechnung_von&amp;quot;;s:0:&amp;quot;&amp;quot;;s:18:&amp;quot;lohnabrechnung_bis&amp;quot;;s:0:&amp;quot;&amp;quot;;}
      &lt;/settings&gt;
      &lt;parentuser&gt;0&lt;/parentuser&gt;
      &lt;activ&gt;1&lt;/activ&gt;
      &lt;type&gt;standard&lt;/type&gt;
      &lt;adresse&gt;6&lt;/adresse&gt;
      &lt;fehllogins&gt;0&lt;/fehllogins&gt;
      &lt;standarddrucker&gt;0&lt;/standarddrucker&gt;
      &lt;firma&gt;1&lt;/firma&gt;
      &lt;logdatei&gt;2019-11-22 16:54:00&lt;/logdatei&gt;
      &lt;startseite&gt;&lt;/startseite&gt;
      &lt;hwtoken&gt;0&lt;/hwtoken&gt;
      &lt;hwkey&gt;&lt;/hwkey&gt;
      &lt;hwcounter&gt;0&lt;/hwcounter&gt;
      &lt;motppin&gt;&lt;/motppin&gt;
      &lt;motpsecret&gt;&lt;/motpsecret&gt;
      &lt;passwordmd5&gt;2ad71933e4b074c4671425c8e6b48021&lt;/passwordmd5&gt;
      &lt;externlogin&gt;0&lt;/externlogin&gt;
      &lt;projekt_bevorzugen&gt;0&lt;/projekt_bevorzugen&gt;
      &lt;email_bevorzugen&gt;1&lt;/email_bevorzugen&gt;
      &lt;projekt&gt;0&lt;/projekt&gt;
      &lt;rfidtag&gt;1234&lt;/rfidtag&gt;
      &lt;vorlage&gt;&lt;/vorlage&gt;
      &lt;kalender_passwort&gt;&lt;/kalender_passwort&gt;
      &lt;kalender_ausblenden&gt;0&lt;/kalender_ausblenden&gt;
      &lt;kalender_aktiv&gt;0&lt;/kalender_aktiv&gt;
      &lt;gpsstechuhr&gt;0&lt;/gpsstechuhr&gt;
      &lt;standardetikett&gt;0&lt;/standardetikett&gt;
      &lt;standardfax&gt;0&lt;/standardfax&gt;
      &lt;internebezeichnung&gt;&lt;/internebezeichnung&gt;
      &lt;hwdatablock&gt;&lt;/hwdatablock&gt;
      &lt;standardversanddrucker&gt;0&lt;/standardversanddrucker&gt;
      &lt;passwordsha512&gt;&lt;/passwordsha512&gt;
      &lt;salt&gt;&lt;/salt&gt;
      &lt;paketmarkendrucker&gt;0&lt;/paketmarkendrucker&gt;
      &lt;sprachebevorzugen&gt;deutsch&lt;/sprachebevorzugen&gt;
      &lt;vergessencode&gt;&lt;/vergessencode&gt;
      &lt;vergessenzeit&gt;&lt;/vergessenzeit&gt;
      &lt;chat_popup&gt;1&lt;/chat_popup&gt;
      &lt;defaultcolor&gt;false&lt;/defaultcolor&gt;
      &lt;passwordhash&gt;&lt;/passwordhash&gt;
      &lt;docscan_aktiv&gt;0&lt;/docscan_aktiv&gt;
      &lt;docscan_passwort&gt;&lt;/docscan_passwort&gt;
      &lt;callcenter_notification&gt;1&lt;/callcenter_notification&gt;
      &lt;stechuhrdevice&gt;&lt;/stechuhrdevice&gt;
   &lt;/xml&gt;
&lt;/response&gt;
</code>
      </pre>
<div class="glossary-definitions" style="display:none!important;"></div>
</div>
<div class="glossary-definitions" style="display:none!important;"></div>
</div>
<div dir="ltr" class="section internal sub-topic">
<div class="titlepage">
<h3 class="title">
<a data-zd-article="UUID-dcf5bf7e-1b56-6f1c-d7fb-6aef7e9f9158" id="idm8007"></a>Verwalten von Gruppen: GruppeCreate, GruppeEdit, GruppeGet</h3>
</div>
<p>Mit dem Befehl GruppeCreate kann eine neue Gruppe angelegt werden. Zum Bearbeiten einer Gruppe wird GruppeEdit verwendet. Sollen jedoch nur die Daten einer Gruppe abgefragt werden, geschieht dies mit GruppeGet. Bei GruppeEdit und GruppeCreate muss die ID der Gruppe als GET Parameter übergeben werden.</p>
<p>Tags, um eine Gruppe anzulegen oder zu bearbeiten: Es können als Tag die Spaltenbezeichnungen der Tabelle gruppen aus der Datenbank gewählt werden, z.B.:</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc;">
<li class="listitem">
<p>&lt;name&gt; Beinhaltet den Namen der Gruppe</p>
</li>
<li class="listitem">
<p>&lt;art&gt; Hier sollte gruppe eingetragen werden</p>
</li>
<li class="listitem">
<p>&lt;kennziffer&gt; Beliebige Kennziffer zum Erkennen der Gruppe</p>
</li>
</ul>
</div>
<div dir="ltr" class="section internal sub-topic">
<div class="titlepage">
<h4 class="title">
<a data-zd-article="UUID-dcf5bf7e-1b56-6f1c-d7fb-6aef7e9f9158" id="idm8018"></a>Beispiel Anfrage GruppeCreate mit Funktionen</h4>
</div>
<pre class="programlisting">        <code class="code">&lt;?php
$hash = generateHash();

$xml = "&lt;name&gt;Messe 2017&lt;/name&gt;
        &lt;art&gt;Gruppe&lt;/art&gt;
        &lt;kennziffer&gt;2017&lt;/kennziffer&gt;";

$output_xml = SendRequest("GruppeCreate",$xml,$hash); 
 
function generateHash()
{
 
    $initKey = 'neijfj38734hujfie';
    $remoteDomain = 'http://192.168.0.28';
    $date = gmdate('dmY');
    $hash = "";
 
    for($i = 0; $i &lt;= 200; $i++) 
        $hash = sha1($hash . $initKey . $remoteDomain . $date);
 
    return $hash;
}
 
function SendRequest($methodname,$xml,$hash)
{
 
    $url = 'http://192.168.0.28/wawision/16.3/www/index.php?module=api&amp;action='.$methodname.'&amp;hash='.$hash;
 
    $xml = '&lt;?xml version="1.0" encoding="UTF-8"?&gt;
            &lt;request&gt;
                &lt;status&gt;
                    &lt;function&gt;'.$methodname.'&lt;/function&gt;
                &lt;/status&gt;
                &lt;xml&gt;'.$xml.'&lt;/xml&gt;
            &lt;/request&gt;';
 
    $data = array('xml' =&gt; $xml, 'md5sum' =&gt; md5($xml));
 
    // use key 'http' even if you send the request to https://...
    $options = array(
                   'http' =&gt; array(
                   'header'  =&gt; "Content-type: application/x-www-form-urlencoded\r\n",
                   'method'  =&gt; 'POST',
                   'content' =&gt; http_build_query($data),
                   ),
               );
 
    $context  = stream_context_create($options);
    $result = file_get_contents($url, false, $context);
    return $result;
}
 
$obj = simplexml_load_string($output_xml);
echo "&lt;pre&gt;";
print_r($obj);
echo "&lt;/pre&gt;";
 
?&gt;
</code>
      </pre>
<div class="glossary-definitions" style="display:none!important;"></div>
</div>
<div dir="ltr" class="section internal sub-topic">
<div class="titlepage">
<h4 class="title">
<a data-zd-article="UUID-dcf5bf7e-1b56-6f1c-d7fb-6aef7e9f9158" id="UUID-dcf5bf7e-1b56-6f1c-d7fb-6aef7e9f9158_id_360017436919_id_h_01F0E2EKKMM9VS92JQ70QEK50D"></a>Beispiel Antwort GruppeCreate</h4>
</div>
<pre class="programlisting">        <code class="code">&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;response&gt;
   &lt;status&gt;
      &lt;action&gt;GruppeCreate&lt;/action&gt;
      &lt;message&gt;OK&lt;/message&gt;
      &lt;messageCode&gt;1&lt;/messageCode&gt;
   &lt;/status&gt;
   &lt;xml&gt;
      &lt;id&gt;8&lt;/id&gt;
   &lt;/xml&gt;
&lt;/response&gt;
</code>
      </pre>
<div class="glossary-definitions" style="display:none!important;"></div>
</div>
<div dir="ltr" class="section internal sub-topic">
<div class="titlepage">
<h4 class="title">
<a data-zd-article="UUID-dcf5bf7e-1b56-6f1c-d7fb-6aef7e9f9158" id="idm8026"></a>Beispiel Anfrage GruppeEdit mit Funktionen</h4>
</div>
<pre class="programlisting">        <code class="code">&lt;?php
$hash = generateHash();

$xml = "&lt;name&gt;Messe 2016&lt;/name&gt;
        &lt;kennziffer&gt;2016&lt;/kennziffer&gt;";

$id = 8;

$output_xml = SendRequest("GruppeEdit",$xml,$hash,$id); 
 
function generateHash()
{
 
    $initKey = 'neijfj38734hujfie';
    $remoteDomain = 'http://192.168.0.28';
    $date = gmdate('dmY');
    $hash = "";
 
    for($i = 0; $i &lt;= 200; $i++) 
        $hash = sha1($hash . $initKey . $remoteDomain . $date);
 
    return $hash;
}
 
function SendRequest($methodname,$xml,$hash,$id)
{
 
    $url = 'http://192.168.0.28/wawision/16.3/www/index.php?module=api&amp;action='.$methodname.'&amp;hash='.$hash.'&amp;id='.$id;
 
    $xml = '&lt;?xml version="1.0" encoding="UTF-8"?&gt;
            &lt;request&gt;
                &lt;status&gt;
                    &lt;function&gt;'.$methodname.'&lt;/function&gt;
                &lt;/status&gt;
                &lt;xml&gt;'.$xml.'&lt;/xml&gt;
            &lt;/request&gt;';
 
    $data = array('xml' =&gt; $xml, 'md5sum' =&gt; md5($xml));
 
    // use key 'http' even if you send the request to https://...
    $options = array(
                   'http' =&gt; array(
                   'header'  =&gt; "Content-type: application/x-www-form-urlencoded\r\n",
                   'method'  =&gt; 'POST',
                   'content' =&gt; http_build_query($data),
                   ),
               );
 
    $context  = stream_context_create($options);
    $result = file_get_contents($url, false, $context);
    return $result;
}
 
$obj = simplexml_load_string($output_xml);
echo "&lt;pre&gt;";
print_r($obj);
echo "&lt;/pre&gt;";
 
?&gt;
</code>
      </pre>
<div class="glossary-definitions" style="display:none!important;"></div>
</div>
<div dir="ltr" class="section internal sub-topic">
<div class="titlepage">
<h4 class="title">
<a data-zd-article="UUID-dcf5bf7e-1b56-6f1c-d7fb-6aef7e9f9158" id="idm8030"></a>Beispiel Antwort GruppeEdit</h4>
</div>
<pre class="programlisting">        <code class="code">&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;response&gt;
   &lt;status&gt;
      &lt;action&gt;GruppeEdit&lt;/action&gt;
      &lt;message&gt;OK&lt;/message&gt;
      &lt;messageCode&gt;1&lt;/messageCode&gt;
   &lt;/status&gt;
&lt;/response&gt;
</code>
      </pre>
<div class="glossary-definitions" style="display:none!important;"></div>
</div>
<div dir="ltr" class="section internal sub-topic">
<div class="titlepage">
<h4 class="title">
<a data-zd-article="UUID-dcf5bf7e-1b56-6f1c-d7fb-6aef7e9f9158" id="idm8034"></a>Beispiel Anfrage GruppeGet mit Funktionen</h4>
</div>
<pre class="programlisting">        <code class="code">&lt;?php
$hash = generateHash();

$xml = "";
$id = 2;

$output_xml = SendRequest("GruppeGet",$xml,$hash,$id); 
 
function generateHash()
{
 
    $initKey = 'neijfj38734hujfie';
    $remoteDomain = 'http://192.168.0.28';
    $date = gmdate('dmY');
    $hash = "";
 
    for($i = 0; $i &lt;= 200; $i++) 
        $hash = sha1($hash . $initKey . $remoteDomain . $date);
 
    return $hash;
}
 
function SendRequest($methodname,$xml,$hash,$id)
{
 
    $url = 'http://192.168.0.28/wawision/16.3/www/index.php?module=api&amp;action='.$methodname.'&amp;hash='.$hash.'&amp;id='.$id;
 
    $xml = '&lt;?xml version="1.0" encoding="UTF-8"?&gt;
            &lt;request&gt;
                &lt;status&gt;
                    &lt;function&gt;'.$methodname.'&lt;/function&gt;
                &lt;/status&gt;
                &lt;xml&gt;'.$xml.'&lt;/xml&gt;
            &lt;/request&gt;';
 
    $data = array('xml' =&gt; $xml, 'md5sum' =&gt; md5($xml));
 
    // use key 'http' even if you send the request to https://...
    $options = array(
                   'http' =&gt; array(
                   'header'  =&gt; "Content-type: application/x-www-form-urlencoded\r\n",
                   'method'  =&gt; 'POST',
                   'content' =&gt; http_build_query($data),
                   ),
               );
 
    $context  = stream_context_create($options);
    $result = file_get_contents($url, false, $context);
    return $result;
}
 
$obj = simplexml_load_string($output_xml);
echo "&lt;pre&gt;";
print_r($obj);
echo "&lt;/pre&gt;";
 
?&gt;
</code>
      </pre>
<div class="glossary-definitions" style="display:none!important;"></div>
</div>
<div dir="ltr" class="section internal sub-topic">
<div class="titlepage">
<h4 class="title">
<a data-zd-article="UUID-dcf5bf7e-1b56-6f1c-d7fb-6aef7e9f9158" id="idm8038"></a>Beispiel Antwort GruppeGet</h4>
</div>
<pre class="programlisting">        <code class="code">&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;response&gt;
   &lt;status&gt;
      &lt;action&gt;GruppeGet&lt;/action&gt;
      &lt;message&gt;OK&lt;/message&gt;
      &lt;messageCode&gt;1&lt;/messageCode&gt;
   &lt;/status&gt;
   &lt;xml&gt;
      &lt;id&gt;2&lt;/id&gt;
      &lt;name&gt;Händler&lt;/name&gt;
      &lt;art&gt;gruppe&lt;/art&gt;
      &lt;kennziffer&gt;1&lt;/kennziffer&gt;
      &lt;internebemerkung/&gt;
      &lt;grundrabatt&gt;0.00&lt;/grundrabatt&gt;
      &lt;rabatt1&gt;0.00&lt;/rabatt1&gt;
      &lt;rabatt2&gt;0.00&lt;/rabatt2&gt;
      &lt;rabatt3&gt;0.00&lt;/rabatt3&gt;
      &lt;rabatt4&gt;0.00&lt;/rabatt4&gt;
      &lt;rabatt5&gt;0.00&lt;/rabatt5&gt;
      &lt;sonderrabatt_skonto&gt;0.00&lt;/sonderrabatt_skonto&gt;
      &lt;provision&gt;0.00&lt;/provision&gt;
      &lt;kundennummer/&gt;
      &lt;partnerid/&gt;
      &lt;dta_aktiv&gt;0&lt;/dta_aktiv&gt;
      &lt;dta_periode&gt;1&lt;/dta_periode&gt;
      &lt;dta_dateiname/&gt;
      &lt;dta_mail/&gt;
      &lt;dta_mail_betreff/&gt;
      &lt;dta_mail_text/&gt;
      &lt;dtavariablen/&gt;
      &lt;dta_variante&gt;1&lt;/dta_variante&gt;
      &lt;bonus1&gt;0.00&lt;/bonus1&gt;
      &lt;bonus1_ab&gt;0.00&lt;/bonus1_ab&gt;
      &lt;bonus2&gt;0.00&lt;/bonus2&gt;
      &lt;bonus2_ab&gt;0.00&lt;/bonus2_ab&gt;
      &lt;bonus3&gt;0.00&lt;/bonus3&gt;
      &lt;bonus3_ab&gt;0.00&lt;/bonus3_ab&gt;
      &lt;bonus4&gt;0.00&lt;/bonus4&gt;
      &lt;bonus4_ab&gt;0.00&lt;/bonus4_ab&gt;
      &lt;bonus5&gt;0.00&lt;/bonus5&gt;
      &lt;bonus5_a&gt;0.00&lt;/bonus5_ab&gt;
      &lt;bonus6&gt;0.00&lt;/bonus6&gt;
      &lt;bonus6_ab&gt;0.00&lt;/bonus6_ab&gt;
      &lt;bonus7&gt;0.00&lt;/bonus7&gt;
      &lt;bonus7_ab&gt;0.00&lt;/bonus7_ab&gt;
      &lt;bonus8&gt;0.00&lt;/bonus8&gt;
      &lt;bonus8_ab&gt;0.00&lt;/bonus8_ab&gt;
      &lt;bonus9&gt;0.00&lt;/bonus9&gt;
      &lt;bonus9_ab&gt;0.00&lt;/bonus9_ab&gt;
      &lt;bonus10&gt;0.00&lt;/bonus10&gt;
      &lt;bonus10_ab&gt;0.00&lt;/bonus10_ab&gt;
      &lt;zahlungszieltage&gt;0&lt;/zahlungszieltage&gt;
      &lt;zahlungszielskonto&gt;0.00&lt;/zahlungszielskonto&gt;
      &lt;zahlungszieltageskonto&gt;0&lt;/zahlungszieltageskonto&gt;
      &lt;portoartikel&gt;0&lt;/portoartikel&gt;
      &lt;portofreiab&gt;0.00&lt;/portofreiab&gt;
      &lt;erweiterteoptionen&gt;0&lt;/erweiterteoptionen&gt;
      &lt;zentralerechnung&gt;0&lt;/zentralerechnung&gt;
      &lt;zentralregulierung&gt;0&lt;/zentralregulierung&gt;
      &lt;gruppe&gt;0&lt;/gruppe&gt;
      &lt;preisgruppe&gt;0&lt;/preisgruppe&gt;
      &lt;verbandsgruppe&gt;0&lt;/verbandsgruppe&gt;
      &lt;rechnung_name/&gt;
      &lt;rechnung_strasse/&gt;
      &lt;rechnung_ort/&gt;
      &lt;rechnung_plz/&gt;
      &lt;rechnung_abteilung/&gt;
      &lt;rechnung_land/&gt;
      &lt;rechnung_email/&gt;
      &lt;rechnung_periode&gt;1&lt;/rechnung_periode&gt;
      &lt;rechnung_anzahlpapier&gt;0&lt;/rechnung_anzahlpapier&gt;
      &lt;rechnung_permail&gt;0&lt;/rechnung_permail&gt;
      &lt;webid/&gt;
      &lt;portofrei_aktiv&gt;0.00&lt;/portofrei_aktiv&gt;
      &lt;projekt&gt;0&lt;/projekt&gt;
      &lt;objektname/&gt;
      &lt;objekttyp/&gt;
      &lt;parameter/&gt;
      &lt;objektname2/&gt;
      &lt;objekttyp2/&gt;
      &lt;parameter2/&gt;
      &lt;objektname3/&gt;
      &lt;objekttyp3/&gt;
      &lt;parameter3/&gt;
      &lt;kategorie&gt;1&lt;/kategorie&gt;
   &lt;/xml&gt;
&lt;/response&gt;
</code>
      </pre>
<div class="glossary-definitions" style="display:none!important;"></div>
</div>
<div class="glossary-definitions" style="display:none!important;"></div>
</div>
<div dir="ltr" class="section internal sub-topic">
<div class="titlepage">
<h3 class="title">
<a data-zd-article="UUID-dcf5bf7e-1b56-6f1c-d7fb-6aef7e9f9158" id="UUID-dcf5bf7e-1b56-6f1c-d7fb-6aef7e9f9158_id_360017436919_id_toc-48"></a>Anlegen und Bearbeiten von Preisen eines Artikels: PreiseEdit</h3>
</div>
<p>Mit PreiseEdit besteht die Möglichkeit neue Einkaufs- und Verkaufspreise anzulegen, sowie bestehende Einkaufs- und Verkaufspreise zu bearbeiten. Für den genauen Aufbau der XML Struktur, ist der Beispielaufruf der Funktion PreiseEdit weiter unten anzusehen.</p>
<p>Grundlegender Aufbau der XML Daten:</p>
<pre class="programlisting">      <code class="code">&lt;artikel&gt;
  &lt;id/&gt;
  &lt;nummer/&gt;
  &lt;verkaufspreise&gt;
    &lt;staffelpreis/&gt;
  &lt;/verkaufspreise&gt;
  &lt;einkaufspreise&gt;
    &lt;staffelpreis/&gt;
  &lt;/einkaufspreise&gt;
&lt;/artikel&gt;
</code>
    </pre>
<p>Das Tag &lt;artikel&gt; umschließt alle anderen Tags. Um die Preise zuzuordnen, muss die ID des Artikels angegeben werden. Ab der Version 17.3 kann die Artikelnummer, statt der ID verwendet werden. Anschließend kommt das Tag &lt;verkaufspreise&gt; / &lt;einkaufspreise&gt;, das dann das Tag &lt;staffelpreis&gt; beinhaltet. Innerhalb von &lt;staffelpreis&gt; stehen weitere Parameter wie im nächsten Absatz gelistet. Für jeden Preis, muss jeweils ein neues Tag &lt;staffelpreis&gt; innerhalb &lt;verkaufspreise&gt; / &lt;einkaufspreise&gt; geöffnet werden.</p>
<p>Folgende Parameter stehen zur Verfügung:</p>
<p>Verkaufspreise:</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc;">
<li class="listitem">
<p>&lt;kundennummer&gt; falls Preis für alle gilt und nicht kundenspezifisch, dann &lt;kundennummer&gt; leer lassen</p>
</li>
<li class="listitem">
<p>&lt;gruppe&gt; ID der Gruppe aus Xentral, falls Preis für bestimmte Gruppen gilt. Ansonsten &lt;gruppe&gt; leer lassen</p>
</li>
<li class="listitem">
<p>&lt;ab_menge&gt; Gibt die Menge an, ab der der Preis gültig sein soll. Wenn &lt;ab_menge&gt; leer ist, wird 1 als Menge genommen. Kommazahlen mit Punkt angeben, z.B. 2.50</p>
</li>
<li class="listitem">
<p>&lt;preis&gt; Verkaufspreis, muss mit Punkt angegeben werden, z.B. 29.99</p>
</li>
</ul>
</div>
<p>Einkaufspreise:</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc;">
<li class="listitem">
<p>&lt;lieferantennummer&gt; muss befüllt sein, sonst wird der Einkaufspreis nicht angelegt / bearbeitet</p>
</li>
<li class="listitem">
<p>&lt;ab_menge&gt; Gibt die Menge an, ab der der Preis gültig sein soll. Wenn &lt;ab_menge&gt; leer ist, wird 1 als Menge genommen. Kommazahlen mit Punkt angeben, z.B. 2.50</p>
</li>
<li class="listitem">
<p>&lt;bestellnummer&gt; Bestellnummer des Artikels beim Lieferanten</p>
</li>
<li class="listitem">
<p>&lt;bezeichnunglieferant&gt; Bezeichnung des Artikels beim Lieferanten</p>
</li>
<li class="listitem">
<p>&lt;preis&gt; Einkaufspreis, muss mit Punkt angegeben werden, z.B. 29.99</p>
</li>
<li class="listitem">
<p>&lt;waehrung&gt; Währung des Preises, falls leer ist, wird EUR als Währung genommen</p>
</li>
</ul>
</div>
<div dir="ltr" class="section internal sub-topic">
<div class="titlepage">
<h4 class="title">
<a data-zd-article="UUID-dcf5bf7e-1b56-6f1c-d7fb-6aef7e9f9158" id="UUID-dcf5bf7e-1b56-6f1c-d7fb-6aef7e9f9158_id_360017436919_id_toc-49"></a>Beispiel Anfrage PreiseEdit mit Funktionen</h4>
</div>
<pre class="programlisting">        <code class="code">&lt;?php

$hash = generateHash();

$xml = "&lt;artikel&gt;   
          &lt;id&gt;7&lt;/id&gt;
          &lt;verkaufspreise&gt; 
            &lt;staffelpreis&gt;
              &lt;kundennummer&gt;100030&lt;/kundennummer&gt;
              &lt;gruppe/&gt;
              &lt;ab_menge&gt;1&lt;/ab_menge&gt;
              &lt;preis&gt;2.80&lt;/preis&gt;
            &lt;/staffelpreis&gt;            
            &lt;staffelpreis&gt;
              &lt;kundennummer/&gt;
              &lt;gruppe/&gt;
              &lt;ab_menge/&gt;
              &lt;preis&gt;2.40&lt;/preis&gt;
            &lt;/staffelpreis&gt;
          &lt;/verkaufspreise&gt;
          &lt;einkaufspreise&gt;
            &lt;staffelpreis&gt;
              &lt;lieferantennummer&gt;70003&lt;/lieferantennummer&gt;
              &lt;ab_menge/&gt;
              &lt;bestellnummer&gt;123456789&lt;/bestellnummer&gt;
              &lt;bezeichnunglieferant&gt;Artikel 54367B&lt;/bezeichnunglieferant&gt;
              &lt;preis&gt;1.20&lt;/preis&gt;
              &lt;waehrung/&gt;
            &lt;/staffelpreis&gt;
          &lt;/einkaufspreise&gt;
        &lt;/artikel&gt;
        ";


$output_xml = SendRequest("PreiseEdit",$xml,$hash); 

function generateHash()
{
    
    $initKey = 'neijfj38734hujfie';
    $remoteDomain = 'http://192.168.0.28';
    $date = gmdate('dmY');
    $hash = "";

    for($i = 0; $i &lt;= 200; $i++) 
        $hash = sha1($hash . $initKey . $remoteDomain . $date);
  
    return $hash;
}

function SendRequest($methodname,$xml,$hash)
{

  $url = 'http://192.168.0.28/wawision/17.4/www/index.php?module=api&amp;action='.$methodname.'&amp;hash='.$hash;

  $xml = '&lt;?xml version="1.0" encoding="UTF-8"?&gt;
          &lt;request&gt;
            &lt;status&gt;
              &lt;function&gt;'.$methodname.'&lt;/function&gt;
            &lt;/status&gt;
            &lt;xml&gt;'.$xml.'&lt;/xml&gt;
          &lt;/request&gt;';

  $data = array('xml' =&gt; $xml, 'md5sum' =&gt; md5($xml));

  // use key 'http' even if you send the request to https://...
  $options = array(
    'http' =&gt; array(
        'header'  =&gt; "Content-type: application/x-www-form-urlencoded\r\n",
        'method'  =&gt; 'POST',
        'content' =&gt; http_build_query($data),
    ),
  );
  $context  = stream_context_create($options);
  $result = file_get_contents($url, false, $context);
  return $result;
}

$obj = simplexml_load_string($output_xml);
echo "&lt;pre&gt;";
print_r($obj);
echo "&lt;/pre&gt;";

?&gt;
</code>
      </pre>
<div class="glossary-definitions" style="display:none!important;"></div>
</div>
<div dir="ltr" class="section internal sub-topic">
<div class="titlepage">
<h4 class="title">
<a data-zd-article="UUID-dcf5bf7e-1b56-6f1c-d7fb-6aef7e9f9158" id="UUID-dcf5bf7e-1b56-6f1c-d7fb-6aef7e9f9158_id_360017436919_id_toc-50"></a>Beispiel Antwort PreiseEdit</h4>
</div>
<pre class="programlisting">        <code class="code">&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;response&gt;
  &lt;status&gt;
    &lt;action&gt;PreiseEdit&lt;/action&gt;
    &lt;message&gt;OK&lt;/message&gt;
    &lt;messageCode&gt;1&lt;/messageCode&gt;
  &lt;/status&gt;
&lt;/response&gt;
</code>
      </pre>
<div class="glossary-definitions" style="display:none!important;"></div>
</div>
<div class="glossary-definitions" style="display:none!important;"></div>
</div>
<div dir="ltr" class="section internal sub-topic">
<div class="titlepage">
<h3 class="title">
<a data-zd-article="UUID-dcf5bf7e-1b56-6f1c-d7fb-6aef7e9f9158" id="idm8082"></a>Verwalten von weiteren Kontaktinformationen einer Adresse: AdresseKontaktCreate, AdresseKontaktEdit, AdresseKontaktGet</h3>
</div>
<p>Mit AdresseKontaktCreate können weitere Kontaktinformationen bei einer Adresse hinterlegt werden. Bearbeitet werden diese mit AdresseKontaktEdit. Soll eine Kontaktinformation zurückkommen, geschieht dies mit AdresseKontaktGet.</p>
<p>Mögliche Parameter zum Anlegen und Bearbeiten einer Adressinformation:</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc;">
<li class="listitem">
<p>&lt;addresse&gt; ID der Adresse für die Kontaktinformation</p>
</li>
<li class="listitem">
<p>&lt;bezeichnung&gt; Bezeichnung der Kontaktinformation, z.B. Telefon privat</p>
</li>
<li class="listitem">
<p>&lt;kontakt&gt; Inhalt der Kontaktinformation, z.B. eine Telefonnummer</p>
</li>
</ul>
</div>
<div dir="ltr" class="section internal sub-topic">
<div class="titlepage">
<h4 class="title">
<a data-zd-article="UUID-dcf5bf7e-1b56-6f1c-d7fb-6aef7e9f9158" id="UUID-dcf5bf7e-1b56-6f1c-d7fb-6aef7e9f9158_id_360017436919_id_h_01F0E2T9DJAT05ZVDG5JQRNCYY"></a>Beispiel Anfrage AdresseKontaktCreate mit Funktionen</h4>
</div>
<pre class="programlisting">        <code class="code">&lt;?php
$hash = generateHash();

$xml = "&lt;adresse&gt;13&lt;/adresse&gt;
        &lt;bezeichnung&gt;Telefon privat&lt;/bezeichnung&gt;
        &lt;kontakt&gt;01234567890&lt;/kontakt&gt;";

$output_xml = SendRequest("AdresseKontaktCreate",$xml,$hash); 
 
function generateHash()
{
 
    $initKey = 'neijfj38734hujfie';
    $remoteDomain = 'http://192.168.0.28';
    $date = gmdate('dmY');
    $hash = "";
 
    for($i = 0; $i &lt;= 200; $i++) 
        $hash = sha1($hash . $initKey . $remoteDomain . $date);
 
    return $hash;
}
 
function SendRequest($methodname,$xml,$hash)
{
 
    $url = 'http://192.168.0.28/wawision/16.3/www/index.php?module=api&amp;action='.$methodname.'&amp;hash='.$hash;
 
    $xml = '&lt;?xml version="1.0" encoding="UTF-8"?&gt;
            &lt;request&gt;
                &lt;status&gt;
                    &lt;function&gt;'.$methodname.'&lt;/function&gt;
                &lt;/status&gt;
                &lt;xml&gt;'.$xml.'&lt;/xml&gt;
            &lt;/request&gt;';
 
    $data = array('xml' =&gt; $xml, 'md5sum' =&gt; md5($xml));
 
    // use key 'http' even if you send the request to https://...
    $options = array(
                   'http' =&gt; array(
                   'header'  =&gt; "Content-type: application/x-www-form-urlencoded\r\n",
                   'method'  =&gt; 'POST',
                   'content' =&gt; http_build_query($data),
                   ),
               );
 
    $context  = stream_context_create($options);
    $result = file_get_contents($url, false, $context);
    return $result;
}
 
$obj = simplexml_load_string($output_xml);
echo "&lt;pre&gt;";
print_r($obj);
echo "&lt;/pre&gt;";
 
?&gt;
</code>
      </pre>
<div class="glossary-definitions" style="display:none!important;"></div>
</div>
<div dir="ltr" class="section internal sub-topic">
<div class="titlepage">
<h4 class="title">
<a data-zd-article="UUID-dcf5bf7e-1b56-6f1c-d7fb-6aef7e9f9158" id="UUID-dcf5bf7e-1b56-6f1c-d7fb-6aef7e9f9158_id_360017436919_id_h_01F0E2T9DJAT05ZVDG5JQRNCYY"></a>Beispiel Antwort AdresseKontaktCreate</h4>
</div>
<pre class="programlisting">        <code class="code">&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;response&gt;
   &lt;status&gt;
      &lt;action&gt;AdresseKontaktCreate&lt;/action&gt;
      &lt;message&gt;OK&lt;/message&gt;
      &lt;messageCode&gt;1&lt;/messageCode&gt;
   &lt;/status&gt;
   &lt;xml&gt;
      &lt;id&gt;2&lt;/id&gt;
   &lt;/xml&gt;
&lt;/response&gt;
</code>
      </pre>
<div class="glossary-definitions" style="display:none!important;"></div>
</div>
<div dir="ltr" class="section internal sub-topic">
<div class="titlepage">
<h4 class="title">
<a data-zd-article="UUID-dcf5bf7e-1b56-6f1c-d7fb-6aef7e9f9158" id="UUID-dcf5bf7e-1b56-6f1c-d7fb-6aef7e9f9158_id_360017436919_id_h_01F0E2SG80RSP3PEJGNFKZ2WZZ"></a>Beispiel Anfrage AdresseKontaktEdit mit Funktionen</h4>
</div>
<pre class="programlisting">        <code class="code">&lt;?php
$hash = generateHash();

$xml = "&lt;bezeichnung&gt;Mobil privat&lt;/bezeichnung&gt;
        &lt;kontakt&gt;01232222222&lt;/kontakt&gt;";

$id = 2;


$output_xml = SendRequest("AdresseKontaktEdit",$xml,$hash,$id); 
 
function generateHash()
{
 
    $initKey = 'neijfj38734hujfie';
    $remoteDomain = 'http://192.168.0.28';
    $date = gmdate('dmY');
    $hash = "";
 
    for($i = 0; $i &lt;= 200; $i++) 
        $hash = sha1($hash . $initKey . $remoteDomain . $date);
 
    return $hash;
}
 
function SendRequest($methodname,$xml,$hash,$id)
{
 
    $url = 'http://192.168.0.28/wawision/16.3/www/index.php?module=api&amp;action='.$methodname.'&amp;hash='.$hash.'&amp;id='.$id;
 
    $xml = '&lt;?xml version="1.0" encoding="UTF-8"?&gt;
            &lt;request&gt;
                &lt;status&gt;
                    &lt;function&gt;'.$methodname.'&lt;/function&gt;
                &lt;/status&gt;
                &lt;xml&gt;'.$xml.'&lt;/xml&gt;
            &lt;/request&gt;';
 
    $data = array('xml' =&gt; $xml, 'md5sum' =&gt; md5($xml));
 
    // use key 'http' even if you send the request to https://...
    $options = array(
                   'http' =&gt; array(
                   'header'  =&gt; "Content-type: application/x-www-form-urlencoded\r\n",
                   'method'  =&gt; 'POST',
                   'content' =&gt; http_build_query($data),
                   ),
               );
 
    $context  = stream_context_create($options);
    $result = file_get_contents($url, false, $context);
    return $result;
}
 
$obj = simplexml_load_string($output_xml);
echo "&lt;pre&gt;";
print_r($obj);
echo "&lt;/pre&gt;";
 
?&gt;
</code>
      </pre>
<div class="glossary-definitions" style="display:none!important;"></div>
</div>
<div dir="ltr" class="section internal sub-topic">
<div class="titlepage">
<h4 class="title">
<a data-zd-article="UUID-dcf5bf7e-1b56-6f1c-d7fb-6aef7e9f9158" id="idm8105"></a>Beispiel Antwort AdresseKontaktEdit</h4>
</div>
<pre class="programlisting">        <code class="code">&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;response&gt;
   &lt;status&gt;
      &lt;action&gt;AdresseKontaktEdit&lt;/action&gt;
      &lt;message&gt;OK&lt;/message&gt;
      &lt;messageCode&gt;1&lt;/messageCode&gt;
   &lt;/status&gt;   
&lt;/response&gt;
&lt;?xml version="1.0" encoding="UTF-8"?&gt;
  &lt;response&gt;
    &lt;status&gt;
      &lt;action&gt;AdresseKontaktGet&lt;/action&gt;
      &lt;message&gt;OK&lt;/message&gt;
      &lt;messageCode&gt;1&lt;/messageCode&gt;
    &lt;/status&gt;
    &lt;xml&gt;
      &lt;adresse&gt;41&lt;/adresse&gt;
      &lt;bezeichnung&gt;Skype Account&lt;/bezeichnung&gt;
      &lt;kontakt&gt;123456789&lt;/kontakt&gt;
    &lt;/xml&gt;
  &lt;/response&gt;
</code>
      </pre>
<div class="glossary-definitions" style="display:none!important;"></div>
</div>
<div class="glossary-definitions" style="display:none!important;"></div>
</div>
<div dir="ltr" class="section internal sub-topic">
<div class="titlepage">
<h3 class="title">
<a data-zd-article="UUID-dcf5bf7e-1b56-6f1c-d7fb-6aef7e9f9158" id="UUID-dcf5bf7e-1b56-6f1c-d7fb-6aef7e9f9158_id_360017436919_id_toc-53"></a>Anfragen von Belegen (Angebot bis Lieferschein: BelegeList)</h3>
</div>
<p>Um Informationen aus Belegen zu holen, kann die Funktion BelegeList verwendet werden. Tags die für eine Anfrage innerhalb von &lt;order&gt; verwendet werden können: Nur 1 innerhalb von möglich. Erlaubte Sortierkriterien: anabregs_text, anabregs_text_en, artikelkategorie, belegnr, betrag, bezeichnung, datum, land, letztes_datum, menge, name, name_de, name_en, nummer, ort, plz, preis, status, strasse, telefax, telefon</p>
<p>&lt;desc&gt; 1 oder 0 möglich, um die Sortierung aufsteigend oder absteigend zu gestalten</p>
<p>Tags die für eine Anfrage unterhalb von &lt;order&gt; verwendet werden können, um die Suche nach bestimmten Elementen einzugrenzen:</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc;">
<li class="listitem">
<p>&lt;beleg&gt; Folgende Belege sind möglich: auftrag, rechnung, angebot, lieferschein, gutschrift, retoure</p>
</li>
<li class="listitem">
<p>&lt;addresse&gt; ID der gewünschten Adresse, von der Belege angezeigt werden soll</p>
</li>
<li class="listitem">
<p>&lt;datum_von&gt; Datum, ab dem die Belege gewählt werden sollen</p>
</li>
<li class="listitem">
<p>&lt;datum_bis&gt; Datum, bis die Belege gewählt werden sollen</p>
</li>
<li class="listitem">
<p>&lt;groupbyartikel&gt; 1 oder 0, um nach Artikel zu gruppieren oder nicht</p>
</li>
<li class="listitem">
<p>&lt;groupbyadresse&gt; 1 oder 0, um nach Adressen zu gruppieren oder nicht</p>
</li>
<li class="listitem">
<p>&lt;groupbyposition&gt; 1 oder 0, um nach Positionen zu gruppieren oder nicht</p>
</li>
<li class="listitem">
<p>&lt;kategorie&gt; ID der Artikelkategorie</p>
</li>
<li class="listitem">
<p>&lt;kategoriename&gt; Name der Artikelkategorie</p>
</li>
<li class="listitem">
<p>&lt;limit&gt; Zahl angeben, um die Ausgabe der Belege zu limitieren, z.B. &lt;limit&gt;10&lt;/limit&gt; zeigt nur die ersten 10 Belege an</p>
</li>
<li class="listitem">
<p>&lt;offset&gt; Zeigt ab der angegeben Zahl die Belege an, z.B. &lt;offset&gt;10&lt;/offset&gt;, zeigt ab dem 10. Beleg die Belege an</p>
</li>
<li class="listitem">
<p>Status von gewünschten Belegen angeben, wie z.B. freigegeben oder versendet</p>
</li>
</ul>
</div>
<div dir="ltr" class="section internal sub-topic">
<div class="titlepage">
<h4 class="title">
<a data-zd-article="UUID-dcf5bf7e-1b56-6f1c-d7fb-6aef7e9f9158" id="UUID-dcf5bf7e-1b56-6f1c-d7fb-6aef7e9f9158_id_360017436919_id_toc-54"></a>Beispiel Anfrage mit Funktionen 1</h4>
</div>
<pre class="programlisting">        <code class="code">&lt;?php

$hash = generateHash();
$xml = "&lt;order&gt;
          &lt;field&gt;name_de&lt;/field&gt;
          &lt;desc&gt;1&lt;/desc&gt;
        &lt;/order&gt;
        &lt;beleg&gt;rechnung&lt;/beleg&gt;
        &lt;groupbyartikel&gt;1&lt;/groupbyartikel&gt;
        &lt;limit&gt;10&lt;/limit&gt;
        &lt;offset&gt;0&lt;/offset&gt;";

$output_xml = SendRequest("BelegeList",$xml,$hash); 

function generateHash()
{
    
    $initKey = 'neijfj38734hujfie';
    $remoteDomain = 'http://192.168.0.28';
    $date = gmdate('dmY');
    $hash = "";

    for($i = 0; $i &lt;= 200; $i++) 
        $hash = sha1($hash . $initKey . $remoteDomain . $date);
  
    return $hash;
}

function SendRequest($methodname,$xml,$hash)
{
  $url = 'http://192.168.0.28/wawision/16.3/www/index.php?module=api&amp;action='.$methodname.'&amp;hash='.$hash;

  $xml = '&lt;?xml version="1.0" encoding="UTF-8"?&gt;
  &lt;request&gt;
    &lt;status&gt;
      &lt;function&gt;'.$methodname.'&lt;/function&gt;
    &lt;/status&gt;
    &lt;xml&gt;'.$xml.'&lt;/xml&gt;
  &lt;/request&gt;';

  $data = array('xml' =&gt; $xml, 'md5sum' =&gt; md5($xml));

  // use key 'http' even if you send the request to https://...
  $options = array(
    'http' =&gt; array(
        'header'  =&gt; "Content-type: application/x-www-form-urlencoded\r\n",
        'method'  =&gt; 'POST',
        'content' =&gt; http_build_query($data),
    ),
  );
  $context  = stream_context_create($options);
  $result = file_get_contents($url, false, $context);
  return $result;
}

?&gt;
</code>
      </pre>
<div class="glossary-definitions" style="display:none!important;"></div>
</div>
<div dir="ltr" class="section internal sub-topic">
<div class="titlepage">
<h4 class="title">
<a data-zd-article="UUID-dcf5bf7e-1b56-6f1c-d7fb-6aef7e9f9158" id="UUID-dcf5bf7e-1b56-6f1c-d7fb-6aef7e9f9158_id_360017436919_id_toc-55"></a>Beispiel Antwort nach Anfrage 1</h4>
</div>
<pre class="programlisting">        <code class="code">  &lt;response&gt;
    &lt;status&gt;
      &lt;action&gt;BelegeList&lt;/action&gt;
      &lt;message&gt;OK&lt;/message&gt;
      &lt;messageCode&gt;1&lt;/messageCode&gt;
    &lt;/status&gt;
     
    &lt;xml&gt;
      &lt;artikel_list&gt;
        &lt;artikel&gt;
          &lt;id&gt;
            &lt;value&gt;1&lt;/value&gt;
          &lt;/id&gt;
          &lt;nummer&gt;
            &lt;value&gt;700001&lt;/value&gt;
          &lt;/nummer&gt;
          &lt;name_de&gt;
            &lt;value&gt;Apfelmus&lt;/value&gt;
          &lt;/name_de&gt;
          &lt;menge&gt;
            &lt;value&gt;3&lt;/value&gt;
          &lt;/menge&gt;
          &lt;betrag&gt;
            &lt;value&gt;2,50&lt;/value&gt;
          &lt;/betrag&gt;
          &lt;artikelkategorie&gt;
            &lt;value&gt;produkt&lt;/value&gt;
          &lt;/artikelkategorie&gt;
          &lt;letztes_datum&gt;
            &lt;value&gt;2016-10-19&lt;/value&gt;
          &lt;/letztes_datum&gt;
          &lt;artikelkategoriebezeichnung&gt;
            &lt;value /&gt;
          &lt;/artikelkategoriebezeichnung&gt;
        &lt;/artikel&gt;
        
        &lt;anz_gesamt&gt;1&lt;/anz_gesamt&gt;
        &lt;anz_result&gt;1&lt;/anz_result&gt;
      &lt;/artikel_list&gt;
    &lt;/xml&gt;
  &lt;/response&gt;
</code>
      </pre>
<div class="glossary-definitions" style="display:none!important;"></div>
</div>
<div dir="ltr" class="section internal sub-topic">
<div class="titlepage">
<h4 class="title">
<a data-zd-article="UUID-dcf5bf7e-1b56-6f1c-d7fb-6aef7e9f9158" id="UUID-dcf5bf7e-1b56-6f1c-d7fb-6aef7e9f9158_id_360017436919_id_toc-56"></a>Beispiel Belege Anfrage nach Artikel Eingabe 2</h4>
</div>
<pre class="programlisting">        <code class="code">&lt;order&gt;
  &lt;field&gt;name_de&lt;/field&gt;
  &lt;desc&gt;1&lt;/desc&gt;
&lt;/order&gt;
&lt;beleg&gt;rechnung&lt;/beleg&gt;
&lt;groupbyartikel&gt;1&lt;/groupbyartikel&gt;
&lt;limit&gt;10&lt;/limit&gt;
&lt;offset&gt;0&lt;/offset&gt;</code>
      </pre>
<div class="glossary-definitions" style="display:none!important;"></div>
</div>
<div dir="ltr" class="section internal sub-topic">
<div class="titlepage">
<h4 class="title">
<a data-zd-article="UUID-dcf5bf7e-1b56-6f1c-d7fb-6aef7e9f9158" id="idm8151"></a>Antwort auf Anfrage 2</h4>
</div>
<pre class="programlisting">        <code class="code">&lt;response&gt;
  &lt;status&gt;
    &lt;action&gt;BelegeList&lt;/action&gt;
    &lt;message&gt;OK&lt;/message&gt;
    &lt;messageCode&gt;1&lt;/messageCode&gt;
  &lt;/status&gt;
  &lt;xml&gt;
    &lt;artikel_list&gt;
      &lt;artikel&gt;
        &lt;id&gt;
          &lt;value&gt;29549&lt;/value&gt;
        &lt;/id&gt;
        &lt;nummer&gt;
          &lt;value&gt;6450823&lt;/value&gt;
        &lt;/nummer&gt;
        &lt;name_de&gt;
          &lt;value&gt;Testartoleö&lt;/value&gt;
        &lt;/name_de&gt;
        &lt;menge&gt;
          &lt;value&gt;1&lt;/value&gt;
        &lt;/menge&gt;
        &lt;betrag&gt;
          &lt;value&gt;0&lt;/value&gt;
        &lt;/betrag&gt;
        &lt;artikelkategorie&gt;
          &lt;value&gt;1289_kat&lt;/value&gt;
        &lt;/artikelkategorie&gt;
        &lt;letztes_datum&gt;
          &lt;value&gt;2016-04-26&lt;/value&gt;
        &lt;/letztes_datum&gt;
        &lt;artikelkategoriebezeichnung&gt;
          &lt;value&gt;Testkategorie&lt;/value&gt;
        &lt;/artikelkategoriebezeichnung&gt;
      &lt;/artikel&gt;
      &lt;artikel&gt;
        &lt;id&gt;
          &lt;value&gt;1388&lt;/value&gt;
        &lt;/id&gt;
        &lt;nummer&gt;
          &lt;value&gt;123456&lt;/value&gt;
        &lt;/nummer&gt;
        &lt;name_de&gt;
          &lt;value&gt;Akkuschrauber&lt;/value&gt;
        &lt;/name_de&gt;
        &lt;menge&gt;
          &lt;value&gt;1&lt;/value&gt;
        &lt;/menge&gt;
        &lt;betrag&gt;
          &lt;value&gt;94.0252&lt;/value&gt;
        &lt;/betrag&gt;
        &lt;artikelkategorie&gt;
          &lt;value&gt;produkt&lt;/value&gt;
        &lt;/artikelkategorie&gt;
        &lt;letztes_datum&gt;
          &lt;value&gt;2016-10-25&lt;/value&gt;
        &lt;/letztes_datum&gt;
        &lt;artikelkategoriebezeichnung&gt;
          &lt;value/&gt;
        &lt;/artikelkategoriebezeichnung&gt;
      &lt;/artikel&gt;
      &lt;artikel&gt;
      ..
      &lt;/artikel&gt;
      &lt;anz_gesamt&gt;365&lt;/anz_gesamt&gt;
      &lt;anz_result&gt;30&lt;/anz_result&gt;
    &lt;/artikel_list&gt;
  &lt;/xml&gt;
&lt;/response&gt;</code>
      </pre>
<div class="glossary-definitions" style="display:none!important;"></div>
</div>
<div dir="ltr" class="section internal sub-topic">
<div class="titlepage">
<h4 class="title">
<a data-zd-article="UUID-dcf5bf7e-1b56-6f1c-d7fb-6aef7e9f9158" id="UUID-dcf5bf7e-1b56-6f1c-d7fb-6aef7e9f9158_id_360017436919_id_toc-57"></a>Beispiel: Positionen für einen Lieferschein anhand der Belegnr</h4>
</div>
<pre class="programlisting">        <code class="code">$input_xml = '&lt;beleg&gt;lieferschein&lt;/beleg&gt;
&lt;search&gt;
&lt;field&gt;belegnr&lt;/field&gt;
&lt;suche&gt;'.base64_encode(300080).'&lt;/suche&gt;
&lt;exakt&gt;1&lt;/exakt&gt;
&lt;/search&gt;';
$xml = SendRequest($url,"BelegeList",$input_xml,$hash,"", $api_id);</code>
      </pre>
<div class="glossary-definitions" style="display:none!important;"></div>
</div>
<div dir="ltr" class="section internal sub-topic">
<div class="titlepage">
<h4 class="title">
<a data-zd-article="UUID-dcf5bf7e-1b56-6f1c-d7fb-6aef7e9f9158" id="idm8159"></a>Antwort</h4>
</div>
<pre class="programlisting">        <code class="code">&lt;response&gt;
  &lt;status&gt;
    &lt;action&gt;BelegeList&lt;/action&gt;
    &lt;message&gt;OK&lt;/message&gt;
    &lt;messageCode&gt;1&lt;/messageCode&gt;
  &lt;/status&gt;
  &lt;xml&gt;
    &lt;beleg_list&gt;
      &lt;lieferschein&gt;
        &lt;belegid&gt;
          &lt;value&gt;125&lt;/value&gt;
        &lt;/belegid&gt;
        &lt;datum&gt;
          &lt;value&gt;2016-10-27&lt;/value&gt;
        &lt;/datum&gt;
        &lt;belegnr&gt;
          &lt;value&gt;300080&lt;/value&gt;
        &lt;/belegnr&gt;
        &lt;status&gt;
          &lt;value&gt;versendet&lt;/value&gt;
        &lt;/status&gt;
        &lt;adresse&gt;
          &lt;value&gt;655&lt;/value&gt;
        &lt;/adresse&gt;
        &lt;name&gt;
          &lt;value&gt;TEST KUNDE&lt;/value&gt;
        &lt;/name&gt;
        &lt;position&gt;
          &lt;beleg&gt;
            &lt;value&gt;lieferschein&lt;/value&gt;
          &lt;/beleg&gt;
          &lt;adresse&gt;
            &lt;value&gt;655&lt;/value&gt;
          &lt;/adresse&gt;
          &lt;name&gt;
            &lt;value&gt;TEST KUNDE&lt;/value&gt;
          &lt;/name&gt;
          &lt;datum&gt;
            &lt;value&gt;2016-10-27&lt;/value&gt;
          &lt;/datum&gt;
          &lt;belegnr&gt;
            &lt;value&gt;300080&lt;/value&gt;
          &lt;/belegnr&gt;
          &lt;belegid&gt;
            &lt;value&gt;125&lt;/value&gt;
          &lt;/belegid&gt;
          &lt;id&gt;
            &lt;value&gt;178&lt;/value&gt;
          &lt;/id&gt;
          &lt;lieferschein&gt;
            &lt;value&gt;125&lt;/value&gt;
          &lt;/lieferschein&gt;
          &lt;artikel&gt;
            &lt;value&gt;36370&lt;/value&gt;
          &lt;/artikel&gt;
          &lt;projekt&gt;
            &lt;value&gt;1&lt;/value&gt;
          &lt;/projekt&gt;
          &lt;bezeichnung&gt;
            &lt;value&gt;Artikelname&lt;/value&gt;
          &lt;/bezeichnung&gt;
          &lt;beschreibung&gt;
            &lt;value&gt;foobar&lt;/value&gt;
          &lt;/beschreibung&gt;
          &lt;internerkommentar&gt;
            &lt;value/&gt;
          &lt;/internerkommentar&gt;
          &lt;nummer&gt;
            &lt;value&gt;A123&lt;/value&gt;
          &lt;/nummer&gt;
          &lt;seriennummer&gt;
            &lt;value&gt;100002&lt;/value&gt;
          &lt;/seriennummer&gt;
          &lt;menge&gt;
            &lt;value&gt;2&lt;/value&gt;
          &lt;/menge&gt;
          &lt;lieferdatum&gt;
            &lt;value&gt;0000-00-00&lt;/value&gt;
          &lt;/lieferdatum&gt;
          &lt;vpe&gt;
            &lt;value&gt;1&lt;/value&gt;
          &lt;/vpe&gt;
          &lt;sort&gt;
            &lt;value&gt;1&lt;/value&gt;
          &lt;/sort&gt;
          &lt;status&gt;
            &lt;value&gt;versendet&lt;/value&gt;
          &lt;/status&gt;
          &lt;bemerkung&gt;
            &lt;value/&gt;
          &lt;/bemerkung&gt;
          &lt;geliefert&gt;
            &lt;value&gt;2&lt;/value&gt;
          &lt;/geliefert&gt;
          &lt;abgerechnet&gt;
            &lt;value&gt;0&lt;/value&gt;
          &lt;/abgerechnet&gt;
          &lt;logdatei&gt;
            &lt;value&gt;2016-10-27 09:23:59&lt;/value&gt;
          &lt;/logdatei&gt;
          &lt;explodiert_parent_artikel&gt;
            &lt;value&gt;0&lt;/value&gt;
          &lt;/explodiert_parent_artikel&gt;
          &lt;einheit&gt;
            &lt;value/&gt;
          &lt;/einheit&gt;
          &lt;zolltarifnummer&gt;
            &lt;value/&gt;
          &lt;/zolltarifnummer&gt;
          &lt;herkunftsland&gt;
            &lt;value&gt;DE&lt;/value&gt;
          &lt;/herkunftsland&gt;
          &lt;artikelnummerkunde&gt;
            &lt;value/&gt;
          &lt;/artikelnummerkunde&gt;
          &lt;lieferdatumkw&gt;
            &lt;value&gt;0&lt;/value&gt;
          &lt;/lieferdatumkw&gt;
          &lt;auftrag_position_id&gt;
            &lt;value&gt;1734&lt;/value&gt;
          &lt;/auftrag_position_id&gt;
          &lt;lagertext&gt;
            &lt;value/&gt;
          &lt;/lagertext&gt;
          &lt;kostenlos&gt;
            &lt;value&gt;0&lt;/value&gt;
          &lt;/kostenlos&gt;
          &lt;teilprojekt&gt;
            &lt;value&gt;0&lt;/value&gt;
          &lt;/teilprojekt&gt;
          &lt;freifeld1&gt;
            &lt;value/&gt;
          &lt;/freifeld1&gt;
          &lt;freifeld2&gt;
            &lt;value/&gt;
          &lt;/freifeld2&gt;
          &lt;freifeld3&gt;
            &lt;value/&gt;
          &lt;/freifeld3&gt;
          &lt;freifeld4&gt;
            &lt;value/&gt;
          &lt;/freifeld4&gt;
          &lt;freifeld5&gt;
            &lt;value/&gt;
          &lt;/freifeld5&gt;
          &lt;freifeld6&gt;
            &lt;value/&gt;
          &lt;/freifeld6&gt;
          &lt;freifeld7&gt;
            &lt;value/&gt;
          &lt;/freifeld7&gt;
          &lt;freifeld8&gt;
            &lt;value/&gt;
          &lt;/freifeld8&gt;
          &lt;freifeld9&gt;
            &lt;value/&gt;
          &lt;/freifeld9&gt;
          &lt;freifeld10&gt;
            &lt;value/&gt;
          &lt;/freifeld10&gt;
          &lt;explodiert_parent&gt;
            &lt;value&gt;0&lt;/value&gt;
          &lt;/explodiert_parent&gt;
          &lt;artikelkategorie&gt;
            &lt;value&gt;1331_kat&lt;/value&gt;
          &lt;/artikelkategorie&gt;
          &lt;preis&gt;
            &lt;value&gt;0&lt;/value&gt;
          &lt;/preis&gt;
        &lt;/position&gt;
      &lt;/lieferschein&gt;
      &lt;anz_gesamt&gt;1&lt;/anz_gesamt&gt;
      &lt;anz_result&gt;1&lt;/anz_result&gt;
    &lt;/beleg_list&gt;
  &lt;/xml&gt;
&lt;/response&gt;</code>
      </pre>
<div class="glossary-definitions" style="display:none!important;"></div>
</div>
<div class="glossary-definitions" style="display:none!important;"></div>
</div>
<div dir="ltr" class="section internal sub-topic">
<div class="titlepage">
<h3 class="title">
<a data-zd-article="UUID-dcf5bf7e-1b56-6f1c-d7fb-6aef7e9f9158" id="UUID-dcf5bf7e-1b56-6f1c-d7fb-6aef7e9f9158_id_360017436919_id_h_01F1CJB4VH1452K51E4736P3WF"></a>Abfrage von Umsätzen: AdresseListeGet</h3>
</div>
<p>Mit AdresseListeGet können Kunden ausgegeben werden, die z.B. innerhalb eines bestimmten Zeitraums eine bestimmte Menge Umsatz erzeugt haben.</p>
<p>Die Abfrage der Kunden können mit einigen Parametern eingegrenzt werden:</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc;">
<li class="listitem">
<p>&lt;order&gt; beinhaltet das Tag &lt;field&gt;. Dadurch wird Ihr Ergebnis nach dem Feld in &lt;field&gt;  sortiert</p>
</li>
<li class="listitem">
<p>&lt;field&gt; steht innerhalb von &lt;order&gt; und kann verschiedene Filter beinhalten, wie z.B. &lt;field&gt;name&lt;/field&gt;. Möglich sind: gruppenname, kennziffer, name, plz, ort, telefon, telefax, ansprechpartner, typ, strasse, land, email, kundennummer, lieferantennummer</p>
</li>
<li class="listitem">
<p>&lt;desc&gt; steht innerhalb von &lt;order&gt;. Wird eine 1 gesetzt, wird Ihr Ergebnis absteigend nach Ihrer Angabe von &lt;field&gt; sortiert. Bei einer 0 das selbe aufsteigend</p>
</li>
<li class="listitem">
<p>&lt;limit&gt; limitiert das Ergebnis Ihrer Abfrage auf Ihre festgelegte Zahl, z.B. &lt;limit&gt;10&lt;/limit&gt; zeigt nur die ersten 10 Belege an</p>
</li>
<li class="listitem">
<p>&lt;offset&gt; zeigt ab der angegeben Zahl die Belege an, z.B. &lt;offset&gt;10&lt;/offset&gt;, zeigt ab dem 10. Beleg die Belege an</p>
</li>
<li class="listitem">
<p>&lt;kategorie&gt; Hier muss die Kategorien-ID angegeben werden. Wenn ein Beleg einen Artikel aus dieser Artikelkategorie enthält wird der Gesamtumsatz angezeigt</p>
</li>
<li class="listitem">
<p>&lt;vertrieb&gt; Hier muss die ID des Vertriebsmitarbeiters angegeben werden. Die Umsätze dieser Belege mit diesem Vertriebsmitarbeiter werden summiert</p>
</li>
<li class="listitem">
<p>&lt;summierung&gt; beinhaltet die verschiedenen Tags der Belegarten, deren Umsätze summiert werden sollen. Möglich sind:</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: circle;">
<li class="listitem">
<p>&lt;rechnung&gt;</p>
</li>
<li class="listitem">
<p>&lt;gutschrift&gt;</p>
</li>
<li class="listitem">
<p>&lt;bestellung&gt;</p>
</li>
<li class="listitem">
<p>&lt;auftrag&gt;</p>
</li>
<li class="listitem">
<p>&lt;angebot&gt;</p>
</li>
</ul>
</div>
</li>
<li class="listitem">
<p>&lt;umsatzvon&gt; gibt den Mindestumsatz an der vorhanden sein muss</p>
</li>
<li class="listitem">
<p>&lt;status&gt; Hier kann der Status angegeben werden, die die Belege erfüllen müssen. Wird kein &lt;status&gt; angegeben, werden stornierte und angelegte Belege nicht mit einbezogen</p>
</li>
<li class="listitem">
<p>&lt;datumvon&gt; Ab diesem Datum werden die Belege berücksichtigt</p>
</li>
<li class="listitem">
<p>&lt;datumbis&gt; Bis zu diesem Datum werden die Belege berücksichtigt</p>
</li>
<li class="listitem">
<p>&lt;searchmode&gt; Hier kann AND oder OR angegeben werden, um die einzelnen Bedingungen zu verknüpfen. Wird nichts angegeben, wird AND verwendet</p>
</li>
<li class="listitem">
<p>&lt;exakt&gt; Hier muss 1 oder 0 angegeben werden, ob die Bedingungen bei LIKE von % umschlossen werden sollen oder nicht. 1 bedeutet mit % (z.B. LIKE %Bedingung%), 0 bedeutet ohne (z.B. LIKE Bedingung)</p>
</li>
<li class="listitem">
<p>&lt;search&gt; beinhaltet die Tags &lt;suche&gt; und &lt;field&gt;. In &lt;suche&gt; muss mit base64_encode() der Wert übergeben werden, nachdem gesucht werden soll, wie z.B. einem spezifischen Kundennamen (&lt;suche&gt;.base64_encode('Testname').&lt;/suche&gt;). Mit &lt;field&gt; wird dann das Datenbankfeld aus der Adresstabelle genannt, in dem der Begriff aus &lt;suche&gt; gesucht werden soll (&lt;field&gt;name&lt;/field&gt;)</p>
</li>
<li class="listitem">
<p>&lt;id&gt; Mit Angabe der Adress-ID kann die Abfrage auf diese Adresse beschränkt werden</p>
</li>
</ul>
</div>
<div dir="ltr" class="section internal sub-topic">
<div class="titlepage">
<h4 class="title">
<a data-zd-article="UUID-dcf5bf7e-1b56-6f1c-d7fb-6aef7e9f9158" id="UUID-dcf5bf7e-1b56-6f1c-d7fb-6aef7e9f9158_id_360017436919_id_toc-58"></a>Beispiel 1 Anfrage AdresseListeGet mit Funktionen</h4>
</div>
<pre class="programlisting">        <code class="code">$input_xml = "
&lt;order&gt;
  &lt;field&gt;name&lt;/field&gt;&lt;desc&gt;0&lt;/desc&gt;
&lt;/order&gt;
&lt;limit&gt;10&lt;/limit&gt;
&lt;offset&gt;0&lt;/offset&gt;
&lt;summierung&gt;    
  &lt;beleg&gt;rechnung&lt;/beleg&gt;
  &lt;beleg&gt;gutschrift&lt;/beleg&gt;
&lt;/summierung&gt;
&lt;umsatzvon&gt;100&lt;/umsatzvon&gt;
&lt;datumbis&gt;2016-09-08&lt;/datumbis&gt;
&lt;datumvon&gt;2015-03-08&lt;/datumvon&gt;
";
$xml = SendRequest($url,"AdresseListeGet",$input_xml,$hash,"", $api_id);
</code>
      </pre>
<div class="glossary-definitions" style="display:none!important;"></div>
</div>
<div dir="ltr" class="section internal sub-topic">
<div class="titlepage">
<h4 class="title">
<a data-zd-article="UUID-dcf5bf7e-1b56-6f1c-d7fb-6aef7e9f9158" id="UUID-dcf5bf7e-1b56-6f1c-d7fb-6aef7e9f9158_id_360017436919_id_toc-59"></a>Beispiel 1 Antwort AdresseListeGet</h4>
</div>
<pre class="programlisting">        <code class="code">&lt;response&gt;
  &lt;status&gt;
    &lt;action&gt;AdresseListeGet&lt;/action&gt;
    &lt;message&gt;OK&lt;/message&gt;
    &lt;messageCode&gt;1&lt;/messageCode&gt;
  &lt;/status&gt;
  &lt;xml&gt;
    &lt;adressen&gt;
      &lt;adresse&gt;
        &lt;id&gt;
          &lt;value&gt;1085&lt;/value&gt;
        &lt;/id&gt;
        &lt;typ/&gt;
        &lt;marketingsperre/&gt;
        &lt;trackingsperre&gt;
          &lt;value&gt;0&lt;/value&gt;
        &lt;/trackingsperre&gt;
        &lt;rechnungsadresse&gt;
          &lt;value&gt;0&lt;/value&gt;
        &lt;/rechnungsadresse&gt;
        &lt;sprache/&gt;
        &lt;name&gt;
          &lt;value&gt;Testkunde&lt;/value&gt;
        &lt;/name&gt;
        &lt;abteilung/&gt;
        &lt;unterabteilung/&gt;
        &lt;ansprechpartner/&gt;
        &lt;land&gt;
          &lt;value&gt;DE&lt;/value&gt;
        &lt;/land&gt;
        &lt;strasse&gt;
          &lt;value&gt;Musterstr. 1&lt;/value&gt;
        &lt;/strasse&gt;
        &lt;ort&gt;
          &lt;value&gt;Musterstadt&lt;/value&gt;
        &lt;/ort&gt;
        &lt;plz&gt;
          &lt;value&gt;12345&lt;/value&gt;
        &lt;/plz&gt;
        &lt;telefon/&gt;
        &lt;telefax/&gt;
        &lt;mobil/&gt;
        &lt;email&gt;
          &lt;value&gt;email@example.com&lt;/value&gt;
        &lt;/email&gt;
        &lt;ustid/&gt;
        &lt;ust_befreit&gt;
          &lt;value&gt;0&lt;/value&gt;
        &lt;/ust_befreit&gt;
        &lt;passwort_gesendet&gt;
          &lt;value&gt;0&lt;/value&gt;
        &lt;/passwort_gesendet&gt;
        &lt;sonstiges/&gt;
        &lt;adresszusatz/&gt;
        &lt;kundenfreigabe&gt;
          &lt;value&gt;0&lt;/value&gt;
        &lt;/kundenfreigabe&gt;
        &lt;steuer/&gt;
        &lt;logdatei&gt;
          &lt;value&gt;2016-09-23 12:01:26&lt;/value&gt;
        &lt;/logdatei&gt;
        &lt;kundennummer&gt;
          &lt;value&gt;10476&lt;/value&gt;
        &lt;/kundennummer&gt;
        &lt;lieferantennummer/&gt;
        &lt;mitarbeiternummer/&gt;
        &lt;konto/&gt;
        &lt;blz/&gt;
        &lt;bank/&gt;
        &lt;inhaber/&gt;
        &lt;swift/&gt;
        &lt;iban/&gt;
        &lt;waehrung/&gt;
        &lt;paypal/&gt;
        &lt;paypalinhaber/&gt;
        &lt;paypalwaehrung/&gt;
        &lt;projekt&gt;
          &lt;value&gt;1&lt;/value&gt;
        &lt;/projekt&gt;
        &lt;partner&gt;
          &lt;value&gt;0&lt;/value&gt;
        &lt;/partner&gt;
        &lt;zahlungsweise/&gt;
        &lt;zahlungszieltage/&gt;
        &lt;zahlungszieltageskonto/&gt;
        &lt;zahlungszielskonto/&gt;
        &lt;versandart/&gt;
        &lt;kundennummerlieferant/&gt;
        &lt;zahlungsweiselieferant/&gt;
        &lt;zahlungszieltagelieferant/&gt;
        &lt;zahlungszieltageskontolieferant/&gt;
        &lt;zahlungszielskontolieferant/&gt;
        &lt;versandartlieferant/&gt;
        &lt;geloescht&gt;
          &lt;value&gt;0&lt;/value&gt;
        &lt;/geloescht&gt;
        &lt;firma&gt;
          &lt;value&gt;1&lt;/value&gt;
        &lt;/firma&gt;
        &lt;webid/&gt;
        &lt;vorname/&gt;
        &lt;kennung/&gt;
        &lt;sachkonto/&gt;
        &lt;freifeld1/&gt;
        &lt;freifeld2/&gt;
        &lt;freifeld3/&gt;
        &lt;filiale/&gt;
        &lt;vertrieb/&gt;
        &lt;innendienst/&gt;
        &lt;verbandsnummer/&gt;
        &lt;abweichendeemailab/&gt;
        &lt;portofrei_aktiv/&gt;
        &lt;portofreiab&gt;
          &lt;value&gt;0.00&lt;/value&gt;
        &lt;/portofreiab&gt;
        &lt;infoauftragserfassung/&gt;
        &lt;mandatsreferenz/&gt;
        &lt;mandatsreferenzdatum/&gt;
        &lt;mandatsreferenzaenderung&gt;
          &lt;value&gt;0&lt;/value&gt;
        &lt;/mandatsreferenzaenderung&gt;
        &lt;glaeubigeridentnr/&gt;
        &lt;kreditlimit&gt;
          &lt;value&gt;0.00&lt;/value&gt;
        &lt;/kreditlimit&gt;
        &lt;tour&gt;
          &lt;value&gt;0&lt;/value&gt;
        &lt;/tour&gt;
        &lt;zahlungskonditionen_festschreiben/&gt;
        &lt;rabatte_festschreiben/&gt;
        &lt;mlmaktiv/&gt;
        &lt;mlmvertragsbeginn/&gt;
        &lt;mlmlizenzgebuehrbis/&gt;
        &lt;mlmfestsetzenbis/&gt;
        &lt;mlmfestsetzen&gt;
          &lt;value&gt;0&lt;/value&gt;
        &lt;/mlmfestsetzen&gt;
        &lt;mlmmindestpunkte&gt;
          &lt;value&gt;0&lt;/value&gt;
        &lt;/mlmmindestpunkte&gt;
        &lt;mlmwartekonto&gt;
          &lt;value&gt;0.00&lt;/value&gt;
        &lt;/mlmwartekonto&gt;
        &lt;abweichende_rechnungsadresse&gt;
          &lt;value&gt;0&lt;/value&gt;
        &lt;/abweichende_rechnungsadresse&gt;
        &lt;rechnung_vorname/&gt;
        &lt;rechnung_name/&gt;
        &lt;rechnung_titel/&gt;
        &lt;rechnung_typ/&gt;
        &lt;rechnung_strasse/&gt;
        &lt;rechnung_ort/&gt;
        &lt;rechnung_plz/&gt;
        &lt;rechnung_ansprechpartner/&gt;
        &lt;rechnung_land/&gt;
        &lt;rechnung_abteilung/&gt;
        &lt;rechnung_unterabteilung/&gt;
        &lt;rechnung_adresszusatz/&gt;
        &lt;rechnung_telefon/&gt;
        &lt;rechnung_telefax/&gt;
        &lt;rechnung_anschreiben/&gt;
        &lt;rechnung_email/&gt;
        &lt;geburtstag/&gt;
        &lt;rolledatum/&gt;
        &lt;liefersperre/&gt;
        &lt;liefersperregrund/&gt;
        &lt;mlmpositionierung/&gt;
        &lt;steuernummer/&gt;
        &lt;steuerbefreit/&gt;
        &lt;mlmmitmwst/&gt;
        &lt;mlmabrechnung/&gt;
        &lt;mlmwaehrungauszahlung/&gt;
        &lt;mlmauszahlungprojekt&gt;
          &lt;value&gt;0&lt;/value&gt;
        &lt;/mlmauszahlungprojekt&gt;
        &lt;sponsor/&gt;
        &lt;geworbenvon/&gt;
        &lt;logfile/&gt;
        &lt;kalender_aufgaben/&gt;
        &lt;verrechnungskontoreisekosten&gt;
          &lt;value&gt;0&lt;/value&gt;
        &lt;/verrechnungskontoreisekosten&gt;
        &lt;usereditid/&gt;
        &lt;useredittimestamp&gt;
          &lt;value&gt;0000-00-00 00:00:00&lt;/value&gt;
        &lt;/useredittimestamp&gt;
        &lt;rabatt/&gt;
        &lt;provision/&gt;
        &lt;rabattinformation/&gt;
        &lt;rabatt1/&gt;
        &lt;rabatt2/&gt;
        &lt;rabatt3/&gt;
        &lt;rabatt4/&gt;
        &lt;rabatt5/&gt;
        &lt;internetseite/&gt;
        &lt;bonus1/&gt;
        &lt;bonus1_ab/&gt;
        &lt;bonus2/&gt;
        &lt;bonus2_ab/&gt;
        &lt;bonus3/&gt;
        &lt;bonus3_ab/&gt;
        &lt;bonus4/&gt;
        &lt;bonus4_ab/&gt;
        &lt;bonus5/&gt;
        &lt;bonus5_ab/&gt;
        &lt;bonus6/&gt;
        &lt;bonus6_ab/&gt;
        &lt;bonus7/&gt;
        &lt;bonus7_ab/&gt;
        &lt;bonus8/&gt;
        &lt;bonus8_ab/&gt;
        &lt;bonus9/&gt;
        &lt;bonus9_ab/&gt;
        &lt;bonus10/&gt;
        &lt;bonus10_ab/&gt;
        &lt;rechnung_periode/&gt;
        &lt;rechnung_anzahlpapier/&gt;
        &lt;rechnung_permail/&gt;
        &lt;titel/&gt;
        &lt;anschreiben/&gt;
        &lt;nachname/&gt;
        &lt;arbeitszeitprowoche&gt;
          &lt;value&gt;0.00&lt;/value&gt;
        &lt;/arbeitszeitprowoche&gt;
        &lt;folgebestaetigungsperre&gt;
          &lt;value&gt;0&lt;/value&gt;
        &lt;/folgebestaetigungsperre&gt;
        &lt;verein_mitglied_seit/&gt;
        &lt;verein_mitglied_bis/&gt;
        &lt;verein_mitglied_aktiv/&gt;
        &lt;verein_spendenbescheinigung&gt;
          &lt;value&gt;0&lt;/value&gt;
        &lt;/verein_spendenbescheinigung&gt;
        &lt;freifeld4/&gt;
        &lt;freifeld5/&gt;
        &lt;freifeld6/&gt;
        &lt;freifeld7/&gt;
        &lt;freifeld8/&gt;
        &lt;freifeld9/&gt;
        &lt;freifeld10/&gt;
        &lt;rechnung_papier&gt;
          &lt;value&gt;0&lt;/value&gt;
        &lt;/rechnung_papier&gt;
        &lt;angebot_cc/&gt;
        &lt;auftrag_cc/&gt;
        &lt;rechnung_cc/&gt;
        &lt;gutschrift_cc/&gt;
        &lt;lieferschein_cc/&gt;
        &lt;bestellung_cc/&gt;
        &lt;angebot_fax_cc/&gt;
        &lt;auftrag_fax_cc/&gt;
        &lt;rechnung_fax_cc/&gt;
        &lt;gutschrift_fax_cc/&gt;
        &lt;lieferschein_fax_cc/&gt;
        &lt;bestellung_fax_cc/&gt;
        &lt;abperfax&gt;
          &lt;value&gt;0&lt;/value&gt;
        &lt;/abperfax&gt;
        &lt;abpermail/&gt;
        &lt;kassiereraktiv&gt;
          &lt;value&gt;0&lt;/value&gt;
        &lt;/kassiereraktiv&gt;
        &lt;kassierernummer/&gt;
        &lt;kassiererprojekt&gt;
          &lt;value&gt;0&lt;/value&gt;
        &lt;/kassiererprojekt&gt;
        &lt;portofreilieferant_aktiv&gt;
          &lt;value&gt;0&lt;/value&gt;
        &lt;/portofreilieferant_aktiv&gt;
        &lt;portofreiablieferant&gt;
          &lt;value&gt;0.00&lt;/value&gt;
        &lt;/portofreiablieferant&gt;
        &lt;mandatsreferenzart/&gt;
        &lt;mandatsreferenzwdhart/&gt;
        &lt;serienbrief&gt;
          &lt;value&gt;0&lt;/value&gt;
        &lt;/serienbrief&gt;
        &lt;lieferantennummerbeikunde/&gt;
        &lt;lead&gt;
          &lt;value&gt;0&lt;/value&gt;
        &lt;/lead&gt;
        &lt;geburtstagkalender&gt;
          &lt;value&gt;0&lt;/value&gt;
        &lt;/geburtstagkalender&gt;
        &lt;zahlungsweiseabo/&gt;
        &lt;bundesland/&gt;
        &lt;liefersperredatum/&gt;
        &lt;mandatsreferenzhinweis/&gt;
        &lt;geburtstagskarte&gt;
          &lt;value&gt;0&lt;/value&gt;
        &lt;/geburtstagskarte&gt;
        &lt;kundennummer_buchhaltung/&gt;
        &lt;lieferantennummer_buchhaltung/&gt;
        &lt;mlmintranetgesamtestruktur&gt;
          &lt;value&gt;0&lt;/value&gt;
        &lt;/mlmintranetgesamtestruktur&gt;
        &lt;rechnung_umsatz_netto&gt;
          &lt;value&gt;1219.24&lt;/value&gt;
        &lt;/rechnung_umsatz_netto&gt;
        &lt;gutschrift_umsatz_netto/&gt;
      &lt;/adresse&gt;
      &lt;adresse&gt;
        ...
      &lt;/adresse&gt;
      &lt;anz_gesamt&gt;6771&lt;/anz_gesamt&gt;
      &lt;anz_result&gt;10&lt;/anz_result&gt;
    &lt;/adressen&gt;
  &lt;/xml&gt;
&lt;/response&gt;
</code>
      </pre>
<div class="glossary-definitions" style="display:none!important;"></div>
</div>
<div dir="ltr" class="section internal sub-topic">
<div class="titlepage">
<h4 class="title">
<a data-zd-article="UUID-dcf5bf7e-1b56-6f1c-d7fb-6aef7e9f9158" id="UUID-dcf5bf7e-1b56-6f1c-d7fb-6aef7e9f9158_id_360017436919_id_toc-60"></a>Beispiel 2 Anfrage AdresseListeGet mit Funktionen</h4>
</div>
<pre class="programlisting">        <code class="code">&lt;?php

$hash = generateHash();

$xml = "&lt;order&gt;
          &lt;field&gt;name&lt;/field&gt;
          &lt;desc&gt;0&lt;/desc&gt;
        &lt;/order&gt;
        &lt;limit&gt;10&lt;/limit&gt;
        &lt;offset&gt;0&lt;/offset&gt;
        &lt;summierung&gt;    
          &lt;beleg&gt;rechnung&lt;/beleg&gt;
        &lt;/summierung&gt;
        &lt;umsatzvon&gt;2800&lt;/umsatzvon&gt;
        &lt;search&gt;
          &lt;suche&gt;".base64_encode('86150')."&lt;/suche&gt;
          &lt;field&gt;plz&lt;/field&gt;
        &lt;/search&gt;        
      ";

$output_xml = SendRequest("AdresseListeGet",$xml,$hash); 

function generateHash()
{
    
    $initKey = 'neijfj38734hujfie';
    $remoteDomain = 'http://192.168.0.28';
    $date = gmdate('dmY');
    $hash = "";

    for($i = 0; $i &lt;= 200; $i++) 
        $hash = sha1($hash . $initKey . $remoteDomain . $date);
  
    return $hash;
}

function SendRequest($methodname,$xml,$hash)
{

  $url = 'http://192.168.0.28/wawision/17.4/www/index.php?module=api&amp;action='.$methodname.'&amp;hash='.$hash;

  $xml = '&lt;?xml version="1.0" encoding="UTF-8"?&gt;
          &lt;request&gt;
            &lt;status&gt;
              &lt;function&gt;'.$methodname.'&lt;/function&gt;
            &lt;/status&gt;
            &lt;xml&gt;'.$xml.'&lt;/xml&gt;
          &lt;/request&gt;';

  $data = array('xml' =&gt; $xml, 'md5sum' =&gt; md5($xml));

  // use key 'http' even if you send the request to https://...
  $options = array(
    'http' =&gt; array(
        'header'  =&gt; "Content-type: application/x-www-form-urlencoded\r\n",
        'method'  =&gt; 'POST',
        'content' =&gt; http_build_query($data),
    ),
  );
  $context  = stream_context_create($options);
  $result = file_get_contents($url, false, $context);
  return $result;
}

$obj = simplexml_load_string($output_xml);
echo "&lt;pre&gt;";
print_r($obj);
echo "&lt;/pre&gt;";

?&gt;
</code>
      </pre>
<div class="glossary-definitions" style="display:none!important;"></div>
</div>
<div dir="ltr" class="section internal sub-topic">
<div class="titlepage">
<h4 class="title">
<a data-zd-article="UUID-dcf5bf7e-1b56-6f1c-d7fb-6aef7e9f9158" id="UUID-dcf5bf7e-1b56-6f1c-d7fb-6aef7e9f9158_id_360017436919_id_toc-61"></a>Beispiel 2 Antwort AdresseListeGet</h4>
</div>
<pre class="programlisting">        <code class="code">&lt;response&gt;
  &lt;status&gt;
    &lt;action&gt;AdresseListeGet&lt;/action&gt;
    &lt;message&gt;OK&lt;/message&gt;
    &lt;messageCode&gt;1&lt;/messageCode&gt;
  &lt;/status&gt;
  &lt;xml&gt;
    &lt;adressen&gt;
      &lt;adresse&gt;
        &lt;id&gt;
          &lt;value&gt;1085&lt;/value&gt;
        &lt;/id&gt;
        &lt;typ/&gt;
        &lt;marketingsperre/&gt;
        &lt;trackingsperre&gt;
          &lt;value&gt;0&lt;/value&gt;
        &lt;/trackingsperre&gt;
        &lt;rechnungsadresse&gt;
          &lt;value&gt;0&lt;/value&gt;
        &lt;/rechnungsadresse&gt;
        &lt;sprache/&gt;
        &lt;name&gt;
          &lt;value&gt;Testkunde&lt;/value&gt;
        &lt;/name&gt;
        &lt;abteilung/&gt;
        &lt;unterabteilung/&gt;
        &lt;ansprechpartner/&gt;
        &lt;land&gt;
          &lt;value&gt;DE&lt;/value&gt;
        &lt;/land&gt;
        &lt;strasse&gt;
          &lt;value&gt;Musterstr. 1&lt;/value&gt;
        &lt;/strasse&gt;
        &lt;ort&gt;
          &lt;value&gt;Musterstadt&lt;/value&gt;
        &lt;/ort&gt;
        &lt;plz&gt;
          &lt;value&gt;86150&lt;/value&gt;
        &lt;/plz&gt;
        &lt;telefon/&gt;
        &lt;telefax/&gt;
        &lt;mobil/&gt;
        &lt;email&gt;
          &lt;value&gt;email@example.com&lt;/value&gt;
        &lt;/email&gt;
        &lt;ustid/&gt;
        &lt;ust_befreit&gt;
          &lt;value&gt;0&lt;/value&gt;
        &lt;/ust_befreit&gt;
        &lt;passwort_gesendet&gt;
          &lt;value&gt;0&lt;/value&gt;
        &lt;/passwort_gesendet&gt;
        &lt;sonstiges/&gt;
        &lt;adresszusatz/&gt;
        &lt;kundenfreigabe&gt;
          &lt;value&gt;0&lt;/value&gt;
        &lt;/kundenfreigabe&gt;
        &lt;steuer/&gt;
        &lt;logdatei&gt;
          &lt;value&gt;2016-09-23 12:01:26&lt;/value&gt;
        &lt;/logdatei&gt;
        &lt;kundennummer&gt;
          &lt;value&gt;10476&lt;/value&gt;
        &lt;/kundennummer&gt;
        &lt;lieferantennummer/&gt;
        &lt;mitarbeiternummer/&gt;
        &lt;konto/&gt;
        &lt;blz/&gt;
        &lt;bank/&gt;
        &lt;inhaber/&gt;
        &lt;swift/&gt;
        &lt;iban/&gt;
        &lt;waehrung/&gt;
        &lt;paypal/&gt;
        &lt;paypalinhaber/&gt;
        &lt;paypalwaehrung/&gt;
        &lt;projekt&gt;
          &lt;value&gt;1&lt;/value&gt;
        &lt;/projekt&gt;
        &lt;partner&gt;
          &lt;value&gt;0&lt;/value&gt;
        &lt;/partner&gt;
        &lt;zahlungsweise/&gt;
        &lt;zahlungszieltage/&gt;
        &lt;zahlungszieltageskonto/&gt;
        &lt;zahlungszielskonto/&gt;
        &lt;versandart/&gt;
        &lt;kundennummerlieferant/&gt;
        &lt;zahlungsweiselieferant/&gt;
        &lt;zahlungszieltagelieferant/&gt;
        &lt;zahlungszieltageskontolieferant/&gt;
        &lt;zahlungszielskontolieferant/&gt;
        &lt;versandartlieferant/&gt;
        &lt;geloescht&gt;
          &lt;value&gt;0&lt;/value&gt;
        &lt;/geloescht&gt;
        &lt;firma&gt;
          &lt;value&gt;1&lt;/value&gt;
        &lt;/firma&gt;
        &lt;webid/&gt;
        &lt;vorname/&gt;
        &lt;kennung/&gt;
        &lt;sachkonto/&gt;
        &lt;freifeld1/&gt;
        &lt;freifeld2/&gt;
        &lt;freifeld3/&gt;
        &lt;filiale/&gt;
        &lt;vertrieb/&gt;
        &lt;innendienst/&gt;
        &lt;verbandsnummer/&gt;
        &lt;abweichendeemailab/&gt;
        &lt;portofrei_aktiv/&gt;
        &lt;portofreiab&gt;
          &lt;value&gt;0.00&lt;/value&gt;
        &lt;/portofreiab&gt;
        &lt;infoauftragserfassung/&gt;
        &lt;mandatsreferenz/&gt;
        &lt;mandatsreferenzdatum/&gt;
        &lt;mandatsreferenzaenderung&gt;
          &lt;value&gt;0&lt;/value&gt;
        &lt;/mandatsreferenzaenderung&gt;
        &lt;glaeubigeridentnr/&gt;
        &lt;kreditlimit&gt;
          &lt;value&gt;0.00&lt;/value&gt;
        &lt;/kreditlimit&gt;
        &lt;tour&gt;
          &lt;value&gt;0&lt;/value&gt;
        &lt;/tour&gt;
        &lt;zahlungskonditionen_festschreiben/&gt;
        &lt;rabatte_festschreiben/&gt;
        &lt;mlmaktiv/&gt;
        &lt;mlmvertragsbeginn/&gt;
        &lt;mlmlizenzgebuehrbis/&gt;
        &lt;mlmfestsetzenbis/&gt;
        &lt;mlmfestsetzen&gt;
          &lt;value&gt;0&lt;/value&gt;
        &lt;/mlmfestsetzen&gt;
        &lt;mlmmindestpunkte&gt;
          &lt;value&gt;0&lt;/value&gt;
        &lt;/mlmmindestpunkte&gt;
        &lt;mlmwartekonto&gt;
          &lt;value&gt;0.00&lt;/value&gt;
        &lt;/mlmwartekonto&gt;
        &lt;abweichende_rechnungsadresse&gt;
          &lt;value&gt;0&lt;/value&gt;
        &lt;/abweichende_rechnungsadresse&gt;
        &lt;rechnung_vorname/&gt;
        &lt;rechnung_name/&gt;
        &lt;rechnung_titel/&gt;
        &lt;rechnung_typ/&gt;
        &lt;rechnung_strasse/&gt;
        &lt;rechnung_ort/&gt;
        &lt;rechnung_plz/&gt;
        &lt;rechnung_ansprechpartner/&gt;
        &lt;rechnung_land/&gt;
        &lt;rechnung_abteilung/&gt;
        &lt;rechnung_unterabteilung/&gt;
        &lt;rechnung_adresszusatz/&gt;
        &lt;rechnung_telefon/&gt;
        &lt;rechnung_telefax/&gt;
        &lt;rechnung_anschreiben/&gt;
        &lt;rechnung_email/&gt;
        &lt;geburtstag/&gt;
        &lt;rolledatum/&gt;
        &lt;liefersperre/&gt;
        &lt;liefersperregrund/&gt;
        &lt;mlmpositionierung/&gt;
        &lt;steuernummer/&gt;
        &lt;steuerbefreit/&gt;
        &lt;mlmmitmwst/&gt;
        &lt;mlmabrechnung/&gt;
        &lt;mlmwaehrungauszahlung/&gt;
        &lt;mlmauszahlungprojekt&gt;
          &lt;value&gt;0&lt;/value&gt;
        &lt;/mlmauszahlungprojekt&gt;
        &lt;sponsor/&gt;
        &lt;geworbenvon/&gt;
        &lt;logfile/&gt;
        &lt;kalender_aufgaben/&gt;
        &lt;verrechnungskontoreisekosten&gt;
          &lt;value&gt;0&lt;/value&gt;
        &lt;/verrechnungskontoreisekosten&gt;
        &lt;usereditid/&gt;
        &lt;useredittimestamp&gt;
          &lt;value&gt;0000-00-00 00:00:00&lt;/value&gt;
        &lt;/useredittimestamp&gt;
        &lt;rabatt/&gt;
        &lt;provision/&gt;
        &lt;rabattinformation/&gt;
        &lt;rabatt1/&gt;
        &lt;rabatt2/&gt;
        &lt;rabatt3/&gt;
        &lt;rabatt4/&gt;
        &lt;rabatt5/&gt;
        &lt;internetseite/&gt;
        &lt;bonus1/&gt;
        &lt;bonus1_ab/&gt;
        &lt;bonus2/&gt;
        &lt;bonus2_ab/&gt;
        &lt;bonus3/&gt;
        &lt;bonus3_ab/&gt;
        &lt;bonus4/&gt;
        &lt;bonus4_ab/&gt;
        &lt;bonus5/&gt;
        &lt;bonus5_ab/&gt;
        &lt;bonus6/&gt;
        &lt;bonus6_ab/&gt;
        &lt;bonus7/&gt;
        &lt;bonus7_ab/&gt;
        &lt;bonus8/&gt;
        &lt;bonus8_ab/&gt;
        &lt;bonus9/&gt;
        &lt;bonus9_ab/&gt;
        &lt;bonus10/&gt;
        &lt;bonus10_ab/&gt;
        &lt;rechnung_periode/&gt;
        &lt;rechnung_anzahlpapier/&gt;
        &lt;rechnung_permail/&gt;
        &lt;titel/&gt;
        &lt;anschreiben/&gt;
        &lt;nachname/&gt;
        &lt;arbeitszeitprowoche&gt;
          &lt;value&gt;0.00&lt;/value&gt;
        &lt;/arbeitszeitprowoche&gt;
        &lt;folgebestaetigungsperre&gt;
          &lt;value&gt;0&lt;/value&gt;
        &lt;/folgebestaetigungsperre&gt;
        &lt;verein_mitglied_seit/&gt;
        &lt;verein_mitglied_bis/&gt;
        &lt;verein_mitglied_aktiv/&gt;
        &lt;verein_spendenbescheinigung&gt;
          &lt;value&gt;0&lt;/value&gt;
        &lt;/verein_spendenbescheinigung&gt;
        &lt;freifeld4/&gt;
        &lt;freifeld5/&gt;
        &lt;freifeld6/&gt;
        &lt;freifeld7/&gt;
        &lt;freifeld8/&gt;
        &lt;freifeld9/&gt;
        &lt;freifeld10/&gt;
        &lt;rechnung_papier&gt;
          &lt;value&gt;0&lt;/value&gt;
        &lt;/rechnung_papier&gt;
        &lt;angebot_cc/&gt;
        &lt;auftrag_cc/&gt;
        &lt;rechnung_cc/&gt;
        &lt;gutschrift_cc/&gt;
        &lt;lieferschein_cc/&gt;
        &lt;bestellung_cc/&gt;
        &lt;angebot_fax_cc/&gt;
        &lt;auftrag_fax_cc/&gt;
        &lt;rechnung_fax_cc/&gt;
        &lt;gutschrift_fax_cc/&gt;
        &lt;lieferschein_fax_cc/&gt;
        &lt;bestellung_fax_cc/&gt;
        &lt;abperfax&gt;
          &lt;value&gt;0&lt;/value&gt;
        &lt;/abperfax&gt;
        &lt;abpermail/&gt;
        &lt;kassiereraktiv&gt;
          &lt;value&gt;0&lt;/value&gt;
        &lt;/kassiereraktiv&gt;
        &lt;kassierernummer/&gt;
        &lt;kassiererprojekt&gt;
          &lt;value&gt;0&lt;/value&gt;
        &lt;/kassiererprojekt&gt;
        &lt;portofreilieferant_aktiv&gt;
          &lt;value&gt;0&lt;/value&gt;
        &lt;/portofreilieferant_aktiv&gt;
        &lt;portofreiablieferant&gt;
          &lt;value&gt;0.00&lt;/value&gt;
        &lt;/portofreiablieferant&gt;
        &lt;mandatsreferenzart/&gt;
        &lt;mandatsreferenzwdhart/&gt;
        &lt;serienbrief&gt;
          &lt;value&gt;0&lt;/value&gt;
        &lt;/serienbrief&gt;
        &lt;lieferantennummerbeikunde/&gt;
        &lt;lead&gt;
          &lt;value&gt;0&lt;/value&gt;
        &lt;/lead&gt;
        &lt;geburtstagkalender&gt;
          &lt;value&gt;0&lt;/value&gt;
        &lt;/geburtstagkalender&gt;
        &lt;zahlungsweiseabo/&gt;
        &lt;bundesland/&gt;
        &lt;liefersperredatum/&gt;
        &lt;mandatsreferenzhinweis/&gt;
        &lt;geburtstagskarte&gt;
          &lt;value&gt;0&lt;/value&gt;
        &lt;/geburtstagskarte&gt;
        &lt;kundennummer_buchhaltung/&gt;
        &lt;lieferantennummer_buchhaltung/&gt;
        &lt;mlmintranetgesamtestruktur&gt;
          &lt;value&gt;0&lt;/value&gt;
        &lt;/mlmintranetgesamtestruktur&gt;
        &lt;rechnung_umsatz_netto&gt;
          &lt;value&gt;3400.87&lt;/value&gt;
        &lt;/rechnung_umsatz_netto&gt;
      &lt;/adresse&gt;
      &lt;anz_gesamt&gt;1&lt;/anz_gesamt&gt;
      &lt;anz_result&gt;1&lt;/anz_result&gt;
    &lt;/adressen&gt;
  &lt;/xml&gt;
&lt;/response&gt;
</code>
      </pre>
<div class="glossary-definitions" style="display:none!important;"></div>
</div>
<div class="glossary-definitions" style="display:none!important;"></div>
</div>
<div dir="ltr" class="section internal sub-topic">
<div class="titlepage">
<h3 class="title">
<a data-zd-article="UUID-dcf5bf7e-1b56-6f1c-d7fb-6aef7e9f9158" id="idm8227"></a>Verwalten von Dateien: DateiList, DateiHeader, DateiDownload</h3>
</div>
<p>Mit DateiList können Dateien die sich in xentral befinden angezeigt werden. Zur Auswahl stehen hierbei zwei Parameter:</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc;">
<li class="listitem">
<p>&lt;parameter&gt; Entspricht hier der ID des jeweiligen Objekts</p>
</li>
<li class="listitem">
<p>&lt;objekt&gt; Hier muss angegeben werden, von welchem Objekt die Dateien kommen, wie z.B. adressen, auftrag oder rechnung. Sollen bereits hochgeladene Dateien wieder heruntergeladen werden, kann dies in Kombination von DateiHeader und DateiDownload umgesetzt werden.</p>
</li>
</ul>
</div>
<div dir="ltr" class="section internal sub-topic">
<div class="titlepage">
<h4 class="title">
<a data-zd-article="UUID-dcf5bf7e-1b56-6f1c-d7fb-6aef7e9f9158" id="idm8235"></a>Beispiel Anfrage DateiList mit Funktionen</h4>
</div>
<pre class="programlisting">        <code class="code">&lt;?php
$hash = generateHash();

$xml = "&lt;parameter&gt;1&lt;/parameter&gt;
        &lt;objekt&gt;Adressen&lt;/objekt&gt;";


$output_xml = SendRequest("DateiList",$xml,$hash);

 
function generateHash()
{
 
    $initKey = 'neijfj38734hujfie';
    $remoteDomain = 'http://192.168.0.28';
    $date = gmdate('dmY');
    $hash = "";
 
    for($i = 0; $i &lt;= 200; $i++) 
        $hash = sha1($hash . $initKey . $remoteDomain . $date);
 
    return $hash;
}
 
function SendRequest($methodname,$xml,$hash)
{
 
    $url = 'http://192.168.0.28/wawision/16.3/www/index.php?module=api&amp;action='.$methodname.'&amp;hash='.$hash;
 
    $xml = '&lt;?xml version="1.0" encoding="UTF-8"?&gt;
            &lt;request&gt;
                &lt;status&gt;
                    &lt;function&gt;'.$methodname.'&lt;/function&gt;
                &lt;/status&gt;
                &lt;xml&gt;'.$xml.'&lt;/xml&gt;
            &lt;/request&gt;';
 
    $data = array('xml' =&gt; $xml, 'md5sum' =&gt; md5($xml));
 
    // use key 'http' even if you send the request to https://...
    $options = array(
                   'http' =&gt; array(
                   'header'  =&gt; "Content-type: application/x-www-form-urlencoded\r\n",
                   'method'  =&gt; 'POST',
                   'content' =&gt; http_build_query($data),
                   ),
               );
 
    $context  = stream_context_create($options);
    $result = file_get_contents($url, false, $context);
    return $result;
}
 
$obj = simplexml_load_string($output_xml);
echo "&lt;pre&gt;";
print_r($obj);
echo "&lt;/pre&gt;";
 
?&gt;
</code>
      </pre>
<div class="glossary-definitions" style="display:none!important;"></div>
</div>
<div dir="ltr" class="section internal sub-topic">
<div class="titlepage">
<h4 class="title">
<a data-zd-article="UUID-dcf5bf7e-1b56-6f1c-d7fb-6aef7e9f9158" id="idm8239"></a>Beispiel Antwort DateiList</h4>
</div>
<pre class="programlisting">        <code class="code">&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;response&gt;
   &lt;status&gt;
      &lt;action&gt;DateiList&lt;/action&gt;
      &lt;message&gt;OK&lt;/message&gt;
      &lt;messageCode&gt;1&lt;/messageCode&gt;
   &lt;/status&gt;
   &lt;xml&gt;
      &lt;Datei&gt;
         &lt;titel&gt;Arbeitsnachweis Testfirma GmbH von 2017-02-23 bis 2017-02-23&lt;/titel&gt;
         &lt;subjekt&gt;anhang&lt;/subjekt&gt;
         &lt;version&gt;1&lt;/version&gt;
         &lt;ersteller&gt;Testfirma GmbH&lt;/ersteller&gt;
         &lt;bemerkung&gt;Initiale Version&lt;/Bemerkung&gt;
         &lt;datum&gt;2017-03-23&lt;/datum&gt;
         &lt;id&gt;16&lt;/id&gt;
      &lt;/Datei&gt;
      &lt;Datei&gt;
         &lt;titel&gt;Arbeitsnachweis Testfirma GmbH von 2017-02-22 bis 2017-02-22&lt;/titel&gt;
         &lt;subjekt&gt;anhang&lt;/subjekt&gt;
         &lt;version&gt;1&lt;/version&gt;
         &lt;ersteller&gt;Testfirma GmbH&lt;/ersteller&gt;
         &lt;bemerkung&gt;Initiale Version&lt;/bemerkung&gt;
         &lt;datum&gt;2017-03-22&lt;/datum&gt;
         &lt;id&gt;17&lt;/id&gt;
      &lt;/Datei&gt;      
   &lt;/xml&gt;
&lt;/response&gt;
</code>
      </pre>
<div class="glossary-definitions" style="display:none!important;"></div>
</div>
<div dir="ltr" class="section internal sub-topic">
<div class="titlepage">
<h4 class="title">
<a data-zd-article="UUID-dcf5bf7e-1b56-6f1c-d7fb-6aef7e9f9158" id="idm8243"></a>Beispiel Anfrage DateiHeader + DateiDownload mit Funktionen</h4>
</div>
<pre class="programlisting">        <code class="code">&lt;?php
$hash = generateHash();

$xml = "";

$id = 20;

$headera =  explode("\n",file_get_contents('http://192.168.0.28/wawision/16.3/www/index.php?module=api&amp;action=DateiHeader&amp;hash='.$hash.'&amp;id='.$id));

foreach($headera as $head){
  header($head);
}
echo file_get_contents('http://192.168.0.28/wawision/16.3/www/index.php?module=api&amp;action=DateiDownload&amp;hash='.$hash.'&amp;id='.$id);

exit;

 
function generateHash()
{
 
    $initKey = 'neijfj38734hujfie';
    $remoteDomain = 'http://192.168.0.28';
    $date = gmdate('dmY');
    $hash = "";
 
    for($i = 0; $i &lt;= 200; $i++) 
        $hash = sha1($hash . $initKey . $remoteDomain . $date);
 
    return $hash;
}
</code>
      </pre>
<div class="glossary-definitions" style="display:none!important;"></div>
</div>
<div dir="ltr" class="section internal sub-topic">
<div class="titlepage">
<h4 class="title">
<a data-zd-article="UUID-dcf5bf7e-1b56-6f1c-d7fb-6aef7e9f9158" id="idm8247"></a>Beispiel Antwort DateiHeader + DateiDownload</h4>
</div>
<p>Das typische Fenster zum Öffnen oder Speichern von Dateien öffnet sich.</p>
<div class="glossary-definitions" style="display:none!important;"></div>
</div>
<div class="glossary-definitions" style="display:none!important;"></div>
</div>
<div dir="ltr" class="section internal sub-topic">
<div class="titlepage">
<h3 class="title">
<a data-zd-article="UUID-dcf5bf7e-1b56-6f1c-d7fb-6aef7e9f9158" id="idm8250"></a>Verwalten von Dateien: BelegPDFHeader, BelegPDF</h3>
</div>
<p>Mit DateiList können sich Dateien, die sich in xentral befinden, anzeigen lassen. Zur Auswahl stehen hierbei zwei Parameter:</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc;">
<li class="listitem">
<p>&lt;parameter&gt; Entspricht hier der ID des jeweiligen Objekts.</p>
</li>
<li class="listitem">
<p>&lt;objekt&gt; Hier müssen Sie angeben, von welchem Objekt Sie die Dateien möchten, wie z.B. adressen, auftrag oder rechnung</p>
</li>
</ul>
</div>
<p>Sollen bereits hochgeladene Dateien wieder heruntergeladen werden, kann dies in Kombination von DateiHeader und DateiDownload umgesetzt werden.</p>
<div dir="ltr" class="section internal sub-topic">
<div class="titlepage">
<h4 class="title">
<a data-zd-article="UUID-dcf5bf7e-1b56-6f1c-d7fb-6aef7e9f9158" id="idm8259"></a>Beispiel Anfrage BelegPDFHeader + BelegPDF mit Funktionen</h4>
</div>
<pre class="programlisting">        <code class="code">&lt;?php
$hash = generateHash();

$xml = "";

$id = 20;
$beleg='rechnung';

$headera =  explode("\n",file_get_contents('http://192.168.0.28/wawision/18.3/www/index.php?module=api&amp;action=BelegPDFHeader&amp;hash='.$hash.'&amp;id='.$id.'&amp;beleg='.$beleg));

foreach($headera as $head){
  header($head);
}
echo file_get_contents('http://192.168.0.28/wawision/18.3/www/index.php?module=api&amp;action=BelegPDF&amp;hash='.$hash.'&amp;id='.$id.'&amp;beleg='.$beleg);

exit;

 
function generateHash()
{
 
    $initKey = 'neijfj38734hujfie';
    $remoteDomain = 'http://192.168.0.28';
    $date = gmdate('dmY');
    $hash = "";
 
    for($i = 0; $i &lt;= 200; $i++) 
        $hash = sha1($hash . $initKey . $remoteDomain . $date);
 
    return $hash;
}
</code>
      </pre>
<div class="glossary-definitions" style="display:none!important;"></div>
</div>
<div dir="ltr" class="section internal sub-topic">
<div class="titlepage">
<h4 class="title">
<a data-zd-article="UUID-dcf5bf7e-1b56-6f1c-d7fb-6aef7e9f9158" id="UUID-dcf5bf7e-1b56-6f1c-d7fb-6aef7e9f9158_id_360017436919_id_toc-69"></a>Beispiel Antwort BelegPDFHeader + BelegPDF</h4>
</div>
<p>Das typische Fenster zum Öffnen oder Speichern von Dateien öffnet sich.</p>
<div class="glossary-definitions" style="display:none!important;"></div>
</div>
<div class="glossary-definitions" style="display:none!important;"></div>
</div>
<div dir="ltr" class="section internal sub-topic">
<div class="titlepage">
<h3 class="title">
<a data-zd-article="UUID-dcf5bf7e-1b56-6f1c-d7fb-6aef7e9f9158" id="UUID-dcf5bf7e-1b56-6f1c-d7fb-6aef7e9f9158_id_360017436919_id_toc-70"></a>Sonderfunktionen von Spezialmodulen</h3>
</div>
<div dir="ltr" class="section internal sub-topic">
<div class="titlepage">
<h4 class="title">
<a data-zd-article="UUID-dcf5bf7e-1b56-6f1c-d7fb-6aef7e9f9158" id="UUID-dcf5bf7e-1b56-6f1c-d7fb-6aef7e9f9158_id_360017436919_id_toc-71"></a>XML Artikelkontingente</h4>
</div>
<p>Zum Abfragen der Kontingente gibt es zwei Möglichkeiten: Mit und ohne die Parameter sowie von und bis. Ohne die beiden Parameter erscheint die Artikelkontingent Liste ab dem heutigen Datum. Mit den Parametern erscheint eine Liste mit den gebuchten Artikeln in dem Zeitbereich von Aufträgen, die den Status "freigegeben" haben.</p>
<div dir="ltr" class="section internal sub-topic">
<div class="titlepage">
<h5 class="title">
<a data-zd-article="UUID-dcf5bf7e-1b56-6f1c-d7fb-6aef7e9f9158" id="idm8271"></a>Beispiel Anfrage ArtikelkontingenteGet</h5>
</div>
<pre class="programlisting">          <code class="code">&lt;?php
 include("../api.php");
 include("../config.php");
 global $remotedomain,$initkey,$url;

 $hash = generateHash($initkey,$remotedomain);


 $nummer = "700245";


 $von = "2015-07-01";
 $bis = "2015-07-20";

 header('Content-Type: application/xml; charset=utf-8');
 echo SendRequest($url,"ArtikelkontingenteGet","",$hash,"&amp;nummer=".$nummer."&amp;von=".$von."&amp;bis=".$bis);
</code>
        </pre>
<div class="glossary-definitions" style="display:none!important;"></div>
</div>
<div dir="ltr" class="section internal sub-topic">
<div class="titlepage">
<h5 class="title">
<a data-zd-article="UUID-dcf5bf7e-1b56-6f1c-d7fb-6aef7e9f9158" id="idm8275"></a>Beispiel Antwort ArtikelkontingenteGet</h5>
</div>
<pre class="programlisting">          <code class="code">&lt;?xml version="1.0" encoding="UTF-8"?&gt;&lt;response&gt;&lt;status&gt;&lt;action&gt;ArtikelkontingenteGet&lt;/action&gt;&lt;message&gt;OK&lt;/message&gt;&lt;messageCode&gt;1&lt;/messageCode&gt;&lt;/status&gt;&lt;xml&gt;&lt;artikelkontingente&gt;&lt;kontingent&gt;&lt;gebucht&gt;103&lt;/gebucht&gt;&lt;menge&gt;11.00&lt;/menge&gt;&lt;datum&gt;2015-07-13&lt;/datum&gt;&lt;/kontingent&gt;&lt;kontingent&gt;&lt;gebucht&gt;5&lt;/gebucht&gt;&lt;menge&gt;5.00&lt;/menge&gt;&lt;datum&gt;2015-07-17&lt;/datum&gt;&lt;/kontingent&gt;&lt;/artikelkontingente&gt;&lt;/xml&gt;</code>
        </pre>
<div class="glossary-definitions" style="display:none!important;"></div>
</div>
<div class="glossary-definitions" style="display:none!important;"></div>
</div>
<div dir="ltr" class="section internal sub-topic">
<div class="titlepage">
<h4 class="title">
<a data-zd-article="UUID-dcf5bf7e-1b56-6f1c-d7fb-6aef7e9f9158" id="UUID-dcf5bf7e-1b56-6f1c-d7fb-6aef7e9f9158_id_360017436919_id_h_01F1CJDD77Z6AVNRJ9QXD6AWDP"></a>Anfrage von Daten aus Export Vorlagen: ExportVorlageGet</h4>
</div>
<p>Um Daten aus Export Vorlagen abfragen zu können, muss bereits eine Export Vorlage angelegt sein (Anleitung zu Export Vorlagen). Verfügbare Daten die abgefragt werden können:</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc;">
<li class="listitem">
<p>Adressen</p>
</li>
<li class="listitem">
<p>Angebote</p>
</li>
<li class="listitem">
<p>Aufträge</p>
</li>
<li class="listitem">
<p>Ansprechpartner</p>
</li>
<li class="listitem">
<p>Artikel</p>
</li>
<li class="listitem">
<p>Gutschriften</p>
</li>
<li class="listitem">
<p>Rechnungen</p>
</li>
<li class="listitem">
<p>Lieferscheine</p>
</li>
<li class="listitem">
<p>Bestellungen</p>
</li>
<li class="listitem">
<p>Angebotspositionen</p>
</li>
<li class="listitem">
<p>Auftragspositionen</p>
</li>
<li class="listitem">
<p>Gutschriftpositionen</p>
</li>
<li class="listitem">
<p>Rechnungspositionen</p>
</li>
<li class="listitem">
<p>Lieferscheinpositionen</p>
</li>
<li class="listitem">
<p>Bestellungspositionen</p>
</li>
</ul>
</div>
<p>Damit die Daten über die API abrufbar sind, muss im Bearbeitungsmodus der gewünschten Export Vorlage der Haken API Freigabe aktiviert sein.</p>
<p>Ebenfalls im Bearbeitungsmodus der Export Vorlage muss der Haken CSV Beschriftung aktiviert werden, damit die Spaltennamen als XML Tagnamen verwendet werden, denn sonst funktioniert die Ausgabe als XML nicht.</p>
<p>Zur Abfrage der Daten stehen hierbei verschiedene GET Parameter zur Auswahl:</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc;">
<li class="listitem">
<p>id → Entspricht hier der ID der jeweiligen Export Vorlage (Pflichtfeld)</p>
</li>
<li class="listitem">
<p>von → Datumsangabe (im Format dd.mm.yy), ab wann die gewünschten Daten abgefragt werden sollen (optional). Verfügbar bei Angeboten, Aufträgen, Gutschriften, Rechnungen, Lieferscheine, Bestellungen und deren Positionen</p>
</li>
<li class="listitem">
<p>bis → Datumsangabe (im Format dd.mm.yy), bis wann die gewünschten Daten abgefragt werden sollen (optional). Verfügbar bei Angeboten, Aufträgen, Gutschriften, Rechnungen, Lieferscheine, Bestellungen und deren Positionen</p>
</li>
<li class="listitem">
<p>projekt → Gibt nur die Daten zum passenden Projekt zurück (optional). Verfügbar bei Adressen, Angeboten, Aufträgen, Artikel, Gutschriften, Rechnungen, Lieferscheine, Bestellungen und deren dazugehörige Belegpositionen.</p>
</li>
</ul>
</div>
<p>Welche Werte der Export Vorlage zurückgeliefert werden, hängt von den festgelegten CSV Feldern in der Export Vorlage ab.</p>
<div dir="ltr" class="section internal sub-topic">
<div class="titlepage">
<h5 class="title">
<a data-zd-article="UUID-dcf5bf7e-1b56-6f1c-d7fb-6aef7e9f9158" id="UUID-dcf5bf7e-1b56-6f1c-d7fb-6aef7e9f9158_id_360017436919_id_toc-72"></a>Beispiel Anfrage ExportVorlageGet mit Funktionen</h5>
</div>
<pre class="programlisting">          <code class="code">&lt;?php

$hash = generateHash();

$xml = "";

$id = "1";
$projekt = "";
$von = "";
$bis = "";

$output_xml = SendRequest("ExportVorlageGet",$xml,$hash,$id,$projekt,$von,$bis); 

function generateHash()
{
    
    $initKey = 'neijfj38734hujfie';
    $remoteDomain = 'http://192.168.0.28';
    $date = gmdate('dmY');
    $hash = "";

    for($i = 0; $i &lt;= 200; $i++) 
        $hash = sha1($hash . $initKey . $remoteDomain . $date);
  
    return $hash;
}

function SendRequest($methodname,$xml,$hash,$id,$projekt,$von,$bis)
{

  $url = 'http://192.168.0.28/wawision/16.3/www/index.php?module=api&amp;action='.$methodname.'&amp;hash='.$hash.'&amp;id='.$id.'&amp;projekt='.$projekt.'&amp;von='.$von.'&amp;bis='.$bis;

  $xml = '&lt;?xml version="1.0" encoding="UTF-8"?&gt;
          &lt;request&gt;
           &lt;status&gt;
              &lt;function&gt;'.$methodname.'&lt;/function&gt;
           &lt;/status&gt;
           &lt;xml&gt;'.$xml.'&lt;/xml&gt;
        &lt;/request&gt;';

  $data = array('xml' =&gt; $xml, 'md5sum' =&gt; md5($xml));

  // use key 'http' even if you send the request to https://...
  $options = array(
    'http' =&gt; array(
        'header'  =&gt; "Content-type: application/x-www-form-urlencoded\r\n",
        'method'  =&gt; 'POST',
        'content' =&gt; http_build_query($data),
    ),
  );
  $context  = stream_context_create($options);
  $result = file_get_contents($url, false, $context);
  return $result;
}

$obj = simplexml_load_string($output_xml);
echo "&lt;pre&gt;";
print_r($obj);
echo "&lt;/pre&gt;";

?&gt;
</code>
        </pre>
<div class="glossary-definitions" style="display:none!important;"></div>
</div>
<div dir="ltr" class="section internal sub-topic">
<div class="titlepage">
<h5 class="title">
<a data-zd-article="UUID-dcf5bf7e-1b56-6f1c-d7fb-6aef7e9f9158" id="UUID-dcf5bf7e-1b56-6f1c-d7fb-6aef7e9f9158_id_360017436919_id_toc-73"></a>Beispiel Antwort ExportVorlageGet für Artikel</h5>
</div>
<pre class="programlisting">          <code class="code">&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;response&gt;
   &lt;status&gt;
      &lt;action&gt;ExportVorlageGet&lt;/action&gt;
      &lt;message&gt;OK&lt;/message&gt;
      &lt;messageCode&gt;1&lt;/messageCode&gt;
   &lt;/status&gt;
   &lt;xml&gt;
      &lt;items&gt;
         &lt;item&gt;
            &lt;nummer&gt;1000001&lt;/nummer&gt;
            &lt;name_de&gt;Tastatur&lt;/name_de&gt;
            &lt;name_en/&gt;
            &lt;beschreibung_de/&gt;
            &lt;beschreibung_en/&gt;
            &lt;kurztext_de/&gt;
            &lt;kurztext_en/&gt;
            &lt;internerkommentar/&gt;
            &lt;hersteller/&gt;
            &lt;herstellernummer/&gt;
            &lt;herstellerlink/&gt;
            &lt;ean/&gt;
            &lt;systemid&gt;1&lt;/systemid&gt;
         &lt;/item&gt;
         &lt;item&gt;
            &lt;nummer&gt;1000002&lt;/nummer&gt;
            &lt;name_de&gt;Tasten&lt;/name_de&gt;
            &lt;name_en/&gt;
            &lt;beschreibung_de/&gt;
            &lt;beschreibung_en/&gt;
            &lt;kurztext_de/&gt;
            &lt;kurztext_en/&gt;
            &lt;internerkommentar/&gt;
            &lt;hersteller/&gt;
            &lt;herstellernummer/&gt;
            &lt;herstellerlink/&gt;
            &lt;ean/&gt;
            &lt;systemid&gt;2&lt;/systemid&gt;
         &lt;/item&gt;
         &lt;item&gt;
            &lt;nummer&gt;1000003&lt;/nummer&gt;
            &lt;name_de&gt;USB Maus&lt;/name_de&gt;
            &lt;name_en/&gt;
            &lt;beschreibung_de/&gt;
            &lt;beschreibung_en/&gt;
            &lt;kurztext_de/&gt;
            &lt;kurztext_en/&gt;
            &lt;internerkommentar/&gt;
            &lt;hersteller/&gt;
            &lt;herstellernummer/&gt;
            &lt;herstellerlink/&gt;
            &lt;ean/&gt;
            &lt;systemid&gt;3&lt;/systemid&gt;
         &lt;/item&gt;
      &lt;/items&gt;
   &lt;/xml&gt;
&lt;/response&gt;
</code>
        </pre>
<div class="glossary-definitions" style="display:none!important;"></div>
</div>
<div class="glossary-definitions" style="display:none!important;"></div>
</div>
<div class="glossary-definitions" style="display:none!important;"></div>
</div>
<div dir="ltr" class="section internal sub-topic">
<div class="titlepage">
<h3 class="title">
<a data-zd-article="UUID-dcf5bf7e-1b56-6f1c-d7fb-6aef7e9f9158" id="idm8334"></a>Anfrage von Daten aus Berichten: BerichteGet</h3>
</div>
<p>BerichteGet liefert das Ergebnis der SQL Abfrage aus dem Strukturfeld eines Berichts zurück.</p>
<p>BerichteGet liefert das Ergebnis der SQL Abfrage aus dem Strukturfeld eines Berichts zurück. Hierzu muss die ID des Berichts als GET Parameter übergeben werden.</p>
<div dir="ltr" class="section internal sub-topic">
<div class="titlepage">
<h4 class="title">
<a data-zd-article="UUID-dcf5bf7e-1b56-6f1c-d7fb-6aef7e9f9158" id="idm8338"></a>Beispiel Anfrage BerichteGet mit Funktionen</h4>
</div>
<pre class="programlisting">        <code class="code">&lt;?php

$hash = generateHash();

$xml = "";

$id = "1";

$output_xml = SendRequest("BerichteGet",$xml,$hash,$id); 

function generateHash()
{
    
    $initKey = 'neijfj38734hujfie';
    $remoteDomain = 'http://192.168.0.28';
    $date = gmdate('dmY');
    $hash = "";

    for($i = 0; $i &lt;= 200; $i++) 
        $hash = sha1($hash . $initKey . $remoteDomain . $date);
  
    return $hash;
}

function SendRequest($methodname,$xml,$hash,$id)
{

  $url = 'http://192.168.0.28/wawision/17.3/www/index.php?module=api&amp;action='.$methodname.'&amp;hash='.$hash.'&amp;id='.$id;

  $xml = '&lt;?xml version="1.0" encoding="UTF-8"?&gt;
          &lt;request&gt;
            &lt;status&gt;
              &lt;function&gt;'.$methodname.'&lt;/function&gt;
            &lt;/status&gt;
           &lt;xml&gt;'.$xml.'&lt;/xml&gt;
          &lt;/request&gt;';

  $data = array('xml' =&gt; $xml, 'md5sum' =&gt; md5($xml));

  // use key 'http' even if you send the request to https://...
  $options = array(
    'http' =&gt; array(
        'header'  =&gt; "Content-type: application/x-www-form-urlencoded\r\n",
        'method'  =&gt; 'POST',
        'content' =&gt; http_build_query($data),
    ),
  );
  $context  = stream_context_create($options);
  $result = file_get_contents($url, false, $context);
  return $result;
}

$obj = simplexml_load_string($output_xml);
echo "&lt;pre&gt;";
print_r($obj);
echo "&lt;/pre&gt;";

?&gt;
</code>
      </pre>
<div class="glossary-definitions" style="display:none!important;"></div>
</div>
<div dir="ltr" class="section internal sub-topic">
<div class="titlepage">
<h4 class="title">
<a data-zd-article="UUID-dcf5bf7e-1b56-6f1c-d7fb-6aef7e9f9158" id="idm8342"></a>Beispiel Antwort BerichteGet</h4>
</div>
<pre class="programlisting">        <code class="code">&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;response&gt;
   &lt;status&gt;
      &lt;action&gt;BerichteGet&lt;/action&gt;
      &lt;message&gt;OK&lt;/message&gt;
      &lt;messageCode&gt;1&lt;/messageCode&gt;
   &lt;/status&gt;
   &lt;xml&gt;
      &lt;items&gt;
         &lt;item&gt;
            &lt;name&gt;Kunde 1&lt;/name&gt;
            &lt;kundennummer&gt;10000&lt;/kundennummer&gt;
         &lt;/item&gt;
         &lt;item&gt;
            &lt;name&gt;Kunde 2&lt;/name&gt;
            &lt;kundennummer&gt;10001&lt;/kundennummer&gt;
         &lt;/item&gt;
      &lt;/items&gt;
   &lt;/xml&gt;
&lt;/response&gt;
</code>
      </pre>
<div class="glossary-definitions" style="display:none!important;"></div>
</div>
<div class="glossary-definitions" style="display:none!important;"></div>
</div>
<div dir="ltr" class="section internal sub-topic">
<div class="titlepage">
<h3 class="title">
<a data-zd-article="UUID-dcf5bf7e-1b56-6f1c-d7fb-6aef7e9f9158" id="idm8346"></a>Anfrage von Daten aus Artikeln mit Hilfe von Filtern: ArtikelList</h3>
</div>
<p>ArtikelList liefert als Ergebnis alle Artikelinformationen zu den Artikeln, die auf Ihre Suchkriterien zutreffen.</p>
<p>Folgende Parameter stehen Ihnen zur Verfügung:</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc;">
<li class="listitem">
<p>Innerhalb des &lt;order&gt; Tags können Sie das Tag &lt;field&gt; angeben. Innerhalb von &lt;field&gt; steht die Spaltenbezeichnung aus der Artikeltabelle der Datenbank, mit der das Ergebnis sortiert werden kann</p>
</li>
<li class="listitem">
<p>Hierzu kann ebenfalls innerhalb des Tags &lt;order&gt; das Tag &lt;desc&gt; angegeben werden. Bei 1 wird absteigend sortiert, bei 0 aufsteigend. Wird &lt;desc&gt; nicht angegeben, wird standardmäßig aufsteigend nach dem Feld sortiert, dass in &lt;field&gt; angegeben wurde</p>
</li>
<li class="listitem">
<p>Mit dem Tag &lt;limit&gt; kann die Auflistung der Ergebnisse auf eine bestimmte Anzahl beschränkt werden</p>
</li>
<li class="listitem">
<p>Das Tag &lt;offset&gt; kann nur in Kombination mit &lt;limit&gt; verwendet werden, um Ihre Auflistung der Ergebnisse auf eine bestimmte Anzahl zu beschränken. Z.B. zeigt &lt;limit&gt;10&lt;/limit&gt; und &lt;offset&gt;0&lt;/offset&gt; alle Einträge von 0 bis 10.</p>
</li>
<li class="listitem">
<p>Neben den oben genannten Tags kann als Tag jede Spaltenbezeichnung aus der Artikeltabelle der Datenbank verwenden werden, um die Suche weiter einzuschränken, z.B. sucht &lt;name_de&gt;Schraube&lt;/name_de&gt; nach den Artikeln, die im Namen Schraube beinhalten.</p>
</li>
</ul>
</div>
<div dir="ltr" class="section internal sub-topic">
<div class="titlepage">
<h4 class="title">
<a data-zd-article="UUID-dcf5bf7e-1b56-6f1c-d7fb-6aef7e9f9158" id="idm8361"></a>Beispiel Anfrage ArtikelList mit Funktionen</h4>
</div>
<pre class="programlisting">        <code class="code">&lt;?php

$hash = generateHash();

$xml = "&lt;order&gt;   
          &lt;field&gt;name_de&lt;/field&gt;
          &lt;desc&gt;1&lt;/desc&gt; 
        &lt;/order&gt; 
        &lt;limit&gt;10&lt;/limit&gt; 
        &lt;offset&gt;0&lt;/offset&gt;
        &lt;name_de&gt;Apfel&lt;/name_de&gt;
        ";


$id = "";

$output_xml = SendRequest("ArtikelList",$xml,$hash); 

function generateHash()
{
    
    $initKey = 'neijfj38734hujfie';
    $remoteDomain = 'http://192.168.0.28';
    $date = gmdate('dmY');
    $hash = "";

    for($i = 0; $i &lt;= 200; $i++) 
        $hash = sha1($hash . $initKey . $remoteDomain . $date);
  
    return $hash;
}

function SendRequest($methodname,$xml,$hash)
{

  $url = 'http://192.168.0.28/wawision/17.4/www/index.php?module=api&amp;action='.$methodname.'&amp;hash='.$hash;

  $xml = '&lt;?xml version="1.0" encoding="UTF-8"?&gt;
          &lt;request&gt;
            &lt;status&gt;
              &lt;function&gt;'.$methodname.'&lt;/function&gt;
            &lt;/status&gt;
            &lt;xml&gt;'.$xml.'&lt;/xml&gt;
          &lt;/request&gt;';

  $data = array('xml' =&gt; $xml, 'md5sum' =&gt; md5($xml));

  // use key 'http' even if you send the request to https://...
  $options = array(
    'http' =&gt; array(
        'header'  =&gt; "Content-type: application/x-www-form-urlencoded\r\n",
        'method'  =&gt; 'POST',
        'content' =&gt; http_build_query($data),
    ),
  );
  $context  = stream_context_create($options);
  $result = file_get_contents($url, false, $context);
  return $result;
}

$obj = simplexml_load_string($output_xml);
echo "&lt;pre&gt;";
print_r($obj);
echo "&lt;/pre&gt;";

?&gt;
</code>
      </pre>
<div class="glossary-definitions" style="display:none!important;"></div>
</div>
<div dir="ltr" class="section internal sub-topic">
<div class="titlepage">
<h4 class="title">
<a data-zd-article="UUID-dcf5bf7e-1b56-6f1c-d7fb-6aef7e9f9158" id="idm8365"></a>Beispiel Antwort ArtikelList</h4>
</div>
<pre class="programlisting">        <code class="code">&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;response&gt;
  &lt;status&gt;
    &lt;action&gt;ArtikelList&lt;/action&gt;
    &lt;message&gt;OK&lt;/message&gt;
    &lt;messageCode&gt;1&lt;/messageCode&gt;
  &lt;/status&gt;
  &lt;xml&gt;
    &lt;items&gt;
      &lt;item&gt;
        &lt;id&gt;7&lt;/id&gt;
        &lt;typ&gt;produkt&lt;/typ&gt;
        &lt;nummer&gt;1000006&lt;/nummer&gt;
        &lt;checksum/&gt;
        &lt;projekt&gt;1&lt;/projekt&gt;
        &lt;inaktiv/&gt;
        &lt;ausverkauft&gt;0&lt;/ausverkauft&gt;
        &lt;warengruppe/&gt;
        &lt;name_de&gt;Apfelkuchen&lt;/name_de&gt;
        &lt;name_en/&gt;
        &lt;kurztext_de/&gt;
        &lt;kurztext_en/&gt;
        &lt;beschreibung_de/&gt;
        &lt;beschreibung_en/&gt;
        &lt;uebersicht_de/&gt;
        &lt;uebersicht_en/&gt;
        &lt;links_de/&gt;
        &lt;links_en/&gt;
        &lt;startseite_de/&gt;
        &lt;startseite_en/&gt;
        &lt;standardbild/&gt;
        &lt;herstellerlink/&gt;
        &lt;hersteller/&gt;
        &lt;teilbar/&gt;
        &lt;nteile/&gt;
        &lt;seriennummern&gt;keine&lt;/seriennummern&gt;
        &lt;lager_platz&gt;1&lt;/lager_platz&gt;
        &lt;lieferzeit/&gt;
        &lt;lieferzeitmanuell/&gt;
        &lt;sonstiges/&gt;
        &lt;gewicht/&gt;
        &lt;endmontage/&gt;
        &lt;funktionstest/&gt;
        &lt;artikelcheckliste/&gt;
        &lt;stueckliste&gt;1&lt;/stueckliste&gt;
        &lt;juststueckliste&gt;0&lt;/stueckliste&gt;
        &lt;barcode/&gt;
        &lt;hinzugefuegt/&gt;
        &lt;pcbdecal/&gt;
        &lt;lagerartikel&gt;1&lt;/lagerartikel&gt;
        &lt;porto&gt;0&lt;/porto&gt;
        &lt;chargenverwaltung&gt;0&lt;/chargenverwaltung&gt;
        &lt;provisionsartikel&gt;0&lt;/provisionsartikel&gt;
        &lt;gesperrt&gt;0&lt;/gesperrt&gt;
        &lt;sperrgrund/&gt;
        &lt;geloescht&gt;0&lt;/geloescht&gt;
        &lt;gueltigbis&gt;0000-00-00&lt;/gueltigbis&gt;
        &lt;umsatzsteuer&gt;normal&lt;/normal&gt;
        &lt;klasse/&gt;
        &lt;adresse&gt;0&lt;/adresse&gt;
        &lt;shopartikel&gt;0&lt;/shopartikel&gt;
        &lt;unishopartikel&gt;0&lt;/unishopartikel&gt;
        &lt;journalshopartikel&gt;0&lt;/journalshopartikel&gt;
        &lt;shop&gt;0&lt;/shop&gt;
        &lt;katalog&gt;0&lt;/katalog&gt;
        &lt;katalogtext_de/&gt;
        &lt;katalogtext_en/&gt;
        &lt;katalogbezeichnung_de/&gt;
        &lt;katalogbezeichnung_en/&gt;
        &lt;neu&gt;0&lt;/neu&gt;
        &lt;topseller&gt;0&lt;/topseller&gt;
        &lt;startseite&gt;0&lt;/startseite&gt;
        &lt;wichtig&gt;0&lt;/wichtig&gt;
        &lt;mindestlager&gt;0&lt;/mindestlager&gt;
        &lt;mindestbestellung&gt;0&lt;/mindestbestellung&gt;
        &lt;partnerprogramm_sperre&gt;0&lt;/partnerprogramm_sperre&gt;
        &lt;internerkommentar/&gt;
        &lt;intern_gesperrt&gt;0&lt;/intern_gesperrt&gt;
        &lt;intern_gesperrtuser&gt;0&lt;/intern_gesperrtuser&gt;
        &lt;intern_gesperrtgrund/&gt;
        &lt;inbearbeitung&gt;0&lt;/inbearbeitung&gt;
        &lt;inbearbeitunguser&gt;0&lt;/inbearbeitunguser&gt;
        &lt;cache_lagerplatzinhaltmenge&gt;0&lt;/cache_lagerplatzinhaltmenge&gt;
        &lt;internkommentar/&gt;
        &lt;firma&gt;1&lt;/firma&gt;
        &lt;logdatei&gt;2017-10-18 08:27:17&lt;/logdatei&gt;
        &lt;anabregs_text&gt;Ein Apfelkuchen&lt;/anabregs_text&gt;
        &lt;autobestellung&gt;0&lt;/autobestellung&gt;
        &lt;produktion&gt;0&lt;/produktion&gt;
        &lt;herstellernummer&gt;A232&lt;/herstellernummer&gt;
        &lt;restmenge&gt;0&lt;/restmenge&gt;
        &lt;mlmdirektpraemie&gt;0.00&lt;/mlmdirektpraemie&gt;
        &lt;keineeinzelartikelanzeigen&gt;0&lt;/keineeinzelartikelanzeigen&gt;
        &lt;mindesthaltbarkeitsdatum&gt;0&lt;/mindesthaltbarkeitsdatum&gt;
        &lt;letzteseriennummer/&gt;
        &lt;individualartikel&gt;0&lt;/individualartikel&gt;
        &lt;keinrabatterlaubt&gt;0&lt;/keinrabatterlaubt&gt;
        &lt;rabatt&gt;0&lt;/rabatt&gt;
        &lt;rabatt_prozent&gt;0.00&lt;/rabatt_prozent&gt;
        &lt;geraet&gt;0&lt;/geraet&gt;
        &lt;serviceartikel&gt;0&lt;/serviceartikel&gt;
        &lt;autoabgleicherlaubt&gt;0&lt;/autoabgleicherlaubt&gt;
        &lt;pseudopreis&gt;0.00&lt;/pseudopreis&gt;
        &lt;freigabenotwendig&gt;0&lt;/freigabenotwendig&gt;
        &lt;freigaberegel/&gt;
        &lt;nachbestellt&gt;0&lt;/nachbestellt&gt;
        &lt;ean/&gt;
        &lt;mlmpunkte&gt;0.00&lt;/mlmpunkte&gt;
        &lt;mlmbonuspunkte&gt;0.00&lt;/mlmbonuspunkte&gt;
        &lt;mlmkeinepunkteeigenkauf&gt;0&lt;/mlmkeinepunkteeigenkauf&gt;
        &lt;shop2&gt;0&lt;/shop2&gt;
        &lt;shop3&gt;0&lt;/shop3&gt;
        &lt;usereditid&gt;1&lt;/usereditid&gt;
        &lt;useredittimestamp&gt;2017-10-18 08:27:17&lt;/useredittimestamp&gt;
        &lt;freifeld1/&gt;
        &lt;freifeld2/&gt;
        &lt;freifeld3/&gt;
        &lt;freifeld4/&gt;
        &lt;freifeld5/&gt;
        &lt;freifeld6/&gt;
        &lt;einheit/&gt;
        &lt;webid/&gt;
        &lt;lieferzeitmanuell_en/&gt;
        &lt;variante&gt;0&lt;/variante&gt;
        &lt;variante_von&gt;0&lt;/variante_von&gt;
        &lt;produktioninfo/&gt;
        &lt;sonderaktion/&gt;
        &lt;sonderaktion_en&gt;
        &lt;autolagerlampe&gt;0&lt;/autolagerlampe&gt;
        &lt;leerfeld/&gt;
        &lt;zolltarifnummer/&gt;
        &lt;herkunftsland/&gt;
        &lt;laenge&gt;0.00&lt;/laenge&gt;
        &lt;breite&gt;0.00&lt;/breite&gt;
        &lt;hoehe&gt;0.00&lt;/hoehe&gt;
        &lt;gebuehr&gt;0&lt;/gebuehr&gt;
        &lt;pseudolager/&gt;
        &lt;downloadartikel&gt;0&lt;/downloadartikel&gt;
        &lt;matrixprodukt&gt;0&lt;/matrixprodukt&gt;
        &lt;steuer_erloese_inland_normal/&gt;
        &lt;steuer_aufwendung_inland_normal/&gt;
        &lt;steuer_erloese_inland_ermaessigt/&gt;
        &lt;steuer_aufwendung_inland_ermaessigt/&gt;
        &lt;steuer_erloese_inland_steuerfrei/&gt;
        &lt;steuer_aufwendung_inland_steuerfrei/&gt;
        &lt;steuer_erloese_inland_innergemeinschaftlich/&gt;
        &lt;steuer_aufwendung_inland_innergemeinschaftlich/&gt;
        &lt;steuer_erloese_inland_eunormal/&gt;
        &lt;steuer_erloese_inland_nichtsteuerbar/&gt;
        &lt;steuer_erloese_inland_euermaessigt/&gt;
        &lt;steuer_aufwendung_inland_nichtsteuerbar/&gt;
        &lt;steuer_aufwendung_inland_eunormal/&gt;
        &lt;steuer_aufwendung_inland_euermaessigt/&gt;
        &lt;steuer_erloese_inland_export/&gt;
        &lt;steuer_aufwendung_inland_import/&gt;
        &lt;steuer_art_produkt&gt;0&lt;/steuer_art_produkt&gt;
        &lt;steuer_art_produkt_download&gt;0&lt;/steuer_art_produkt_download&gt;
        &lt;metadescription_de/&gt;
        &lt;metadescription_en/&gt;
        &lt;metakeywords_de/&gt;
        &lt;metakeywords_en/&gt;
        &lt;anabregs_text_en/&gt;
        &lt;externeproduktion&gt;0&lt;/externeproduktion&gt;
        &lt;bildvorschau/&gt;
        &lt;inventursperre&gt;0&lt;/inventursperre&gt;
        &lt;variante_kopie&gt;0&lt;/variante_kopie&gt;
        &lt;unikat&gt;0&lt;/unikat&gt;
        &lt;generierenummerbeioption&gt;0&lt;/generierenummerbeioption&gt;
        &lt;allelieferanten&gt;0&lt;/allelieferanten&gt;
        &lt;tagespreise&gt;0&lt;/tagespreise&gt;
        &lt;rohstoffe&gt;0&lt;/rohstoffe&gt;
        &lt;provisionssperre&gt;0&lt;/provisionssperre&gt;
        &lt;dienstleistung&gt;0&lt;/dienstleistung&gt;
        &lt;inventurekaktiv&gt;0&lt;/inventurekaktiv&gt;
        &lt;inventurek&gt;0.00000000&lt;/inventurek&gt;
        &lt;hinweis_einfuegen/&gt;
        &lt;steuertext_innergemeinschaftlich/&gt; 
        &lt;steuertext_export/&gt; 
        &lt;formelmenge/&gt; 
        &lt;formelpreis/&gt; 
        &lt;freifeld7/&gt; 
        &lt;freifeld8/&gt; 
        &lt;freifeld9/&gt; 
        &lt;freifeld10/&gt; 
        &lt;freifeld11/&gt; 
        &lt;freifeld12/&gt; 
        &lt;freifeld13/&gt; 
        &lt;freifeld14/&gt;
        &lt;freifeld15/&gt; 
        &lt;freifeld16/&gt;
        &lt;freifeld17/&gt;
        &lt;freifeld18/&gt; 
        &lt;freifeld19/&gt;
        &lt;freifeld20/&gt;
        &lt;ursprungsregion/&gt;
        &lt;bestandalternativartikel&gt;0&lt;/bestandalternativartikel&gt;
        &lt;metatitle_de/&gt;
        &lt;metatitle_en/&gt;
        &lt;vkmeldungunterdruecken&gt;0&lt;/vkmeldungunterdruecken&gt;
        &lt;altersfreigabe/&gt;
        &lt;unikatbeikopie&gt;0&lt;/unikatbeikopie&gt;
        &lt;steuergruppe&gt;0&lt;/steuergruppe&gt;
        &lt;keinskonto&gt;0&lt;/keinskonto&gt;
        &lt;berechneterek&gt;0.0000&lt;/berechneterek&gt;
        &lt;verwendeberechneterek&gt;0&lt;/verwendeberechneterek&gt;
        &lt;berechneterekwaehrung/&gt;
      &lt;/item&gt;
    &lt;/items&gt;
  &lt;/xml&gt;
&lt;/response&gt;
</code>
      </pre>
<div class="glossary-definitions" style="display:none!important;"></div>
</div>
<div class="glossary-definitions" style="display:none!important;"></div>
</div>
<div dir="ltr" class="section internal sub-topic">
<div class="titlepage">
<h3 class="title">
<a data-zd-article="UUID-dcf5bf7e-1b56-6f1c-d7fb-6aef7e9f9158" id="idm8369"></a>Verwalten von Accounts: AccountCreate (ab Version 18.3), AccountEdit (ab Version 18.3), AdresseAccountsGet</h3>
</div>
<p>Mit AccountCreate kann ein neuer Account innerhalb einer Adresse angelegt werden, welcher mit AccountEdit auch bearbeitet werden kann.</p>
<p>Als Parameter stehen alle Datenbankfelder aus der Tabelle adresse_accounts zur Verfügung:</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc;">
<li class="listitem">
<p>&lt;aktiv&gt; gibt an, ob ein Account momentan aktiv (1) oder inaktiv (0) ist</p>
</li>
<li class="listitem">
<p>&lt;adresse&gt; ist die Adress-ID der Adresse, zu der dieser Account gehört</p>
</li>
<li class="listitem">
<p>&lt;bezeichnung&gt; ist die Bezeichnung für diesen Account, z.B. Login Account</p>
</li>
<li class="listitem">
<p>&lt;art&gt; ist die Art eines Accounts, z.B. Datenbank, SSH</p>
</li>
<li class="listitem">
<p>&lt;url&gt; ist die URL zum jeweiligen Account, falls vorhanden</p>
</li>
<li class="listitem">
<p>&lt;benutzername&gt; ist der Benutzername für diesen Account</p>
</li>
<li class="listitem">
<p>&lt;passwort&gt; ist das Passwort für diesen Account</p>
</li>
<li class="listitem">
<p>&lt;gueltig_ab&gt; gibt an, ab wann dieser Account gültig ist</p>
</li>
<li class="listitem">
<p>&lt;gueltig_bis&gt; gibt an, bis wann dieser Account gültig ist</p>
</li>
<li class="listitem">
<p>&lt;email&gt; hier kann die passende E-Mail Adresse eingetragen werden</p>
</li>
<li class="listitem">
<p>&lt;notiz&gt; hier können Notizen eingetragen werden</p>
</li>
</ul>
</div>
<p>Pflichtfelder, um einen Account mit AccountCreate anzulegen sind &lt;adresse&gt; und &lt;bezeichnung&gt;.</p>
<p>Um AccountEdit zu verwenden, muss als Get-Parameter die ID des Accounts angegeben werden.</p>
<p>AdresseAccountsGet liefert alle aktiven Accounts einer bestimmten Adresse zurück. Hierfür muss die Adress-ID und optional die Art des Accounts als Get-Parameter übergeben werden.</p>
<div dir="ltr" class="section internal sub-topic">
<div class="titlepage">
<h4 class="title">
<a data-zd-article="UUID-dcf5bf7e-1b56-6f1c-d7fb-6aef7e9f9158" id="UUID-dcf5bf7e-1b56-6f1c-d7fb-6aef7e9f9158_id_360017436919_id_toc-81"></a>Beispiel Anfrage AccountCreate mit Funktionen</h4>
</div>
<pre class="programlisting">        <code class="code">&lt;?php
$hash = generateHash();
 
$xml = "&lt;adresse&gt;3&lt;/adresse&gt;
        &lt;bezeichnung&gt;Datenbank Login&lt;/bezeichnung&gt;
        &lt;aktiv&gt;1&lt;/aktiv&gt;
        &lt;art&gt;db&lt;/art&gt;
        &lt;url&gt;http://192.168.0.28/meinedatenbank&lt;/url&gt;
        &lt;benutzername&gt;mustermannmax&lt;/benutzername&gt;
        &lt;passwort&gt;123456&lt;/passwort&gt;
        &lt;gueltig_ab&gt;20.08.2018&lt;/gueltig_ab&gt;
        &lt;gueltig_bis&gt;20.08.2019&lt;/gueltig_bis&gt;
        &lt;email&gt;maxmustermann@maxmustermann.de&lt;/email&gt;
        &lt;notiz&gt;Datenbank Login zu Testsystem&lt;/notiz&gt;";
 
$output_xml = SendRequest("AccountCreate",$xml,$hash); 
 
function generateHash()
{
 
    $initKey = 'neijfj38734hujfie';
    $remoteDomain = 'http://192.168.0.28';
    $date = gmdate('dmY');
    $hash = "";
 
    for($i = 0; $i &lt;= 200; $i++) 
        $hash = sha1($hash . $initKey . $remoteDomain . $date);
 
    return $hash;
}
 
function SendRequest($methodname,$xml,$hash)
{
 
    $url = 'http://192.168.0.28/wawision/18.3/www/index.php?module=api&amp;action='.$methodname.'&amp;hash='.$hash;
 
    $xml = '&lt;?xml version="1.0" encoding="UTF-8"?&gt;
            &lt;request&gt;
                &lt;status&gt;
                    &lt;function&gt;'.$methodname.'&lt;/function&gt;
                &lt;/status&gt;
                &lt;xml&gt;'.$xml.'&lt;/xml&gt;
            &lt;/request&gt;';
 
    $data = array('xml' =&gt; $xml, 'md5sum' =&gt; md5($xml));
 
    // use key 'http' even if you send the request to https://...
    $options = array(
                   'http' =&gt; array(
                   'header'  =&gt; "Content-type: application/x-www-form-urlencoded\r\n",
                   'method'  =&gt; 'POST',
                   'content' =&gt; http_build_query($data),
                   ),
               );
 
    $context  = stream_context_create($options);
    $result = file_get_contents($url, false, $context);
    return $result;
}
 
$obj = simplexml_load_string($output_xml);
echo "&lt;pre&gt;";
print_r($obj);
echo "&lt;/pre&gt;";
 
?&gt;
</code>
      </pre>
<div class="glossary-definitions" style="display:none!important;"></div>
</div>
<div dir="ltr" class="section internal sub-topic">
<div class="titlepage">
<h4 class="title">
<a data-zd-article="UUID-dcf5bf7e-1b56-6f1c-d7fb-6aef7e9f9158" id="UUID-dcf5bf7e-1b56-6f1c-d7fb-6aef7e9f9158_id_360017436919_id_toc-82"></a>Beispiel Antwort AccountCreate</h4>
</div>
<pre class="programlisting">        <code class="code">&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;response&gt;
   &lt;status&gt;
      &lt;action&gt;AccountCreate&lt;/action&gt;
      &lt;message&gt;OK&lt;/message&gt;
      &lt;messageCode&gt;1&lt;/messageCode&gt;
   &lt;/status&gt;
   &lt;xml&gt;
      &lt;id&gt;2&lt;/id&gt;
   &lt;/xml&gt;
&lt;/response&gt;
</code>
      </pre>
<div class="glossary-definitions" style="display:none!important;"></div>
</div>
<div dir="ltr" class="section internal sub-topic">
<div class="titlepage">
<h4 class="title">
<a data-zd-article="UUID-dcf5bf7e-1b56-6f1c-d7fb-6aef7e9f9158" id="UUID-dcf5bf7e-1b56-6f1c-d7fb-6aef7e9f9158_id_360017436919_id_toc-83"></a>Beispiel Anfrage AccountEdit mit Funktionen</h4>
</div>
<pre class="programlisting">        <code class="code">&lt;?php
$hash = generateHash();
 
$xml = "&lt;bezeichnung&gt;Datenbank Login MySQL&lt;/bezeichnung&gt;
        &lt;aktiv&gt;0&lt;/aktiv&gt;
        &lt;art&gt;db mysql&lt;/art&gt;
        &lt;url&gt;http://192.168.0.28/meinedatenbank&lt;/url&gt;
        &lt;benutzername&gt;mustermannmaxsql&lt;/benutzername&gt;
        &lt;passwort&gt;123456sql&lt;/passwort&gt;
        &lt;gueltig_ab&gt;26.09.2018&lt;/gueltig_ab&gt;
        &lt;gueltig_bis&gt;31.12.2019&lt;/gueltig_bis&gt;
        &lt;email&gt;maxmustermann@maxmustermann.de&lt;/email&gt;
        &lt;notiz&gt;Datenbank Login zu MySQL DB&lt;/notiz&gt;";
 
$id = "2";

$output_xml = SendRequest("AccountEdit",$xml,$hash,$id); 
 
function generateHash()
{
 
    $initKey = 'neijfj38734hujfie';
    $remoteDomain = 'http://192.168.0.28';
    $date = gmdate('dmY');
    $hash = "";
 
    for($i = 0; $i &lt;= 200; $i++) 
        $hash = sha1($hash . $initKey . $remoteDomain . $date);
 
    return $hash;
}
 
function SendRequest($methodname,$xml,$hash,$id)
{
 
    $url = 'http://192.168.0.28/wawision/18.3/www/index.php?module=api&amp;action='.$methodname.'&amp;hash='.$hash.'&amp;id='.$id;
 
    $xml = '&lt;?xml version="1.0" encoding="UTF-8"?&gt;
            &lt;request&gt;
                &lt;status&gt;
                    &lt;function&gt;'.$methodname.'&lt;/function&gt;
                &lt;/status&gt;
                &lt;xml&gt;'.$xml.'&lt;/xml&gt;
            &lt;/request&gt;';
 
    $data = array('xml' =&gt; $xml, 'md5sum' =&gt; md5($xml));
 
    // use key 'http' even if you send the request to https://...
    $options = array(
                   'http' =&gt; array(
                   'header'  =&gt; "Content-type: application/x-www-form-urlencoded\r\n",
                   'method'  =&gt; 'POST',
                   'content' =&gt; http_build_query($data),
                   ),
               );
 
    $context  = stream_context_create($options);
    $result = file_get_contents($url, false, $context);
    return $result;
}
 
$obj = simplexml_load_string($output_xml);
echo "&lt;pre&gt;";
print_r($obj);
echo "&lt;/pre&gt;";
 
?&gt;
</code>
      </pre>
<div class="glossary-definitions" style="display:none!important;"></div>
</div>
<div dir="ltr" class="section internal sub-topic">
<div class="titlepage">
<h4 class="title">
<a data-zd-article="UUID-dcf5bf7e-1b56-6f1c-d7fb-6aef7e9f9158" id="UUID-dcf5bf7e-1b56-6f1c-d7fb-6aef7e9f9158_id_360017436919_id_toc-84"></a>Beispiel Antwort AccountEdit</h4>
</div>
<pre class="programlisting">        <code class="code">&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;response&gt;
   &lt;status&gt;
      &lt;action&gt;AccountEdit&lt;/action&gt;
      &lt;message&gt;OK&lt;/message&gt;
      &lt;messageCode&gt;1&lt;/messageCode&gt;
   &lt;/status&gt;   
&lt;/response&gt;
</code>
      </pre>
<div class="glossary-definitions" style="display:none!important;"></div>
</div>
<div dir="ltr" class="section internal sub-topic">
<div class="titlepage">
<h4 class="title">
<a data-zd-article="UUID-dcf5bf7e-1b56-6f1c-d7fb-6aef7e9f9158" id="UUID-dcf5bf7e-1b56-6f1c-d7fb-6aef7e9f9158_id_360017436919_id_toc-85"></a>Beispiel Anfrage AdresseAccountsGet mit Funktionen</h4>
</div>
<pre class="programlisting">        <code class="code">&lt;?php
$hash = generateHash();
 
$xml = "";

$id = 3; 

$output_xml = SendRequest("AdresseAccountsGet",$xml,$hash,$id); 
 
function generateHash()
{
 
    $initKey = 'neijfj38734hujfie';
    $remoteDomain = 'http://192.168.0.28';
    $date = gmdate('dmY');
    $hash = "";
 
    for($i = 0; $i &lt;= 200; $i++) 
        $hash = sha1($hash . $initKey . $remoteDomain . $date);
 
    return $hash;
}
 
function SendRequest($methodname,$xml,$hash,$id)
{
 
    $url = 'http://192.168.0.28/wawision/18.3/www/index.php?module=api&amp;action='.$methodname.'&amp;hash='.$hash.'&amp;id='.$id;
 
    $xml = '&lt;?xml version="1.0" encoding="UTF-8"?&gt;
            &lt;request&gt;
                &lt;status&gt;
                    &lt;function&gt;'.$methodname.'&lt;/function&gt;
                &lt;/status&gt;
                &lt;xml&gt;'.$xml.'&lt;/xml&gt;
            &lt;/request&gt;';
 
    $data = array('xml' =&gt; $xml, 'md5sum' =&gt; md5($xml));
 
    // use key 'http' even if you send the request to https://...
    $options = array(
                   'http' =&gt; array(
                   'header'  =&gt; "Content-type: application/x-www-form-urlencoded\r\n",
                   'method'  =&gt; 'POST',
                   'content' =&gt; http_build_query($data),
                   ),
               );
 
    $context  = stream_context_create($options);
    $result = file_get_contents($url, false, $context);
    return $result;
}
 
$obj = simplexml_load_string($output_xml);
echo "&lt;pre&gt;";
print_r($obj);
echo "&lt;/pre&gt;";
 
?&gt;
</code>
      </pre>
<div class="glossary-definitions" style="display:none!important;"></div>
</div>
<div dir="ltr" class="section internal sub-topic">
<div class="titlepage">
<h4 class="title">
<a data-zd-article="UUID-dcf5bf7e-1b56-6f1c-d7fb-6aef7e9f9158" id="UUID-dcf5bf7e-1b56-6f1c-d7fb-6aef7e9f9158_id_360017436919_id_toc-86"></a>Beispiel Antwort AdresseAccountsGet</h4>
</div>
<pre class="programlisting">        <code class="code">&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;response&gt;
   &lt;status&gt;
      &lt;action&gt;AdresseAccountsGet&lt;/action&gt;
      &lt;message&gt;OK&lt;/message&gt;
      &lt;messageCode&gt;1&lt;/messageCode&gt;
   &lt;/status&gt;
   &lt;xml&gt;
      &lt;adresse_accounts&gt;
        &lt;account&gt;
          &lt;id&gt;2&lt;/id&gt;
          &lt;aktiv&gt;1&lt;/aktiv&gt;
          &lt;adresse&gt;3&lt;/adresse&gt;
          &lt;bezeichnung&gt;Datenbank Login&lt;/bezeichnung&gt;
          &lt;art&gt;db&lt;/art&gt;
          &lt;url&gt;http://192.168.0.28/meinedatenbank&lt;/url&gt;
          &lt;benutzername&gt;mustermannmax&lt;/benutzername&gt;
          &lt;passwort&gt;123456&lt;/passwort&gt;
          &lt;webid&gt;0&lt;/webid&gt;
          &lt;gueltig_ab&gt;2018-08-20&lt;/gueltig_ab&gt;
          &lt;gueltig_bis&gt;2019-08-20&lt;/gueltig_bis&gt;
          &lt;email&gt;maxmustermann@maxmustermann.de&lt;/email&gt;
          &lt;notiz&gt;Datenbank Login zu Testsystem&lt;/notiz&gt;
        &lt;/account&gt;
      &lt;/adresse_accounts&gt;
   &lt;/xml&gt;
&lt;/response&gt;
</code>
      </pre>
<div class="glossary-definitions" style="display:none!important;"></div>
</div>
<div class="glossary-definitions" style="display:none!important;"></div>
</div>
<div dir="ltr" class="section internal sub-topic">
<div class="titlepage">
<h3 class="title">
<a data-zd-article="UUID-dcf5bf7e-1b56-6f1c-d7fb-6aef7e9f9158" id="UUID-dcf5bf7e-1b56-6f1c-d7fb-6aef7e9f9158_id_360017436919_id_h_01F1CJP5J8N359H867BA0EN7HS"></a>Weitere Möglichkeiten zur Nutzung der API</h3>
</div>
<div dir="ltr" class="section internal sub-topic">
<div class="titlepage">
<h4 class="title">
<a data-zd-article="UUID-dcf5bf7e-1b56-6f1c-d7fb-6aef7e9f9158" id="UUID-dcf5bf7e-1b56-6f1c-d7fb-6aef7e9f9158_id_360017436919_id_toc-87"></a>Zeiterfassung einem Mitarbeiter zuordnen</h4>
</div>
<p>Ab Version 19.2 gibt es die Möglichkeit, über die API eine Zeiterfassung zu erstellen:</p>
<p>adresse</p>
<p>Wenn die ID der Adresse bekannt ist, für die die Zeiterfassung erstellt werden soll, kann diese im Feld adresse_abrechnung übergeben werden</p>
<div dir="ltr" class="section internal sub-topic">
<div class="titlepage">
<h5 class="title">
<a data-zd-article="UUID-dcf5bf7e-1b56-6f1c-d7fb-6aef7e9f9158" id="UUID-dcf5bf7e-1b56-6f1c-d7fb-6aef7e9f9158_id_360017436919_id_h_01F1CJJQTPGZKJTX4APHVCFZQK"></a>Beispiel Anfrage ZeiterfassungCreate mit Adresse</h5>
</div>
<pre class="programlisting">          <code class="code">&lt;?php
$hash = generateHash();
 
$xml = "&lt;adresse&gt;1&lt;/adresse&gt;
&lt;adresse_abrechnung&gt;1&lt;/adresse_abrechnung&gt;
&lt;von&gt;2017-01-01 12:00:00&lt;/von&gt;
&lt;bis&gt;2017-01-01 14:15:00&lt;/bis&gt;
&lt;aufgabe&gt;Hallo&lt;/aufgabe&gt;";
 
$id = "2";

$output_xml = SendRequest("ZeiterfassungCreate",$xml,$hash,$id); 
 
function generateHash()
{
 
    $initKey = 'neijfj38734hujfie';
    $remoteDomain = 'http://192.168.0.28';
    $date = gmdate('dmY');
    $hash = "";
 
    for($i = 0; $i &lt;= 200; $i++) 
        $hash = sha1($hash . $initKey . $remoteDomain . $date);
 
    return $hash;
}
 
function SendRequest($methodname,$xml,$hash,$id)
{
 
    $url = 'http://192.168.0.28/wawision/18.3/www/index.php?module=api&amp;action='.$methodname.'&amp;hash='.$hash.'&amp;id='.$id;
 
    $xml = '&lt;?xml version="1.0" encoding="UTF-8"?&gt;
            &lt;request&gt;
                &lt;status&gt;
                    &lt;function&gt;'.$methodname.'&lt;/function&gt;
                &lt;/status&gt;
                &lt;xml&gt;'.$xml.'&lt;/xml&gt;
            &lt;/request&gt;';
 
    $data = array('xml' =&gt; $xml, 'md5sum' =&gt; md5($xml));
 
    // use key 'http' even if you send the request to https://...
    $options = array(
                   'http' =&gt; array(
                   'header'  =&gt; "Content-type: application/x-www-form-urlencoded\r\n",
                   'method'  =&gt; 'POST',
                   'content' =&gt; http_build_query($data),
                   ),
               );
 
    $context  = stream_context_create($options);
    $result = file_get_contents($url, false, $context);
    return $result;
}
 
$obj = simplexml_load_string($output_xml);
echo "&lt;pre&gt;";
print_r($obj);
echo "&lt;/pre&gt;";
 
?&gt;
</code>
        </pre>
<div class="glossary-definitions" style="display:none!important;"></div>
</div>
<div dir="ltr" class="section internal sub-topic">
<div class="titlepage">
<h5 class="title">
<a data-zd-article="UUID-dcf5bf7e-1b56-6f1c-d7fb-6aef7e9f9158" id="UUID-dcf5bf7e-1b56-6f1c-d7fb-6aef7e9f9158_id_360017436919_id_toc-88"></a>Beispiel Antwort ZeiterfassungCreate mit Adresse</h5>
</div>
<pre class="programlisting">          <code class="code">&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;response&gt;
   &lt;status&gt;
      &lt;action&gt;ZeiterfassungCreate&lt;/action&gt;
      &lt;message&gt;OK&lt;/message&gt;
      &lt;messageCode&gt;1&lt;/messageCode&gt;
   &lt;/status&gt;
&lt;/response&gt;
</code>
        </pre>
<p>mitarbeiternummer</p>
<p>Ab Version 19.3 gibt es Möglichkeiten, über die API eine Zeiterfassung für eine bestimmte Mitarbeiternummer zu erstellen.</p>
<div class="glossary-definitions" style="display:none!important;"></div>
</div>
<div dir="ltr" class="section internal sub-topic">
<div class="titlepage">
<h5 class="title">
<a data-zd-article="UUID-dcf5bf7e-1b56-6f1c-d7fb-6aef7e9f9158" id="UUID-dcf5bf7e-1b56-6f1c-d7fb-6aef7e9f9158_id_360017436919_id_h_01F1CJK4X6P2FW3XKJA18TYM4P"></a>Beispiel Anfrage ZeiterfassungCreate mit Mitarbeiternummer</h5>
</div>
<pre class="programlisting">          <code class="code">&lt;?php
$hash = generateHash();
 
$xml = "&lt;mitarbeiternummer&gt;90002&lt;/mitarbeiternummer&gt;
&lt;von&gt;2017-01-01 12:00:00&lt;/von&gt;
&lt;bis&gt;2017-01-01 14:15:00&lt;/bis&gt;
&lt;aufgabe&gt;Hallo&lt;/aufgabe&gt;";
 
$id = "2";

$output_xml = SendRequest("ZeiterfassungCreate",$xml,$hash,$id); 
 
function generateHash()
{
 
    $initKey = 'neijfj38734hujfie';
    $remoteDomain = 'http://192.168.0.28';
    $date = gmdate('dmY');
    $hash = "";
 
    for($i = 0; $i &lt;= 200; $i++) 
        $hash = sha1($hash . $initKey . $remoteDomain . $date);
 
    return $hash;
}
 
function SendRequest($methodname,$xml,$hash,$id)
{
 
    $url = 'http://192.168.0.28/wawision/18.3/www/index.php?module=api&amp;action='.$methodname.'&amp;hash='.$hash.'&amp;id='.$id;
 
    $xml = '&lt;?xml version="1.0" encoding="UTF-8"?&gt;
            &lt;request&gt;
                &lt;status&gt;
                    &lt;function&gt;'.$methodname.'&lt;/function&gt;
                &lt;/status&gt;
                &lt;xml&gt;'.$xml.'&lt;/xml&gt;
            &lt;/request&gt;';
 
    $data = array('xml' =&gt; $xml, 'md5sum' =&gt; md5($xml));
 
    // use key 'http' even if you send the request to https://...
    $options = array(
                   'http' =&gt; array(
                   'header'  =&gt; "Content-type: application/x-www-form-urlencoded\r\n",
                   'method'  =&gt; 'POST',
                   'content' =&gt; http_build_query($data),
                   ),
               );
 
    $context  = stream_context_create($options);
    $result = file_get_contents($url, false, $context);
    return $result;
}
 
$obj = simplexml_load_string($output_xml);
echo "&lt;pre&gt;";
print_r($obj);
echo "&lt;/pre&gt;";
 
?&gt;
</code>
        </pre>
<div class="glossary-definitions" style="display:none!important;"></div>
</div>
<div dir="ltr" class="section internal sub-topic">
<div class="titlepage">
<h5 class="title">
<a data-zd-article="UUID-dcf5bf7e-1b56-6f1c-d7fb-6aef7e9f9158" id="idm8444"></a>Beispiel Antwort ZeiterfassungCreate mit Mitarbeiternummer</h5>
</div>
<pre class="programlisting">          <code class="code">&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;response&gt;
   &lt;status&gt;
      &lt;action&gt;ZeiterfassungCreate&lt;/action&gt;
      &lt;message&gt;OK&lt;/message&gt;
      &lt;messageCode&gt;1&lt;/messageCode&gt;
   &lt;/status&gt;
&lt;/response&gt;
</code>
        </pre>
<div class="glossary-definitions" style="display:none!important;"></div>
</div>
<div class="glossary-definitions" style="display:none!important;"></div>
</div>
<div dir="ltr" class="section internal sub-topic">
<div class="titlepage">
<h4 class="title">
<a data-zd-article="UUID-dcf5bf7e-1b56-6f1c-d7fb-6aef7e9f9158" id="UUID-dcf5bf7e-1b56-6f1c-d7fb-6aef7e9f9158_id_360017436919_id_toc-90"></a>Rechnung als bezahlt markieren</h4>
</div>
<p>Ab Version 20.1 gibt es die Möglichkeit, über die API Rechnungen als bezahlt zu markieren.</p>
<div dir="ltr" class="section internal sub-topic">
<div class="titlepage">
<h5 class="title">
<a data-zd-article="UUID-dcf5bf7e-1b56-6f1c-d7fb-6aef7e9f9158" id="idm8451"></a>Beispiel Anfrage RechnungAlsBezahltMarkieren</h5>
</div>
<pre class="programlisting">          <code class="code">&lt;?php

$xml = '&lt;id&gt;6&lt;/id&gt;';

$output_xml = SendRequest('RechnungAlsBezahltMarkieren', $xml);

echo "&lt;pre&gt;";
var_dump($output_xml);
echo "&lt;/pre&gt;";

function SendRequest($methodname,$xml)
{
    $url = 'http://localhost/xentral/20.1/www/api/'.$methodname;

    $ch = curl_init($url);
    curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
    curl_setopt($ch, CURLOPT_HTTPAUTH, CURLAUTH_DIGEST);
    curl_setopt($ch, CURLOPT_USERPWD, "apitest:password1234");
    curl_setopt($ch, CURLOPT_POST, true);
    curl_setopt($ch, CURLOPT_POSTFIELDS, '&lt;xml&gt;'.$xml.'&lt;/xml&gt;');
    curl_setopt($ch, CURLOPT_HTTPHEADER, ['content-type: application/xml']);
    $response = curl_exec($ch);
    curl_close($ch);

    return $response;
}

?&gt;
</code>
        </pre>
<div class="glossary-definitions" style="display:none!important;"></div>
</div>
<div dir="ltr" class="section internal sub-topic">
<div class="titlepage">
<h5 class="title">
<a data-zd-article="UUID-dcf5bf7e-1b56-6f1c-d7fb-6aef7e9f9158" id="idm8455"></a>Beispiel Antwort RechnungAlsBezahltMarkieren</h5>
</div>
<pre class="programlisting">          <code class="code">&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;response&gt;
   &lt;status&gt;
      &lt;action&gt;&lt;/action&gt;
      &lt;message&gt;OK&lt;/message&gt;
      &lt;messageCode&gt;1&lt;/messageCode&gt;
   &lt;/status&gt;
   &lt;xml&gt;
      &lt;id&gt;6&lt;/id&gt;
   &lt;/xml&gt;
&lt;/response&gt;
</code>
        </pre>
<div class="glossary-definitions" style="display:none!important;"></div>
</div>
<div class="glossary-definitions" style="display:none!important;"></div>
</div>
<div dir="ltr" class="section internal sub-topic">
<div class="titlepage">
<h4 class="title">
<a data-zd-article="UUID-dcf5bf7e-1b56-6f1c-d7fb-6aef7e9f9158" id="UUID-dcf5bf7e-1b56-6f1c-d7fb-6aef7e9f9158_id_360017436919_id_h_01F1CJRNVNSD1Q9SNED2Z5CZFA"></a>Auftrag abschließen</h4>
</div>
<p>Ab Version 20.1 kann ein Auftrag über die API abgeschlossen werden.</p>
<div dir="ltr" class="section internal sub-topic">
<div class="titlepage">
<h5 class="title">
<a data-zd-article="UUID-dcf5bf7e-1b56-6f1c-d7fb-6aef7e9f9158" id="UUID-dcf5bf7e-1b56-6f1c-d7fb-6aef7e9f9158_id_360017436919_id_h_01F0E8WW7NG7M6ZRZQT9DF6X8E"></a>Beispiel Anfrage AuftragAbschliessen</h5>
</div>
<pre class="programlisting">          <code class="code">&lt;?php

$xml = '&lt;id&gt;2&lt;/id&gt;';

$output_xml = SendRequest('AuftragAbschliessen', $xml);

echo "&lt;pre&gt;";
var_dump($output_xml);
echo "&lt;/pre&gt;";

function SendRequest($methodname,$xml)
{
    $url = 'http://localhost/xentral/20.1/www/api/'.$methodname;

    $ch = curl_init($url);
    curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
    curl_setopt($ch, CURLOPT_HTTPAUTH, CURLAUTH_DIGEST);
    curl_setopt($ch, CURLOPT_USERPWD, "apitest:password1234");
    curl_setopt($ch, CURLOPT_POST, true);
    curl_setopt($ch, CURLOPT_POSTFIELDS, '&lt;xml&gt;'.$xml.'&lt;/xml&gt;');
    curl_setopt($ch, CURLOPT_HTTPHEADER, ['content-type: application/xml']);
    $response = curl_exec($ch);
    curl_close($ch);

    return $response;
}

?&gt;
</code>
        </pre>
<div class="glossary-definitions" style="display:none!important;"></div>
</div>
<div dir="ltr" class="section internal sub-topic">
<div class="titlepage">
<h5 class="title">
<a data-zd-article="UUID-dcf5bf7e-1b56-6f1c-d7fb-6aef7e9f9158" id="idm8466"></a>Beispiel Antwort AuftragAbschliessen</h5>
</div>
<pre class="programlisting">          <code class="code">&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;response&gt;
   &lt;status&gt;
      &lt;action&gt;&lt;/action&gt;
      &lt;message&gt;OK&lt;/message&gt;
      &lt;messageCode&gt;1&lt;/messageCode&gt;
   &lt;/status&gt;
   &lt;xml&gt;
      &lt;id&gt;2&lt;/id&gt;
   &lt;/xml&gt;
&lt;/response&gt;
</code>
        </pre>
<div class="glossary-definitions" style="display:none!important;"></div>
</div>
<div class="glossary-definitions" style="display:none!important;"></div>
</div>
<div dir="ltr" class="section internal sub-topic">
<div class="titlepage">
<h4 class="title">
<a data-zd-article="UUID-dcf5bf7e-1b56-6f1c-d7fb-6aef7e9f9158" id="UUID-dcf5bf7e-1b56-6f1c-d7fb-6aef7e9f9158_id_360017436919_id_h_01F1CJTC6EWA49ZV23TN6WSMBS"></a>Belege freigeben</h4>
</div>
<p>Ab Version 20.1 gibt es die Möglichkeit, Belege über die API freizugeben. Das gilt für die Belegarten Angebot, Auftrag, Rechnung, Lieferschein, Bestellung und Gutschrift. Der Aufruf ist für alle Belegarten gleich, es ändert sich nur der Funktionsname.</p>
<div dir="ltr" class="section internal sub-topic">
<div class="titlepage">
<h5 class="title">
<a data-zd-article="UUID-dcf5bf7e-1b56-6f1c-d7fb-6aef7e9f9158" id="idm8473"></a>Beispiel anhand eines Auftrags</h5>
</div>
<pre class="programlisting">          <code class="code">&lt;?php

$xml = '&lt;id&gt;2&lt;/id&gt;';

$output_xml = SendRequest('AuftragFreigabe', $xml);

echo "&lt;pre&gt;";
var_dump($output_xml);
echo "&lt;/pre&gt;";

function SendRequest($methodname,$xml)
{
    $url = 'http://localhost/xentral/20.1/www/api/'.$methodname;

    $ch = curl_init($url);
    curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
    curl_setopt($ch, CURLOPT_HTTPAUTH, CURLAUTH_DIGEST);
    curl_setopt($ch, CURLOPT_USERPWD, "apitest:password1234");
    curl_setopt($ch, CURLOPT_POST, true);
    curl_setopt($ch, CURLOPT_POSTFIELDS, '&lt;xml&gt;'.$xml.'&lt;/xml&gt;');
    curl_setopt($ch, CURLOPT_HTTPHEADER, ['content-type: application/xml']);
    $response = curl_exec($ch);
    curl_close($ch);

    return $response;
}

?&gt;
</code>
        </pre>
<div class="glossary-definitions" style="display:none!important;"></div>
</div>
<div dir="ltr" class="section internal sub-topic">
<div class="titlepage">
<h5 class="title">
<a data-zd-article="UUID-dcf5bf7e-1b56-6f1c-d7fb-6aef7e9f9158" id="UUID-dcf5bf7e-1b56-6f1c-d7fb-6aef7e9f9158_id_360017436919_id_toc-94"></a>Beispiel Antwort AuftragAbschliessen</h5>
</div>
<pre class="programlisting">          <code class="code">&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;response&gt;
   &lt;status&gt;
      &lt;action&gt;&lt;/action&gt;
      &lt;message&gt;OK&lt;/message&gt;
      &lt;messageCode&gt;1&lt;/messageCode&gt;
   &lt;/status&gt;
   &lt;xml&gt;
      &lt;id&gt;8&lt;/id&gt;
      &lt;belegnr&gt;200007&lt;/belegnr&gt;
   &lt;/xml&gt;
&lt;/response&gt;
</code>
        </pre>
<div class="glossary-definitions" style="display:none!important;"></div>
</div>
<div class="glossary-definitions" style="display:none!important;"></div>
</div>
<div dir="ltr" class="section internal sub-topic">
<div class="titlepage">
<h4 class="title">
<a data-zd-article="UUID-dcf5bf7e-1b56-6f1c-d7fb-6aef7e9f9158" id="idm8481"></a>Belege Abschicken</h4>
</div>
<p>Ab Version 20.1 gibt es die Möglichkeit, Belege über die API zu versenden. Das gilt für Angebot, Auftragsbestätigung, Rechnung, Lieferschein und Gutschrift. Der Aufruf ist für alle Belegarten gleich, es ändert sich nur der Funktionsname.</p>
<div dir="ltr" class="section internal sub-topic">
<div class="titlepage">
<h5 class="title">
<a data-zd-article="UUID-dcf5bf7e-1b56-6f1c-d7fb-6aef7e9f9158" id="UUID-dcf5bf7e-1b56-6f1c-d7fb-6aef7e9f9158_id_360017436919_id_h_01F0E8VX4NEGCHD3PDTYQSKJP7"></a>Beispiel Anfrage AuftragVersenden</h5>
</div>
<pre class="programlisting">          <code class="code">&lt;?php

$xml = '&lt;id&gt;8&lt;/id&gt;
        &lt;versandart&gt;email&lt;/versandart&gt;
        &lt;drucker&gt;1&lt;/drucker&gt;';

$output_xml = SendRequest('AuftragVersenden', $xml);

echo "&lt;pre&gt;";
var_dump($output_xml);
echo "&lt;/pre&gt;";

function SendRequest($methodname,$xml)
{
    $url = 'http://localhost/xentral/20.1/www/api/'.$methodname;

    $ch = curl_init($url);
    curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
    curl_setopt($ch, CURLOPT_HTTPAUTH, CURLAUTH_DIGEST);
    curl_setopt($ch, CURLOPT_USERPWD, "apitest:password1234");
    curl_setopt($ch, CURLOPT_POST, true);
    curl_setopt($ch, CURLOPT_POSTFIELDS, '&lt;xml&gt;'.$xml.'&lt;/xml&gt;');
    curl_setopt($ch, CURLOPT_HTTPHEADER, ['content-type: application/xml']);
    $response = curl_exec($ch);
    curl_close($ch);

    return $response;
}

?&gt;
</code>
        </pre>
<div class="glossary-definitions" style="display:none!important;"></div>
</div>
<div dir="ltr" class="section internal sub-topic">
<div class="titlepage">
<h5 class="title">
<a data-zd-article="UUID-dcf5bf7e-1b56-6f1c-d7fb-6aef7e9f9158" id="UUID-dcf5bf7e-1b56-6f1c-d7fb-6aef7e9f9158_id_360017436919_id_toc-97"></a>Beispiel Antwort AuftragVersenden</h5>
</div>
<pre class="programlisting">          <code class="code">&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;response&gt;
   &lt;status&gt;
      &lt;action&gt;&lt;/action&gt;
      &lt;message&gt;OK&lt;/message&gt;
      &lt;messageCode&gt;1&lt;/messageCode&gt;
   &lt;/status&gt;
   &lt;xml&gt;
      &lt;id&gt;8&lt;/id&gt;
   &lt;/xml&gt;
&lt;/response&gt;
</code>
        </pre>
<div class="glossary-definitions" style="display:none!important;"></div>
</div>
<div class="glossary-definitions" style="display:none!important;"></div>
</div>
<div dir="ltr" class="section internal sub-topic">
<div class="titlepage">
<h4 class="title">
<a data-zd-article="UUID-dcf5bf7e-1b56-6f1c-d7fb-6aef7e9f9158" id="UUID-dcf5bf7e-1b56-6f1c-d7fb-6aef7e9f9158_id_360017436919_id_h_01F1CJVRSZ43J25J0GVX48FWGK"></a>Auftrag als Rechnung weiterführen</h4>
</div>
<p>Ab Version 20.1 gibt es die Möglichkeit, Aufträge über die API als Rechnung weiterzuführen.</p>
<div dir="ltr" class="section internal sub-topic">
<div class="titlepage">
<h5 class="title">
<a data-zd-article="UUID-dcf5bf7e-1b56-6f1c-d7fb-6aef7e9f9158" id="UUID-dcf5bf7e-1b56-6f1c-d7fb-6aef7e9f9158_id_360017436919_id_h_01F0E8VGX1CC63V7ZJJ935DXWA"></a>Beispiel Anfrage WeiterfuehrenAuftragZuRechnung</h5>
</div>
<pre class="programlisting">          <code class="code">&lt;?php

$xml = '&lt;id&gt;10&lt;/id&gt;';

$output_xml = SendRequest('WeiterfuehrenAuftragZuRechnung', $xml);

echo "&lt;pre&gt;";
var_dump($output_xml);
echo "&lt;/pre&gt;";

function SendRequest($methodname,$xml)
{
    $url = 'http://localhost/xentral/20.1/www/api/'.$methodname;

    $ch = curl_init($url);
    curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
    curl_setopt($ch, CURLOPT_HTTPAUTH, CURLAUTH_DIGEST);
    curl_setopt($ch, CURLOPT_USERPWD, "apitest:password1234");
    curl_setopt($ch, CURLOPT_POST, true);
    curl_setopt($ch, CURLOPT_POSTFIELDS, '&lt;xml&gt;'.$xml.'&lt;/xml&gt;');
    curl_setopt($ch, CURLOPT_HTTPHEADER, ['content-type: application/xml']);
    $response = curl_exec($ch);
    curl_close($ch);

    return $response;
}

?&gt;
</code>
        </pre>
<div class="glossary-definitions" style="display:none!important;"></div>
</div>
<div dir="ltr" class="section internal sub-topic">
<div class="titlepage">
<h5 class="title">
<a data-zd-article="UUID-dcf5bf7e-1b56-6f1c-d7fb-6aef7e9f9158" id="idm8499"></a>Beispiel Antwort WeiterfuehrenAuftragZuRechnung</h5>
</div>
<pre class="programlisting">          <code class="code">&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;response&gt;
   &lt;status&gt;
      &lt;action&gt;&lt;/action&gt;
      &lt;message&gt;OK&lt;/message&gt;
      &lt;messageCode&gt;1&lt;/messageCode&gt;
   &lt;/status&gt;
   &lt;xml&gt;
      &lt;id&gt;18&lt;/id&gt;
   &lt;/xml&gt;
&lt;/response&gt;
</code>
        </pre>
<div class="glossary-definitions" style="display:none!important;"></div>
</div>
<div class="glossary-definitions" style="display:none!important;"></div>
</div>
<div dir="ltr" class="section internal sub-topic">
<div class="titlepage">
<h4 class="title">
<a data-zd-article="UUID-dcf5bf7e-1b56-6f1c-d7fb-6aef7e9f9158" id="UUID-dcf5bf7e-1b56-6f1c-d7fb-6aef7e9f9158_id_360017436919_id_h_01F1CJXDRJ67BZ8W1DSFJZ17ZE"></a>Rechnung als Gutschrift weiterführen</h4>
</div>
<p>Ab Version 20.1 gibt es die Möglichkeit, Rechnungen über die API als Gutschrift weiterzuführen.</p>
<div dir="ltr" class="section internal sub-topic">
<div class="titlepage">
<h5 class="title">
<a data-zd-article="UUID-dcf5bf7e-1b56-6f1c-d7fb-6aef7e9f9158" id="UUID-dcf5bf7e-1b56-6f1c-d7fb-6aef7e9f9158_id_360017436919_id_h_01F0E8V54VS646N2FT11GWMWDT"></a>Beispiel Anfrage WeiterfuehrenRechnungZuGutschrift</h5>
</div>
<pre class="programlisting">          <code class="code">&lt;?php

$xml = '&lt;id&gt;1&lt;/id&gt;';

$output_xml = SendRequest('WeiterfuehrenRechnungZuGutschrift', $xml);

echo "&lt;pre&gt;";
var_dump($output_xml);
echo "&lt;/pre&gt;";

function SendRequest($methodname,$xml)
{
    $url = 'http://localhost/xentral/20.1/www/api/'.$methodname;

    $ch = curl_init($url);
    curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
    curl_setopt($ch, CURLOPT_HTTPAUTH, CURLAUTH_DIGEST);
    curl_setopt($ch, CURLOPT_USERPWD, "apitest:password1234");
    curl_setopt($ch, CURLOPT_POST, true);
    curl_setopt($ch, CURLOPT_POSTFIELDS, '&lt;xml&gt;'.$xml.'&lt;/xml&gt;');
    curl_setopt($ch, CURLOPT_HTTPHEADER, ['content-type: application/xml']);
    $response = curl_exec($ch);
    curl_close($ch);

    return $response;
}

?&gt;
</code>
        </pre>
<div class="glossary-definitions" style="display:none!important;"></div>
</div>
<div dir="ltr" class="section internal sub-topic">
<div class="titlepage">
<h5 class="title">
<a data-zd-article="UUID-dcf5bf7e-1b56-6f1c-d7fb-6aef7e9f9158" id="idm8510"></a>Beispiel Antwort WeiterfuehrenRechnungZuGutschrift</h5>
</div>
<pre class="programlisting">          <code class="code">&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;response&gt;
   &lt;status&gt;
      &lt;action&gt;&lt;/action&gt;
      &lt;message&gt;OK&lt;/message&gt;
      &lt;messageCode&gt;1&lt;/messageCode&gt;
   &lt;/status&gt;
   &lt;xml&gt;
      &lt;id&gt;4&lt;/id&gt;
   &lt;/xml&gt;
&lt;/response&gt;
</code>
        </pre>
<div class="glossary-definitions" style="display:none!important;"></div>
</div>
<div class="glossary-definitions" style="display:none!important;"></div>
</div>
<div dir="ltr" class="section internal sub-topic">
<div class="titlepage">
<h4 class="title">
<a data-zd-article="UUID-dcf5bf7e-1b56-6f1c-d7fb-6aef7e9f9158" id="UUID-dcf5bf7e-1b56-6f1c-d7fb-6aef7e9f9158_id_360017436919_id_h_01F1CJZKJX15GFJF06FJXEBQWJ"></a>Stechuhrstatus abfragen</h4>
</div>
<p>Der aktuelle Status eines Mitarbeiters an der Stechuhr kann mit der ID der Stechuhr und der AdressID des Mitarbeiters abgerufen werden.</p>
<div dir="ltr" class="section internal sub-topic">
<div class="titlepage">
<h5 class="title">
<a data-zd-article="UUID-dcf5bf7e-1b56-6f1c-d7fb-6aef7e9f9158" id="UUID-dcf5bf7e-1b56-6f1c-d7fb-6aef7e9f9158_id_360017436919_id_h_01F0E8TJB05FYTXA8P4NAMEYX3"></a>Beispiel Anfrage StechuhrStatusGet</h5>
</div>
<pre class="programlisting">          <code class="code">&lt;?php

$xml = '&lt;id&gt;1&lt;/id&gt;
        &lt;adresse&gt;6&lt;/adresse&gt;';

$output_xml = SendRequest('StechuhrstatusGet', $xml);

echo "&lt;pre&gt;";
var_dump($output_xml);
echo "&lt;/pre&gt;";

function SendRequest($methodname,$xml)
{
    $url = 'http://localhost/xentral/20.1/www/api/'.$methodname;

    $ch = curl_init($url);
    curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
    curl_setopt($ch, CURLOPT_HTTPAUTH, CURLAUTH_DIGEST);
    curl_setopt($ch, CURLOPT_USERPWD, "apitest:password1234");
    curl_setopt($ch, CURLOPT_POST, true);
    curl_setopt($ch, CURLOPT_POSTFIELDS, '&lt;xml&gt;'.$xml.'&lt;/xml&gt;');
    curl_setopt($ch, CURLOPT_HTTPHEADER, ['content-type: application/xml']);
    $response = curl_exec($ch);
    curl_close($ch);

    return $response;
}

?&gt;
</code>
        </pre>
<div class="glossary-definitions" style="display:none!important;"></div>
</div>
<div dir="ltr" class="section internal sub-topic">
<div class="titlepage">
<h5 class="title">
<a data-zd-article="UUID-dcf5bf7e-1b56-6f1c-d7fb-6aef7e9f9158" id="idm8521"></a>Beispiel Antwort StechuhrStatusGet</h5>
</div>
<pre class="programlisting">          <code class="code">&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;response&gt;
   &lt;status&gt;
      &lt;action&gt;StechuhrStatusGet&lt;/action&gt;
      &lt;message&gt;OK&lt;/message&gt;
      &lt;messageCode&gt;1&lt;/messageCode&gt;
   &lt;/status&gt;
   &lt;xml&gt;
      &lt;status&gt;pausestart&lt;/status&gt;
      &lt;seit&gt;0.08&lt;/seit&gt;
      &lt;dd&gt;0&lt;/dd&gt;
      &lt;kommen&gt;0&lt;/kommen&gt;
   &lt;/xml&gt;
&lt;/response&gt;
</code>
        </pre>
<div class="glossary-definitions" style="display:none!important;"></div>
</div>
<div class="glossary-definitions" style="display:none!important;"></div>
</div>
<div dir="ltr" class="section internal sub-topic">
<div class="titlepage">
<h4 class="title">
<a data-zd-article="UUID-dcf5bf7e-1b56-6f1c-d7fb-6aef7e9f9158" id="UUID-dcf5bf7e-1b56-6f1c-d7fb-6aef7e9f9158_id_360017436919_id_h_01F1CK0M555M1YMMMJN9Y35E9P"></a>Stechuhrstatus ändern</h4>
</div>
<p>Der aktuelle Status eines Mitarbeiters an der Stechuhr kann mit dem neuen Status und der ID des Benutzers oder der Adresse des Mitarbeiters gesetzt werden. Welcher Status gesetzt werden kann, ist vom aktuellen Status abhängig:</p>
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc;">
<li class="listitem">
<p>Wenn aktueller Status = 'gehen': Nur Status 'kommen' kann gesetzt werden</p>
</li>
<li class="listitem">
<p>Wenn aktueller Status = 'kommen': Nur Status 'gehen' oder 'pausestart' kann gesetzt werden</p>
</li>
<li class="listitem">
<p>Wenn aktueller Status = 'pausestart': Nur Status 'pausestop' kann gesetzt werden</p>
</li>
</ul>
</div>
<div dir="ltr" class="section internal sub-topic">
<div class="titlepage">
<h5 class="title">
<a data-zd-article="UUID-dcf5bf7e-1b56-6f1c-d7fb-6aef7e9f9158" id="UUID-dcf5bf7e-1b56-6f1c-d7fb-6aef7e9f9158_id_360017436919_id_h_01F0E8T5PNF23GRXR2KWQTGCC0"></a>Beispiel Anfrage StechuhrStatusSet</h5>
</div>
<pre class="programlisting">          <code class="code">&lt;?php

$xml = '&lt;cmd&gt;pausestop&lt;/cmd&gt;
        &lt;adresse&gt;6&lt;/adresse&gt;';

$output_xml = SendRequest('StechuhrstatusSet', $xml);

echo "&lt;pre&gt;";
var_dump($output_xml);
echo "&lt;/pre&gt;";

function SendRequest($methodname,$xml)
{
    $url = 'http://localhost/xentral/20.1/www/api/'.$methodname;

    $ch = curl_init($url);
    curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
    curl_setopt($ch, CURLOPT_HTTPAUTH, CURLAUTH_DIGEST);
    curl_setopt($ch, CURLOPT_USERPWD, "apitest:password1234");
    curl_setopt($ch, CURLOPT_POST, true);
    curl_setopt($ch, CURLOPT_POSTFIELDS, '&lt;xml&gt;'.$xml.'&lt;/xml&gt;');
    curl_setopt($ch, CURLOPT_HTTPHEADER, ['content-type: application/xml']);
    $response = curl_exec($ch);
    curl_close($ch);

    return $response;
}

?&gt;
</code>
        </pre>
<div class="glossary-definitions" style="display:none!important;"></div>
</div>
<div dir="ltr" class="section internal sub-topic">
<div class="titlepage">
<h5 class="title">
<a data-zd-article="UUID-dcf5bf7e-1b56-6f1c-d7fb-6aef7e9f9158" id="idm8539"></a>Beispiel Antwort StechuhrStatusSet</h5>
</div>
<pre class="programlisting">          <code class="code">&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;response&gt;
   &lt;status&gt;
      &lt;action&gt;StechuhrStatusSet&lt;/action&gt;
      &lt;message&gt;OK&lt;/message&gt;
      &lt;messageCode&gt;1&lt;/messageCode&gt;
   &lt;/status&gt;
&lt;/response&gt;
</code>
        </pre>
<div class="glossary-definitions" style="display:none!important;"></div>
</div>
<div dir="ltr" class="section internal sub-topic">
<div class="titlepage">
<h5 class="title">
<a data-zd-article="UUID-dcf5bf7e-1b56-6f1c-d7fb-6aef7e9f9158" id="UUID-dcf5bf7e-1b56-6f1c-d7fb-6aef7e9f9158_id_360017436919_id_h_01F0E8SQ6JVW0B009K7RD99XQG"></a>Beispiel Anfrage StechuhrSummary</h5>
</div>
<pre class="programlisting">          <code class="code">&lt;?php

$xml = '&lt;adresse&gt;6&lt;/adresse&gt;';

$output_xml = SendRequest('StechuhrSummary', $xml);

echo "&lt;pre&gt;";
var_dump($output_xml);
echo "&lt;/pre&gt;";

function SendRequest($methodname,$xml)
{
    $url = 'http://localhost/xentral/20.1/www/api/'.$methodname;

    $ch = curl_init($url);
    curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
    curl_setopt($ch, CURLOPT_HTTPAUTH, CURLAUTH_DIGEST);
    curl_setopt($ch, CURLOPT_USERPWD, "apitest:password1234");
    curl_setopt($ch, CURLOPT_POST, true);
    curl_setopt($ch, CURLOPT_POSTFIELDS, '&lt;xml&gt;'.$xml.'&lt;/xml&gt;');
    curl_setopt($ch, CURLOPT_HTTPHEADER, ['content-type: application/xml']);
    $response = curl_exec($ch);
    curl_close($ch);

    return $response;
}

?&gt;
</code>
        </pre>
<div class="glossary-definitions" style="display:none!important;"></div>
</div>
<div dir="ltr" class="section internal sub-topic">
<div class="titlepage">
<h5 class="title">
<a data-zd-article="UUID-dcf5bf7e-1b56-6f1c-d7fb-6aef7e9f9158" id="UUID-dcf5bf7e-1b56-6f1c-d7fb-6aef7e9f9158_id_360017436919_id_toc-102"></a>Beispiel Antwort StechuhrSummary</h5>
</div>
<pre class="programlisting">          <code class="code">&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;response&gt;
   &lt;status&gt;
      &lt;action&gt;StechuhrStatusSet&lt;/action&gt;
      &lt;message&gt;OK&lt;/message&gt;
      &lt;messageCode&gt;1&lt;/messageCode&gt;
   &lt;/status&gt;
   &lt;xml&gt;
      &lt;mitarbeiter_adresse type="documentary"&gt;6&lt;/mitarbeiter_adresse&gt;
      &lt;ZeitRequest&gt;2019-11-25T10:17:01+01:00&lt;/ZeitRequest&gt;
      &lt;UrlaubSoll&gt;0&lt;/UrlaubSoll&gt;
      &lt;UrlaubIst&gt;0&lt;/UrlaubIst&gt;
      &lt;UeberstundenMonat&gt;0.00&lt;/UeberstundenMonat&gt;
      &lt;UeberstundenGesamt&gt;0.00&lt;/UeberstundenGesamt&gt;
      &lt;KW&gt;1&lt;/KW&gt;
      &lt;Einzelauflistung&gt;
         &lt;Kalenderwoche&gt;
            &lt;KW&gt;48&lt;/KW&gt;
            &lt;Arbeitstag&gt;
               &lt;Datum&gt;25.11.2019&lt;/Datum&gt;
               &lt;ArbeitszeitSoll&gt;0&lt;/ArbeitszeitSoll&gt;
               &lt;ArbeitszeitIst&gt;0.25&lt;/ArbeitszeitIst&gt;
               &lt;ArbeitsEvents&gt;
                  &lt;Event&gt;
                     &lt;typ&gt;kommen&lt;/typ&gt;
                     &lt;zeit&gt;08:00&lt;/zeit&gt;
                  &lt;/Event&gt;
                  &lt;Event&gt;
                     &lt;typ&gt;pausestart&lt;/typ&gt;
                     &lt;zeit&gt;12:30&lt;/zeit&gt;
                  &lt;/Event&gt;
                  &lt;Event&gt;
                     &lt;typ&gt;pausestop&lt;/typ&gt;
                     &lt;zeit&gt;13:30&lt;/zeit&gt;
                  &lt;/Event&gt;
                  &lt;Event&gt;
                     &lt;typ&gt;gehen&lt;/typ&gt;
                     &lt;zeit&gt;17:00&lt;/zeit&gt;
                  &lt;/Event&gt;
               &lt;/ArbeitsEvents&gt;
            &lt;/Arbeitstag&gt;
            &lt;Arbeitstag&gt;
               &lt;Datum&gt;26.11.2019&lt;/Datum&gt;
               &lt;ArbeitszeitSoll&gt;0&lt;/ArbeitszeitSoll&gt;
               &lt;ArbeitszeitIst&gt;0&lt;/ArbeitszeitIst&gt;
               &lt;ArbeitsEvents/&gt;
            &lt;/Arbeitstag&gt;
            [...]
         &lt;/Kalenderwoche&gt;
      &lt;/Einzelauflistung&gt;
   &lt;/xml&gt;
&lt;/response&gt;
</code>
        </pre>
<div class="glossary-definitions" style="display:none!important;"></div>
</div>
<div class="glossary-definitions" style="display:none!important;"></div>
</div>
<div class="glossary-definitions" style="display:none!important;"></div>
</div>
<div dir="ltr" class="section internal sub-topic">
<div class="titlepage">
<h3 class="title">
<a data-zd-article="UUID-dcf5bf7e-1b56-6f1c-d7fb-6aef7e9f9158" id="UUID-dcf5bf7e-1b56-6f1c-d7fb-6aef7e9f9158_id_360017436919_id_toc-0"></a>Aktueller Hinweis: Neue API Accounts ab Version 20.3</h3>
</div>
<p>Ab Version 20.3 muss <span class="bold"><strong>jeder</strong></span> API Account auch mit Permissions versehen sein. Diese müssen <span class="bold"><strong>immer</strong></span> eingestellt werden. Beim Update von Version 20.2 auf Version 20.3 ist der API Account aus den Grundeinstellungen in die API Accounts App übernommen worden.</p>
<p>Die API Accounts aus den Grundeinstellungen in das Modul API Accounts migriert. Hier benötigen Sie keine weiteren Anpassungen des Aufrufs.</p>
<p>Sollten Sie bereits einen API Account aus dem Modul API Account nutzen und den Aufruf ohne den Parameter der API-ID verwenden, nehmen Sie bitte folgende Anpassung vor:</p>
<p>Für diesen Aufruf (/www/index.php?module=api&amp;action=AdresseGet&amp;hash={hash}&amp;id={address-id}) wird noch zusätzlich der Parameter &amp;api_id={api_id} benötigt. Dabei ist "id" mit der ID der zu verwendenden API zu ersetzen, also z.B. "api_id=1" oder "api_id=2".</p>
<div dir="ltr" class="section internal sub-topic">
<div class="titlepage">
<h4 class="title">
<a data-zd-article="UUID-dcf5bf7e-1b56-6f1c-d7fb-6aef7e9f9158" id="UUID-dcf5bf7e-1b56-6f1c-d7fb-6aef7e9f9158_id_360017436919_id_toc-1"></a>Umstellung des API-Aufrufs via Hash</h4>
</div>
<div dir="ltr" class="section internal sub-topic">
<div class="titlepage">
<h5 class="title">
<a data-zd-article="UUID-dcf5bf7e-1b56-6f1c-d7fb-6aef7e9f9158" id="UUID-dcf5bf7e-1b56-6f1c-d7fb-6aef7e9f9158_id_360017436919_id_toc-2"></a>Hintergrund</h5>
</div>
<p>Es gibt verschiedene Möglichkeiten, die xentral-API anzusprechen. In der ersten Variante wurde folgender Aufruf verwendet:</p>
<p>URL.de/index.php?module=api&amp;action=BenutzerList&amp;hash=</p>
<p>Diese war auf den API-Account aus den Grundeinstellungen zugeschnitten, der nicht weiter über IDs oder Ähnliches unterschieden werden konnte.</p>
<p>Mit der Version 20.1 wurde dann das eigene Modul für API-Accounts implementiert und zusätzlich auch ein neuer Parameter “api_id” hinzugefügt, welcher in Kombination mit dem Hash sicherstellt, dass die Anfragen auch über den korrekten API-Account aufgerufen/abgehandelt werden. Wie der Parametername schon vermuten lässt, handelt es sich hier dann um die ID des API-Accounts.</p>
<p>Dieser Parameter wird seit der Version 20.3 als Pflichtangabe benötigt. Ohne diesen werden die Aufrufe mit der Fehlermeldung "wrong hash" begleitet.</p>
<div class="glossary-definitions" style="display:none!important;"></div>
</div>
<div class="glossary-definitions" style="display:none!important;"></div>
</div>
<div dir="ltr" class="section internal sub-topic">
<div class="titlepage">
<h4 class="title">
<a data-zd-article="UUID-dcf5bf7e-1b56-6f1c-d7fb-6aef7e9f9158" id="UUID-dcf5bf7e-1b56-6f1c-d7fb-6aef7e9f9158_id_360017436919_id_toc-3"></a>Wie verwende ich diesen Parameter korrekt?</h4>
</div>
<p>Hier ist die ID API-Account des Accounts mit zu übergeben. Derzeit kann die ID des Parameters nicht in der Oberfläche herausgelesen werden. Eine Änderung wird derzeit durch die Entwicklung vorbereitet.</p>
<div class="glossary-definitions" style="display:none!important;"></div>
</div>
<div dir="ltr" class="section internal sub-topic">
<div class="titlepage">
<h4 class="title">
<a data-zd-article="UUID-dcf5bf7e-1b56-6f1c-d7fb-6aef7e9f9158" id="UUID-dcf5bf7e-1b56-6f1c-d7fb-6aef7e9f9158_id_360017436919_id_toc-4"></a>Wie kann die ID des API-Accounts abgefragt werden?</h4>
</div>
<div dir="ltr" class="section internal sub-topic">
<div class="titlepage">
<h5 class="title">
<a data-zd-article="UUID-dcf5bf7e-1b56-6f1c-d7fb-6aef7e9f9158" id="UUID-dcf5bf7e-1b56-6f1c-d7fb-6aef7e9f9158_id_360017436919_id_toc-5"></a>Datenbank Ansicht</h5>
</div>
<p>Modul "Datenbank Ansicht" öffnen via Supersearch oder über den Appstore. Tabelle "api_account" anwählen. In der Spalte “Bezeichnung” nach dem Namen/Bezeichnung des API-Accounts suchen. Links davon befindet sich die ID.</p>
<div dir="ltr" class="note" style="margin-left: 0.5in; margin-right: 0.5in;">
<h3 class="title">Anmerkung</h3>
<p>Bei mehreren Einträgen kann es sein, dass die Ansicht nicht nur langsam oder nicht geöffnet wird. Hier dann auf Variante 2 umsteigen.</p>
</div>
<div class="glossary-definitions" style="display:none!important;"></div>
</div>
<div dir="ltr" class="section internal sub-topic">
<div class="titlepage">
<h5 class="title">
<a data-zd-article="UUID-dcf5bf7e-1b56-6f1c-d7fb-6aef7e9f9158" id="UUID-dcf5bf7e-1b56-6f1c-d7fb-6aef7e9f9158_id_360017436919_id_toc-6"></a>Bericht</h5>
</div>
<p>Öffne Controlling → Berichte.</p>
<div class="procedure">
<ol class="procedure" type="1">
<li class="step">
<p>Neuen Bericht erstellen</p>
</li>
<li class="step">
<p>Folgendes SQL angeben</p>
<p>select id, bezeichnung from api_account where bezeichnung like '%Migration%' // Der Name hängt hier natürlich von der verwendeten Bezeichnung ab. Spalten erzeugen lassen</p>
</li>
<li class="step">
<p>Unter "Ansicht" sich die entsprechende ID anzeigen lassen</p>
</li>
</ol>
</div>
<p><span class="bold"><strong>Neues Beispiel anhand des Parameters:</strong></span></p>
<p>IhreURL/20.3/www/index.php?module=api&amp;action=BenutzerListhash=b7a41dfcc80257710d799a7576f685f12f096624&amp;api_id=26</p>
<p>Die Reihenfolge der Parameter spielt keine Rolle.</p>
<div class="glossary-definitions" style="display:none!important;"></div>
</div>
<div class="glossary-definitions" style="display:none!important;"></div>
</div>
<div dir="ltr" class="section internal sub-topic">
<div class="titlepage">
<h4 class="title">
<a data-zd-article="UUID-dcf5bf7e-1b56-6f1c-d7fb-6aef7e9f9158" id="UUID-dcf5bf7e-1b56-6f1c-d7fb-6aef7e9f9158_id_360017436919_id_toc-7"></a>Alternative zum Hash-Aufruf</h4>
</div>
<p>Nachdem der Hash-Aufruf auch nur für die API-Funktionen der Standard-API verwendet werden kann, besteht auch die Option über den Wrapper der REST-API zu gehen.</p>
<p>Die Umleitung wird hier beschrieben: <a class="link" href="https://update.xentral.biz/apidoc/docs203.html#standard_api_aufrufe" target="_blank" rel="noopener">https://update.xentral.biz/apidoc/docs203.html#standard_api_aufrufe</a></p>
<p>Zusätzlich ändert sich dadurch aber auch die Methode zur Authentifizierung. <a class="link" href="https://update.xentral.biz/apidoc/docs203.html#authentifizierung" target="_blank" rel="noopener">https://update.xentral.biz/apidoc/docs203.html#authentifizierung</a></p>
<div class="glossary-definitions" style="display:none!important;"></div>
</div>
<div class="glossary-definitions" style="display:none!important;"></div>
</div>
</div>
<div class="glossary-definitions" style="display:none!important;"></div>
</div>
</div>
<div class="glossary-definitions" style="display:none!important;"></div>
</div>

    </div>
</body>
</html>