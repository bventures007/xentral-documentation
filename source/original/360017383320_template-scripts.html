<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Template Scripts</title>
    <!--
    Zendesk Original HTML Export
    Artikel-ID: 360017383320
    Titel: Template Scripts
    URL: https://help.xentral.com/hc/de/articles/360017383320-Template-Scripts
    Erstellt: 2020-11-10T10:22:53Z
    Aktualisiert: 2024-08-29T13:34:47Z
    Draft: False
    User Segment ID: 360000493960
    Section ID: 360004832920
    Export-Zeitpunkt: 2025-11-16 19:08:45
    -->
</head>
<body>
    <div class="zendesk-article-content">
        <div lang="de" dir="ltr" class="section original-topic zd-article" xml:lang="de">
<p>Template Scripts ermöglichen die weitergehende Anpassung von PDF-Belegen, E-Mail-Templates und anderen Ausgabeformaten aus xentral. Bereits im Standard stehen mit den Konfigurationsmöglichkeiten viele Einstellungsmöglichkeiten zur Verfügung. Dazu gehören die Anpassung der Schriftart und -größen, Positionierung von Elementen und einiges mehr. Sollen aber neue Daten hinzugefügt werden, Berechnungen stattfinden oder besondere Spracheinstellungen umgesetzt werden, kann durch Rendering Scripts jedes Detail angepasst werden.</p>
<div dir="ltr" class="section internal sub-topic">
<div class="titlepage">
<h2 class="title">
<a data-zd-article="UUID-d95af4ba-2c4e-63b4-d8e0-619d2f55f938" id="UUID-d95af4ba-2c4e-63b4-d8e0-619d2f55f938_id_360017383320_id_toc-0"></a>Briefpapier überladen</h2>
</div>
<p>Ein Beispiel für die Anpassung von Templates in xentral ist die Überladung des Briefpapiers. Hier können weitere Informationen integriert werden, die im Standard-Briefpapier nicht zur Verfügung stehen, wie zum Beispiel zusätzlich bei einer Artikelposition zur Artikelbeschreibung das Gewicht oder die Höhe.</p>
<div dir="ltr" class="section internal sub-topic">
<div class="titlepage">
<h3 class="title">
<a data-zd-article="UUID-d95af4ba-2c4e-63b4-d8e0-619d2f55f938" id="UUID-d95af4ba-2c4e-63b4-d8e0-619d2f55f938_id_360017383320_id_toc-1"></a>Umsetzung</h3>
</div>
<p>Die Datei die das Briefpapier überladen soll, muss class.briefpapier_custom.php heißen. Diese Datei muss im Ordner www/lib/dokumente liegen und ist dann für alle Belegarten (Rechnung, Auftragm Lieferschein, Gutschrift, etc.) gültig.</p>
<p>Im folgenden Beispiel soll zusätzlich das Gewicht sowie die Höhe, Breite, Länge und Ursprungsregion des Artikels zur Artikelbeschreibung einer Position hinzugefügt werden. Bisher gibt es noch kein Custom Briefpapier, weshalb das Briefpapier vorerst wie in den Standardeinstellungen festgelegt aussieht:</p>
<div class="mediaobject"><img src="https://help.xentral.com/hc/article_attachments/4996369650716" style="" alt="Template1.png"></div>
<p>Als Erstes ist die Datei class.briefpapier_custom.php zu erstellen. Das Grundgerüst für das Custom Briefpapier sieht wie folgt aus:</p>
<pre class="programlisting"><code class="code">&lt;?php

include_once "class.briefpapier.php";

class BriefpapierCustom extends Briefpapier {

  function __construct(&amp;$app)
  {
    $this-&gt;app = $app;
    parent::__construct($app);
  } 

} 
?&gt;
</code></pre>
<p>Als nächstes ist die Datei class.briefpapier.php zu öffnen, die derzeit für das Layout des Briefpapiers zuständig ist und sucht die Funktion heraus, die überladen werden soll, kopiert diese und fügt diese unter der Funktion __construct ein. In diesem Fall ist die Funktion renderItems() zu kopieren, da diese für die Darstellung der Artikelpositionen verantwortlich ist.</p>
<p>Da die Funktion renderItems() recht umfangreich ist, wird hier jetzt nur angedeutet, wie der Code von class.briefpapier_custom.php im Anschluß aussehen könnte.</p>
<pre class="programlisting"><code class="code">&lt;?php

include_once "class.briefpapier.php";

class BriefpapierCustom extends Briefpapier {

  function __construct(&amp;$app)
  {
    $this-&gt;app = $app;
    parent::__construct($app);
  } 

  public function renderItems()
  {

    $posWidth = $this-&gt;app-&gt;erp-&gt;Firmendaten("breite_position");
    $amWidth = $this-&gt;app-&gt;erp-&gt;Firmendaten("breite_menge");
    $itemNoWidth = $this-&gt;app-&gt;erp-&gt;Firmendaten("breite_nummer");

    ...
    ...
    ...
    
  }

} 
?&gt;
</code></pre>
<p>Unterhalb von</p>
<pre class="programlisting"><code class="code">if($item['ean']!="" &amp;&amp; $item['ean']!="0"){
   if($item['desc']!=""){
      $item['desc']=$item['desc']."\r\n".$this-&gt;app-&gt;erp- &gt;Beschriftung("dokument_ean").": ".$item['ean'];
   }else{
      $item['desc']=$this-&gt;app-&gt;erp-&gt;Beschriftung("dokument_ean").":   ".$item['ean'];
   }
}
</code></pre>
<p>wird nun die Größe, sowie die Höhe, Breite, Länge und Ursprungsregion des Artikels zur Variablen $item['desc'] hinzugefügt, da diese den Beschreibungstext beinhaltet und zu diesem die weiteren Werte hinzukommen sollen.</p>
<p>Der fertige Abschnitt sieht dann so aus:</p>
<pre class="programlisting"><code class="code">if($item['ean']!="" &amp;&amp; $item['ean']!="0"){
   if($item['desc']!=""){
      $item['desc']=$item['desc']."\r\n".$this-&gt;app-&gt;erp- &gt;Beschriftung("dokument_ean").": ".$item['ean'];
   }else{
      $item['desc']=$this-&gt;app-&gt;erp-&gt;Beschriftung("dokument_ean").":   ".$item['ean'];
   }
}

$daten = $this-&gt;app-&gt;DB-&gt;SelectArr("SELECT gewicht, laenge, breite, hoehe, ursprungsregion FROM artikel WHERE id = '".$item['artikel']."'");
$daten = reset($daten);

if($item['desc'] != ""){
   if($daten['gewicht'] != "" AND $daten['gewicht'] &gt; 0){
      $item['desc'] = $item['desc']."\r\n"."Gewicht: ".$daten['gewicht']." kg";
   }          
}else{
   if($daten['gewicht'] != "" AND $daten['gewicht'] &gt; 0){
      $item['desc'] = $item['desc']."Gewicht: ".$daten['gewicht']." kg";
   }
}

if($item['desc'] != ""){
   if($daten['laenge'] != "" AND $daten['laenge'] &gt; 0){
      $item['desc'] = $item['desc']."\r\n"."Länge: ".$daten['laenge']." cm";
   }
}else{
   if($daten['laenge'] != "" AND $daten['laenge'] &gt; 0){
      $item['desc'] = $item['desc']."Länge: ".$daten['laenge']." cm";
   }
}

if($item['desc'] != ""){
   if($daten['breite'] != "" AND $daten['breite'] &gt; 0){
      $item['desc'] = $item['desc']."\r\n"."Breite: ".$daten['breite']." cm";
   }
}else{
   if($daten['breite'] != "" AND $daten['breite'] &gt; 0){
      $item['desc'] = $item['desc']."Breite: ".$daten['breite']." cm";
   }
}
      
if($item['desc'] != ""){
   if($daten['hoehe'] != "" AND $daten['hoehe'] &gt; 0){
      $item['desc'] = $item['desc']."\r\n"."Höhe: ".$daten['hoehe']." cm";
   }
}else{
   if($daten['hoehe'] != "" AND $daten['hoehe' &gt; 0]){ 
      $item['desc'] = $item['desc']."Höhe: ".$daten['hoehe']." cm";
   }
}

$ursprungsregion = "";

switch($daten['ursprungsregion']){
   case "01":
      $ursprungsregion = "Schleswig-Holstein";
      break;
   case "02":
      $ursprungsregion = "Hamburg";
      break;
   case "03":
      $ursprungsregion = "Niedersachsen";
      break;
   case "04":
      $ursprungsregion = "Bremen";
      break;
   case "05":
      $ursprungsregion = "Nordrhein-Westfalen";
      break;
   case "06":
      $ursprungsregion = "Hessen";
      break;
   case "07":
      $ursprungsregion = "Rheinland-Pfalz";
      break;
   case "08":
      $ursprungsregion = "Baden-Württemberg";
      break;
   case "09":
      $ursprungsregion = "Bayern";
      break;
   case "10":
      $ursprungsregion = "Saarland";
      break;
   case "11":
      $ursprungsregion = "Berlin";
      break;
   case "12":
      $ursprungsregion = "Brandenburg";
      break;
   case "13":
      $ursprungsregion = "Mecklenburg-Vorpommern";
      break;
   case "14":
      $ursprungsregion = "Sachsen";
      break;
   case "15":
      $ursprungsregion = "Sachsen-Anhalt";
      break;
   case "16":
      $ursprungsregion = "Thüringen";
      break;
   case "99":
      $ursprungsregion = "ausländischer Ursprung";
      break;
}

if($item['desc'] != ""){
   if($ursprungsregion != ""){
      $item['desc'] = $item['desc']."\r\n"."Ursprungsregion: ".$ursprungsregion;
   }
}else{
   if($ursprungsregion != ""){
      $item['desc'] = $item['desc']."Ursprungsregion: ".$ursprungsregion;
   }
}  
</code></pre>
<p>Das Ergebnis sieht nun so aus:</p>
<div class="mediaobject"><img src="https://help.xentral.com/hc/article_attachments/4996369663900" style="" alt="Template2.png"></div>
<div class="glossary-definitions" style="display:none!important;"></div>
</div>
<div class="glossary-definitions" style="display:none!important;"></div>
</div>
<div dir="ltr" class="section internal sub-topic">
<div class="titlepage">
<h2 class="title">
<a data-zd-article="UUID-d95af4ba-2c4e-63b4-d8e0-619d2f55f938" id="UUID-d95af4ba-2c4e-63b4-d8e0-619d2f55f938_id_360017383320_id_toc-2"></a>Nur eine Belegart überladen</h2>
</div>
<p>Desweiteren gibt es die Möglichkeit nur bestimmte Belege zu überladen. In folgendem Beispiel soll zur Artikelbeschreibung einer Position das nächste, also kleinste Mindesthaltbarkeitsdatum aus dem Lager für diesen Artikel auf einem Kommissionierschein angezeigt werden. Dazu muss der Lieferschein überladen werden, da der Kommissionierschein ebenfalls mit der class.lieferschein.php erstellt wird. Um die class.lieferschein.php Datei zu überladen, wird eine Datei namens class.lieferschein_custom.php erstellt und diese in den xentralsordner nach www/lib/dokumente abgelegt. Bisher gibt es keine class.lieferschein_custom.php Datei, somit sieht der Kommissionierschein so aus:</p>
<div class="mediaobject"><img src="https://help.xentral.com/hc/article_attachments/4996431681052" style="" alt="Template3.png"></div>
<p>Das Grundgerüst der Datei sieht wie folgt aus:</p>
<pre class="programlisting"><code class="code">&lt;?php
if(!class_exists('BriefpapierCustom'))
{
  class BriefpapierCustom extends Briefpapier
  {

  }
}

class LieferscheinPDFCustom extends BriefpapierCustom {
  public $doctype;

  function __construct($app,$projekt="")
  {
    $this-&gt;app=&amp;$app;
    //parent::Briefpapier();
    $this-&gt;doctype="lieferschein";
    $this-&gt;doctypeOrig="Lieferschein";
    parent::__construct($this-&gt;app,$projekt);
  } 

}
?&gt;
</code></pre>
<p>Als nächstes wird die passende Funktion, die überladen werden soll, in der class.lieferschein.php gesucht. In diesem Fall ist es die Funktion GetLieferschein. Diese Funktion wird kopiert und unter dem Konstruktor __construct eingefügt. Da die Funktion GetLieferschein recht lang ist, wird hier nur angedeutet, wie die Datei derzeit aussieht:</p>
<pre class="programlisting"><code class="code">&lt;?php
if(!class_exists('BriefpapierCustom'))
{
  class BriefpapierCustom extends Briefpapier
  {
    
  }
}

class LieferscheinPDFCustom extends BriefpapierCustom {
  public $doctype;

  function __construct($app,$projekt="")
  {
    $this-&gt;app=&amp;$app;
    //parent::Briefpapier();
    $this-&gt;doctype="lieferschein";
    $this-&gt;doctypeOrig="Lieferschein";
    parent::__construct($this-&gt;app,$projekt);
  } 

  function GetLieferschein($id,$info="",$extrafreitext="")
  {
    $this-&gt;doctypeid = $id;
    if(method_exists($this-&gt;app-&gt;erp,'LieferscheinSeriennummernberechnen'))$this- &gt;app-&gt;erp-&gt;LieferscheinSeriennummernberechnen($id);
    $briefpapier_bearbeiter_ausblenden = $this-&gt;app-&gt;erp- &gt;Firmendaten('briefpapier_bearbeiter_ausblenden');
    $briefpapier_vertrieb_ausblenden = $this-&gt;app-&gt;erp-&gt;Firmendaten('briefpapier_vertrieb_ausblenden');
    $adresse = $this-&gt;app-&gt;DB-&gt;Select("SELECT adresse FROM lieferschein WHERE id='$id' LIMIT 1");

    ...
    ...
    ...

  }

}
?&gt;
</code></pre>
<p>Nun werden die Anpassungen im Code vorgenommen. Wenn diese nun einfach hinzugefügt werden würden, wären diese für Lieferscheine und Kommissionierscheine gültig. Allerdings sollen hier nur die Kommissionierscheine angepasst werden, weshalb mit einem if Statement vorher geprüft wird, ob es sich um einen Kommissionierschein handelt. Die Änderungen werden unter</p>
<pre class="programlisting"><code class="code">/*
  if(!empty($chargen)){
    foreach($chargen as $chargen=&gt;$charge){
      $chargenliste = $chargenliste.$charge['charge'].";";
    }

    $chargenliste=substr($chargenliste, 0, -1);

    $value['chargen'] = $this-&gt;app-&gt;DB-&gt;Select("SELECT chargenverwaltung FROM artikel WHERE id='".$value[artikel]."' LIMIT 1");

    if($value['chargen']=="0"){
      $value['beschreibung'] = $value['beschreibung'];
    }else{
      $value['beschreibung'] = $value['beschreibung']."\r\n".$this-&gt;app-&gt;erp-     &gt;Beschriftung("dokument_charge").": ". $chargenliste;
    }
  }
*/
</code></pre>
<p>hinzugefügt. Das Ganze sieht dann so aus:</p>
<pre class="programlisting"><code class="code">if($info == "kommissionierschein"){
  if($value['freifeld1'] != ""){
    //$value['beschreibung'] .= "\r\n"."Bitte folgendes MHD wählen:     ".$value['freifeld1'];
  }else{
    $mhd = $this-&gt;app-&gt;DB-&gt;Select("SELECT MIN(mhddatum) FROM   lager_mindesthaltbarkeitsdatum WHERE artikel= '".$value['artikel']."' AND mhddatum &gt;         CURDATE()");
    $value['beschreibung'] .= "\r\n"."Kleinstes MHD im Lager: ".$mhd;
  }
}
</code></pre>
<p>Endergebnis:</p>
<div class="mediaobject"><img src="https://help.xentral.com/hc/article_attachments/4996407788572" style="" alt="Template4.png"></div>
<div class="glossary-definitions" style="display:none!important;"></div>
</div>
<div dir="ltr" class="section internal sub-topic">
<div class="titlepage">
<h2 class="title">
<a data-zd-article="UUID-d95af4ba-2c4e-63b4-d8e0-619d2f55f938" id="UUID-d95af4ba-2c4e-63b4-d8e0-619d2f55f938_id_360017383320_id_toc-3"></a>Kommissionierliste / Pickliste überladen</h2>
</div>
<p>Die Überladung der Pickliste ist in xentral ebenfalls möglich.</p>
<div dir="ltr" class="section internal sub-topic">
<div class="titlepage">
<h3 class="title">
<a data-zd-article="UUID-d95af4ba-2c4e-63b4-d8e0-619d2f55f938" id="UUID-d95af4ba-2c4e-63b4-d8e0-619d2f55f938_id_360017383320_id_toc-4"></a>Umsetzung</h3>
</div>
<p>Die Datei die das Briefpapier überladen soll, wird in /www/pages als kommissionierlauf_custom.php angelegt. In der Datei befindet sich die Funktion KommissionierlaufPDF diese kann dann angepasst werden kann.</p>
<p>Im folgenden ist die Standardfunktion gelistet, die dann den Vorstellungen nach angepasst werden kann.</p>
<pre class="programlisting"><code class="code"> public function KommissionierlaufPDF($id = null)
  {
    if($id)
    {
      $kommissionierlaufid = $id;
      $intern = true;
    }else{
      $intern = false;
      $kommissionierlaufid = (int)$this-&gt;app-&gt;Secure-&gt;GetGET('id');
    }
    $commission = $this-&gt;app-&gt;DB-&gt;SelectRow(
      sprintf(
        'SELECT `abgeschlossen`, `bezeichnung` FROM `kommissionierung` WHERE `id` = %d`',
        $kommissionierlaufid
      )
    );
    $bezeichnung = empty($commission)?'':$this-&gt;app-&gt;erp-&gt;ReadyForPDF(
      (String)$commission['bezeichnung']
    );
    //$lieferscheinids = $this-&gt;app-&gt;DB-&gt;SelectArr("SELECT id FROM lieferschein        WHERE kommissionierung = \"$kommissionierlaufid\"");
    $abgeschlossen = !empty($commission['abgeschlossen']);
    $artikelnummern = $this-&gt;getCommssionArticles($kommissionierlaufid,      $abgeschlossen);
    $articleArr = $this-&gt;getStorageLocationsByArticleArr($artikelnummern);
    $storage = $this-&gt;getStorageByArticleArr($articleArr);
    $lieferscheinnr = $this-&gt;app-&gt;DB-&gt;SelectArr(
      sprintf(
        'SELECT DISTINCT l.belegnr, l.name
        FROM `lieferschein` AS `l` 
        WHERE l.kommissionierung = %d 
        ORDER BY l.id',
        $kommissionierlaufid
      )
    );
    $kistenarray = array();
    $counter = 1;
    $mengenarray = array();
    $deliveryNoteNameByNumber = [];
    foreach($lieferscheinnr as $key =&gt; $value){
      $kistenarray[$value['belegnr']] = $counter;
      $deliveryNoteNameByNumber[$value['belegnr']] = $value['name'];
      $counter += 1;
    }
    //Neue PDF Datei erstellen
    $pdf=new SuperFPDF('P','mm','A4',$this-&gt;app);
    $pdf-&gt;AddPage();
    $pdf-&gt;SetFont('Arial', 'B', 15);
    $pdf-&gt;Cell(
      100, 8,
      'Kommissionierlauf '.$kommissionierlaufid.($bezeichnung !== ''?'  '.$bezeichnung:''),
      0, 0, 'L'
    );
    $pdf-&gt;SetFont('Arial','',10);
    $pdf-&gt;Cell(0, 8, date('d.m.Y'), 0, 1, 'R');
    $pdf-&gt;Ln();
    $breitenummer = $this-&gt;app-&gt;erp-&gt;Firmendaten('breite_nummer');
    $pdf-&gt;SetFont('Arial','B',10);
    $pdf-&gt;Cell(15, 5, 'Pos', 0, 0, 'C');
    $pdf-&gt;Cell(25, 5, 'Lagerort', 0, 0, 'C');
    $pdf-&gt;Cell(50, 5, 'Artikelnr', 0, 0, 'L');
    $pdf-&gt;Cell(55, 5, 'Artikel', 0, 0, 'L');
    $pdf-&gt;Cell(20, 5, 'Menge', 0, 0,'C');
    $pdf-&gt;Cell(25, 5, 'Lagerbest.', 0, 1, 'C');
    $pdf-&gt;SetFont('Arial','',10);
    $pdf-&gt;Line($pdf-&gt;GetX(), $pdf-&gt;GetY(), $pdf-&gt;GetX()+190, $pdf-&gt;GetY());
    $position = 1;
    foreach($artikelnummern as $key=&gt;$value){
      $artikelid = $value['id'];
      $fontsize = 10;
      if(isset($value['fontsize']) &amp;&amp; (float)$value['fontsize'] &gt; 1)
      {
        $fontsize = (float)$value['fontsize'];
      }
      $pdf-&gt;Cell(15, 5, $position, 0, 0, 'C');
      $pdf-&gt;SetFont('Arial','B',10);
      $artikellagerort = $value['kurzbezeichnung'];
      if($artikellagerort == ''){
        $artikellagerort = '-';
      }
      $pdf-&gt;Cell(25, 5, $artikellagerort, 0, 0, 'C');
      $pdf-&gt;SetFont('Arial','',10);
      $pdf-&gt;Cell(50, 5, $value['nummer'], 0, 0, 'L');
      $artikelname = $value['name_de'];
      $pdf-&gt;SetFont('Arial','B',$fontsize);
      $pdf-&gt;MultiCell(0, 5, $artikelname, 0, 'L');
      $pdf-&gt;SetFont('Arial','',$fontsize);
      $lieferscheindaten = $this-&gt;getDeliveryNoteDataByArticle(
        $kommissionierlaufid, $artikelid, $value['lager_platz'], $abgeschlossen
      );
      $ean = $value['ean'];
      if($ean != ''){
        $pdf-&gt;Cell(90, 5, '', 0, 0, 'L');
        $pdf-&gt;Cell(0, 5, '- EAN: '.$ean, 0, 1, 'L');
        $pdf-&gt;Cell(90, 5, "", 0, 0, 'L');
        $pdf-&gt;Cell(25, 5, $pdf-&gt;Code39($pdf-&gt;GetX(), $pdf-&gt;GetY(), $ean, 1, 5), 0, 1, 'L');
        $pdf-&gt;Cell(90, 5, "", 0, 1, 'L');
      }
      foreach($lieferscheindaten as $artikel=&gt;$daten){
        $pdf-&gt;Cell(90, 5, '', 0, 0, 'L');
        $pdf-&gt;Cell(
          0, 5,
          '- LS '.$daten['belegnr'].' / Kiste '.$kistenarray[$daten['belegnr']].' / '
          .$this-&gt;app-&gt;erp-&gt;ReadyForPDF($daten['name']).' ('.(float)$daten['menge'].')',
          0, 1, 'L'
        );
        $mengenarray[$daten['belegnr']] += $daten['menge'];
        }
        $pdf-&gt;SetX($pdf-&gt;GetX()+145);
        $artikelmenge = $value['menge'];
        $pdf-&gt;SetFont('Arial','B',$fontsize);
        $pdf-&gt;Cell(20, 5, (float)$artikelmenge, 0, 0, "C");
        $pdf-&gt;SetFont('Arial','',$fontsize);
        if(empty($storage[(int)$artikelid])
          || empty($storage[(int)$artikelid][(int)$value['lager_platz']])) {
          $artikellagerbestand = $this-&gt;app-&gt;DB-&gt;SelectRow(
            sprintf(
              'SELECT IFNULL(SUM(`menge`),0) AS menge 
              FROM `lager_platz_inhalt` 
              WHERE `artikel` = %d AND `lager_platz` = %d 
              LIMIT 1',
              (int)$artikelid, (int)$value['lager_platz']
            )
          );
        }
        else {
          $artikellagerbestand = ['menge'=&gt;$storage[(int)$artikelid][(int)$value['lager_platz']]];
         }
         if($artikellagerbestand['menge'] != ''){
           $artikellagerbestand['menge'] = (float)$artikellagerbestand['menge'];
         }else{
           $artikellagerbestand['menge'] = 0;
         }
         $pdf-&gt;Cell(25, 5, $artikellagerbestand['menge'], 0, 1, 'C');
         $pdf-&gt;Line($pdf-&gt;GetX(), $pdf-&gt;GetY(), $pdf-&gt;GetX()+190, $pdf-&gt;GetY());
         $position++;
        }       
        //$pdf-&gt;AddPage();
        $pdf-&gt;Ln(20);
        $pdf-&gt;SetFont('Arial','B',10);
        $pdf-&gt;Cell(23, 5, 'Kisten-Nr', 0, 0, 'L');
        $pdf-&gt;Cell(27, 5, 'LS-Nr', 0, 0, 'L');
        $pdf-&gt;Cell(35, 5, 'Kundenname', 0, 0, 'L');
        $pdf-&gt;Cell(15, 5, 'Teile', 0, 0, 'L');
        $pdf-&gt;Cell(20, 5, 'Barcode LS', 0, 1, 'L');
        $pdf-&gt;SetFont('Arial','',10);
        $pdf-&gt;Line($pdf-&gt;GetX(), $pdf-&gt;GetY(), $pdf-&gt;GetX()+190, $pdf-&gt;GetY());
        $pdf-&gt;Ln(1);
        foreach($lieferscheinnr as $key =&gt; $value){
          $pdf-&gt;Cell(23, 5, 'Kiste '.$kistenarray[$value['belegnr']], 0, 0, 'L');
          $pdf-&gt;Cell(27, 5, $value['belegnr'], 0, 0, 'L');
          $kundenname = !empty($deliveryNoteNameByNumber[$value['belegnr']])
            ?$deliveryNoteNameByNumber[$value['belegnr']]
            :$this-&gt;app-&gt;DB-&gt;Select(
              sprintf(
                "SELECT `name` FROM `lieferschein` WHERE `belegnr` = '%s' LIMIT 1",
        $this-&gt;app-&gt;DB-&gt;real_escape_string($value['belegnr'])
              )
            );
          if(strlen($kundenname) &gt; 17){
            $kundenname = trim(substr($kundenname, 0, 17)).'...';
          }
          $pdf-&gt;Cell(35, 5, $this-&gt;app-&gt;erp-&gt;ReadyForPDF($kundenname), 0, 0, 'L');
          $pdf-&gt;Cell(15, 5, $mengenarray[$value['belegnr']], 0, 0, 'L');
          $pdf-&gt;Cell(20, 5, $pdf-&gt;Code39($pdf-&gt;GetX(), $pdf-&gt;GetY(), $value['belegnr'], 1, 5), 0, 1, 'L');
          $pdf-&gt;Ln(18);
        }
        if($intern)
        {
          $pdf-&gt;filename = $this-&gt;app-&gt;erp-&gt;Dateinamen(date('Ymd').'_'.$kommissionierlaufid.'_Pickliste.pdf');
          $pdf-&gt;Output($this-&gt;app-&gt;erp-&gt;GetTMP().$pdf-&gt;filename,'F');
          return $this-&gt;app-&gt;erp-&gt;GetTMP().$pdf-&gt;filename;
        }
        $pdf-&gt;Output(date('Ymd').'_'.$kommissionierlaufid.'_Pickliste.pdf','D');
        $this-&gt;app-&gt;ExitXentral();
}
</code></pre>
<div class="glossary-definitions" style="display:none!important;"></div>
</div>
<div dir="ltr" class="section internal sub-topic">
<div class="titlepage">
<h3 class="title">
<a data-zd-article="UUID-d95af4ba-2c4e-63b4-d8e0-619d2f55f938" id="UUID-d95af4ba-2c4e-63b4-d8e0-619d2f55f938_id_360017383320_id_toc-5"></a>Adressdatenstammblatt überladen</h3>
</div>
<p>Ebenso wie das Briefpapier können auch andere Dokumente überladen werden, wie z.B. das Adressstammblatt. Die Definitionen dafür finden sich in der Klasse AdressstammblattPDF in der Datei class.adressstammblatt.php im Ordner www/lib/dokumente.</p>
<p>Zunächst wird die class.adressstammblatt_custom.php erstellt. Das Grundgerüst für das dafür sieht wie folgt aus:</p>
<pre class="programlisting"><code class="code">&lt;?php

include_once "class.adressstammblatt.php";

class AdressstammblattPDFCustom extends AdressstammblattPDF {

  function __construct($app,$projekt="")
  {
    $this-&gt;app=$app;
    $this-&gt;doctype="adresse";
    $this-&gt;doctypeOrig="Adressstammblatt";
    parent::__construct($this-&gt;app,$projekt);
  } 
} 
?&gt;
</code></pre>
<p>Anschließend können zusätzliche Daten im Stammdatenblatt ausgegeben werden. Dazu ist sich an der Klasse AdressstammblattPDF und den beiden darin enthaltenen Funktionen renderDocument() und GetAdressstammblatt() zu orientieren.</p>
<div class="glossary-definitions" style="display:none!important;"></div>
</div>
<div class="glossary-definitions" style="display:none!important;"></div>
</div>
<div class="glossary-definitions" style="display:none!important;"></div>
</div>

    </div>
</body>
</html>